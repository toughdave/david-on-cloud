@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap");

/* ===== DARK MODE THEME VARIABLES ===== */
:root {
    /* Light mode (default) */
    --bg-primary: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-tertiary: #f3f4f6;
    --text-primary: #1f2937;
    --text-secondary: #4b5563;
    --text-tertiary: #6b7280;
    --border-color: #e5e7eb;
    --shadow-sm: rgba(0, 0, 0, 0.05);
    --shadow-md: rgba(0, 0, 0, 0.1);
    --shadow-lg: rgba(0, 0, 0, 0.15);
    --nav-bg: rgba(255, 255, 255, 0.9);
    --card-bg: #ffffff;
    --input-bg: #ffffff;
    --gradient-start: #667eea;
    --gradient-end: #764ba2;
    --modal-scrollbar-width: 0px;
}

[data-theme="dark"] .availability-badge--light {
    background: rgba(129, 140, 248, 0.16);
    border-color: rgba(129, 140, 248, 0.3);
    color: #e0e7ff;
}

[data-theme="dark"] .resume-link--light {
    background: rgba(148, 163, 184, 0.18);
    border-color: rgba(148, 163, 184, 0.35);
    color: #e2e8f0;
}

[data-theme="dark"] .resume-link--light:hover {
    background: rgba(148, 163, 184, 0.28);
}

[data-theme="dark"] {
    /* Dark mode */
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-tertiary: #334155;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --text-tertiary: #94a3b8;
    --border-color: #334155;
    --shadow-sm: rgba(0, 0, 0, 0.3);
    --shadow-md: rgba(0, 0, 0, 0.4);
    --shadow-lg: rgba(0, 0, 0, 0.5);
    --nav-bg: rgba(15, 23, 42, 0.95);
    --card-bg: #1e293b;
    --input-bg: #334155;
    --gradient-start: #7c3aed;
    --gradient-end: #a855f7;
}

/* ===== PAGE LAYOUT FIX FOR SIDE SPACE ===== */
html {
    overflow-x: clip !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box;
    max-width: 100%;
    transition: background-color 0.3s ease, color 0.3s ease;
}

body {
    overflow-x: clip !important;
    margin: 0 !important;
    box-sizing: border-box;
    max-width: 100%;
    transition: background-color 0.3s ease, color 0.3s ease;
    /* Sticky footer layout */
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

main, #main-content {
    flex: 1 0 auto;
    display: flex;
    flex-direction: column;
}

main > section:only-child,
#main-content > section:only-child {
    flex: 1 0 auto;
}

[data-theme="dark"] body {
    background-color: var(--bg-primary);
}

.hero-gradient,
.snap-section {
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    max-width: 100%;
    box-sizing: border-box;
}

#projectsCarousel.is-wrap-jump {
    scroll-snap-type: none;
}

.max-w-6xl {
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    max-width: 72rem;
    box-sizing: border-box;
    overflow: visible;
}
/* ===== BASE STYLES ===== */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Arial", sans-serif;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    /* scroll-snap-type: y mandatory; */ /* COMMENTED OUT - SCROLL SNAP */
}

.skip-link {
    position: fixed;
    top: -100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.55rem 1.2rem;
    border-radius: 999px;
    background: #111827;
    color: #f8fafc;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    text-decoration: none;
    z-index: 200;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.25);
    transition: top 0.2s ease, box-shadow 0.2s ease;
    pointer-events: none;
}

.skip-link:focus,
.skip-link:focus-visible {
    top: 1rem;
    outline: none;
    box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.5), 0 12px 30px rgba(15, 23, 42, 0.25);
    pointer-events: auto;
}

#vanta-bg {
    transition: opacity 0.6s ease, filter 0.6s ease;
    z-index: -1;
    pointer-events: none;
}

/* Small screen: shift vanta left so globe appears on right side like desktop */
@media (max-width: 640px) {
    #vanta-bg {
        left: -30vw;
        width: 160vw;
    }
}

body.fun-vanta-dim #vanta-bg canvas,
body.fun-vanta-dim #vanta-bg {
    opacity: 0.6 !important;
    filter: saturate(0.85) brightness(1) !important;
}

/* Dark mode dim: Vanta behind content but above background (like tiled stars) */
/* Canvas bg is transparent (backgroundAlpha:0), so body dark bg shows through */
[data-theme="dark"] body.fun-vanta-dim #vanta-bg {
    z-index: 2 !important;
    mix-blend-mode: normal;
    pointer-events: none;
    opacity: 0.20 !important;
    filter: saturate(1.2) brightness(1.3) !important;
}

/* Footer must sit above Vanta in dark mode */
[data-theme="dark"] footer {
    position: relative;
    z-index: 3;
}

[data-theme="dark"] body.fun-vanta-dim #vanta-bg canvas {
    pointer-events: none;
    opacity: 1 !important;
}

body.fun-vanta-off #vanta-bg canvas,
body.fun-vanta-off #vanta-bg {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

/* Ensure body/html are transparent in fun mode so Vanta (z-index -1) shows through */
html.fun-mode-active,
html.fun-mode-active body {
    background-color: transparent !important;
}

/* ===== VANTA DIM MODE (LIGHT ONLY): Make sections translucent so globe shows through ===== */
/* Dark mode uses screen blend on top instead — no background changes needed */
html:not([data-theme="dark"]) body.fun-vanta-dim .fun-galaxy-section,
html:not([data-theme="dark"]) body.fun-vanta-dim .fun-star-scatter {
    background-color: transparent !important;
}

/* Reduce ::after galaxy overlay so Vanta peeks through (light mode only) */
html:not([data-theme="dark"]) body.fun-vanta-dim .fun-galaxy-section::after {
    opacity: 0.35 !important;
    backdrop-filter: blur(6px) saturate(100%) !important;
}

/* Dark mode dim: NO background changes needed — screen blend handles visibility */
/* Sections keep their full rich dark look, globe shows through via blend mode */

/* Hero gradient: allow Vanta through in dim mode (light only) */
html:not([data-theme="dark"]) body.fun-vanta-dim .hero-gradient {
    background: linear-gradient(135deg,
        rgba(79, 70, 229, 0.75) 0%,
        rgba(124, 58, 237, 0.7) 50%,
        rgba(14, 165, 233, 0.65) 100%) !important;
}

/* Dark mode hero: no dimming needed — screen blend sits on top cleanly */

html {
    scroll-behavior: smooth;
    background-color: var(--bg-primary);
}

h1 {
	font-size: 16px;
	margin-top: 0;
}

p {
	font-size: 15px;
	margin-bottom: 10px;
	margin-top: 5px;
}

.hero-gradient {
    position: relative;
    overflow: hidden;
    background:
        radial-gradient(circle at 12% 18%, rgba(255, 255, 255, 0.32), transparent 58%),
        radial-gradient(circle at 85% 12%, rgba(99, 102, 241, 0.45), transparent 55%),
        radial-gradient(circle at 22% 82%, rgba(14, 165, 233, 0.35), transparent 60%),
        radial-gradient(circle at 92% 78%, rgba(217, 70, 239, 0.32), transparent 58%),
        radial-gradient(circle at 55% 52%, rgba(129, 140, 248, 0.3), transparent 60%),
        linear-gradient(135deg, #4f46e5 0%, #7c3aed 50%, #0ea5e9 100%);
}

.hero-gradient::before {
    content: "";
    position: absolute;
    inset: -25% -15% -25% -15%;
    background: radial-gradient(circle at 18% 12%, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 65%);
    opacity: 0.75;
    pointer-events: none;
}

.hero-gradient::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image: radial-gradient(rgba(255, 255, 255, 0.16) 1px, transparent 1px);
    background-size: 28px 28px;
    opacity: 0.18;
    pointer-events: none;
}

.hero-content {
    position: relative;
    z-index: 1;
    min-width: 0;
}

.hero-content .grid > div {
    min-width: 0;
}

.hero-actions {
    position: relative;
    z-index: 40;
}

.hero-status {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    width: 100%;
    max-width: 100%;
    min-width: 0;
}

.hero-status--light {
    margin-top: -0.25rem;
    align-items: center;
}

.availability-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.55rem;
    padding: 0.4rem 0.95rem;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.35);
    color: #f8fafc;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    backdrop-filter: blur(6px);
    max-width: 100%;
    min-width: 0;
}

.availability-text {
    min-width: 0;
    white-space: normal;
    overflow-wrap: anywhere;
}

.availability-dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: #4ade80;
    box-shadow: 0 0 12px rgba(74, 222, 128, 0.8);
    animation: availabilityPulse 2.4s ease-in-out infinite;
}

.resume-link {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.4rem 0.95rem;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: #f8fafc;
    font-size: 0.75rem;
    font-weight: 600;
    text-decoration: none;
    background: rgba(15, 23, 42, 0.25);
    transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
    max-width: 100%;
    min-width: 0;
}

.resume-link-text {
    min-width: 0;
    white-space: normal;
    overflow-wrap: anywhere;
}

.resume-link svg {
    width: 14px;
    height: 14px;
}

.resume-link:hover {
    transform: translateY(-1px);
    background: rgba(255, 255, 255, 0.18);
    box-shadow: 0 10px 20px rgba(15, 23, 42, 0.25);
}

.availability-badge--light {
    background: rgba(79, 70, 229, 0.12);
    border: 1px solid rgba(79, 70, 229, 0.2);
    color: #4338ca;
}

.resume-link--light {
    background: rgba(15, 23, 42, 0.04);
    border: 1px solid rgba(15, 23, 42, 0.12);
    color: #1f2937;
}

.resume-link--light:hover {
    background: rgba(15, 23, 42, 0.08);
    box-shadow: 0 12px 22px rgba(15, 23, 42, 0.15);
}

@keyframes availabilityPulse {
    0%, 100% {
        transform: scale(1);
        opacity: 0.95;
    }
    50% {
        transform: scale(1.35);
        opacity: 0.6;
    }
}

.hero-primary-btn,
.hero-secondary-btn {
    position: relative;
    z-index: 40;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                color 0.15s ease,
                border-color 0.3s ease,
                background 0.3s ease,
                text-shadow 0.3s ease;
}

.hero-secondary-btn:hover {
    transform: translateY(-2px);
}

/* Prevent hover gap when button translates up */
.hero-primary-btn::after {
    content: "";
    position: absolute;
    bottom: -6px;
    left: 0;
    right: 0;
    height: 6px;
}

/* Light mode hover */
.hero-primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.25), 0 4px 10px rgba(79, 70, 229, 0.15);
    background: #4f46e5 !important;
    color: #fff !important;
}

[data-theme="dark"] .hero-primary-btn {
    color: #818cf8;
    text-shadow: 0 0 10px rgba(129, 140, 248, 0.45);
}

/* Dark mode hover */
[data-theme="dark"] .hero-primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 20px rgba(129, 140, 248, 0.4), 0 8px 25px rgba(99, 102, 241, 0.3);
    background: rgba(99, 102, 241, 0.2) !important;
    border-color: #818cf8;
    color: #a5b4fc !important;
    text-shadow: 0 0 15px rgba(129, 140, 248, 0.7);
}

.hero-portrait-glow {
    background:
        radial-gradient(circle at 28% 28%, rgba(56, 189, 248, 0.95), transparent 62%),
        radial-gradient(circle at 75% 75%, rgba(217, 70, 239, 0.85), transparent 60%),
        radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.9), transparent 68%);
    filter: blur(16px) saturate(185%);
    opacity: 0.95;
    box-shadow:
        0 0 32px rgba(56, 189, 248, 0.7),
        0 0 64px rgba(217, 70, 239, 0.6),
        0 0 96px rgba(99, 102, 241, 0.45);
    pointer-events: none;
    mix-blend-mode: screen;
    overflow: visible;
    transform: translateY(12px);
    z-index: 0;
}

html:not([data-theme="dark"]) body.fun-mode .hero-portrait-glow {
    background:
        radial-gradient(circle at 28% 22%, rgba(56, 189, 248, 0.9), transparent 62%),
        radial-gradient(circle at 76% 78%, rgba(244, 114, 182, 0.78), transparent 60%),
        radial-gradient(circle at 48% 52%, rgba(99, 102, 241, 0.75), transparent 68%);
    filter: blur(14px) saturate(180%);
    opacity: 0.95;
    mix-blend-mode: screen;
    box-shadow:
        0 0 36px rgba(56, 189, 248, 0.45),
        0 0 72px rgba(244, 114, 182, 0.35),
        0 0 120px rgba(99, 102, 241, 0.25);
}

html:not([data-theme="dark"]) body.fun-mode .hero-portrait-glow::before {
    background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.7), transparent 50%);
}

html:not([data-theme="dark"]) body.fun-mode .hero-portrait-glow::after {
    background: radial-gradient(circle at 80% 75%, rgba(244, 114, 182, 0.65), transparent 55%);
    opacity: 0.65;
}

html:not([data-theme="dark"]) body.fun-mode .hero-portrait-img {
    box-shadow: 0 22px 40px rgba(15, 23, 42, 0.3), 0 0 24px rgba(30, 64, 175, 0.25);
}

.hero-portrait-glow::before,
.hero-portrait-glow::after {
    content: "";
    position: absolute;
    inset: -12%;
    border-radius: 50%;
    filter: blur(18px) saturate(170%);
    opacity: 0.85;
    animation: heroGlowOrbit 18s linear infinite;
    transform-origin: center;
}

.hero-portrait-glow::before {
    background: radial-gradient(circle at 18% 22%, rgba(56, 189, 248, 0.95), transparent 48%);
}

.hero-portrait-glow::after {
    background: radial-gradient(circle at 82% 78%, rgba(217, 70, 239, 0.9), transparent 50%);
    animation-duration: 24s;
    animation-direction: reverse;
    opacity: 0.7;
}

.hero-portrait-img {
    width: clamp(260px, 34vw, 360px);
    height: clamp(260px, 34vw, 360px);
    z-index: 5;
}

.hero-portrait-wrap {
    position: relative;
    z-index: 10;
}

@media (max-width: 768px) {
    .hero-portrait-wrap {
        margin-top: 2.5rem;
    }

    /* ===== MOBILE FUN LAB TOGGLE ===== */
    .fun-lab-button {
        padding: 0;
        gap: 0;
        width: 46px;
        height: 26px;
        border: none;
        border-radius: 999px 0 0 999px;
        background: transparent;
        box-shadow: none;
        backdrop-filter: none;
        justify-content: center;
        align-items: center;
    }

    .fun-lab-icon,
    .fun-lab-label {
        display: none;
    }

    .fun-lab-toggle-track {
        width: 36px;
        height: 18px;
        border-radius: 999px;
        border: 2px solid rgba(148, 163, 184, 0.5);
        background: rgba(100, 116, 139, 0.5);
    }

    .fun-lab-toggle-knob {
        top: 2px;
        left: 2px;
        width: 12px;
        height: 12px;
    }

    body.fun-mode .fun-lab-toggle-track {
        background: rgba(129, 140, 248, 0.5);
        border-color: rgba(129, 140, 248, 0.5);
    }

    body.fun-mode .fun-lab-toggle-knob {
        left: 18px;
        background: #a5b4fc;
        box-shadow: 0 0 6px rgba(165, 180, 252, 0.7);
    }

    .fun-lab-settings-btn {
        padding: 0.15rem 0.2rem;
        height: 18px !important;
        min-width: 14px;
        align-self: center;
    }

    .fun-lab-settings-btn svg {
        width: 7px;
        height: 7px;
    }

    .hero-portrait-wrap .hero-portrait-glow {
        transform: translateY(24px);
    }
}

@media (max-width: 480px) {
    .hero-portrait-wrap {
        margin-top: 3rem;
    }
}

/* Ensure text stays on top of glow effects on mobile */
.hero-content > div:first-child {
    position: relative;
    z-index: 20;
}

.hero-content > div:last-child {
    position: relative;
    z-index: 10;
}

.typing-text {
    font-family: "JetBrains Mono", "Fira Code", "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    letter-spacing: -0.01em;
}

.typing-cursor {
    display: inline-flex;
    align-items: flex-end;
    justify-content: center;
    margin-left: 0.25rem;
    color: #e0e7ff;
    background: currentColor;
    width: 0.95rem;
    height: 0.22rem;
    border-radius: 999px;
    transform: translateY(0.18em);
    box-shadow: 0 0 10px rgba(224, 231, 255, 0.6);
    animation: typingCursorBlink 0.9s steps(2, start) infinite;
}

.typing-cursor-underscore {
    width: 1.05rem;
    height: 0.24rem;
}

.typing-cursor.force-blink {
    animation: typingCursorBlink 0.9s steps(2, start) infinite;
}

@keyframes typingCursorBlink {
    0%,
    49% {
        opacity: 1;
    }
    50%,
    100% {
        opacity: 0;
    }
}

@media (prefers-reduced-motion: reduce) {
    .typing-cursor {
        animation: none;
    }

    .typing-cursor.force-blink {
        animation: typingCursorBlink 0.9s steps(2, start) infinite;
    }
}

/* ===== FUN MODE ===== */
.fun-toggle-btn {
    padding: 0.4rem 0.85rem;
    border-radius: 999px;
    font-size: 0.7rem;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    font-weight: 600;
    border: 1px solid rgba(99, 102, 241, 0.5);
    color: #4338ca;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    white-space: nowrap;
}

.fun-toggle-btn:hover {
    background: #4338ca;
    color: #f8fafc;
    box-shadow: 0 10px 20px rgba(67, 56, 202, 0.35);
    transform: translateY(-1px);
}

.fun-toggle-mobile {
    width: 100%;
    text-align: center;
}

/* Fun Lab wrapper - positions both toggle and settings */
.fun-lab-button-wrap {
    position: fixed;
    right: 1.5rem;
    bottom: 5.5rem;
    z-index: 60;
    display: flex;
    align-items: center;
    gap: 0;
}

.fun-lab-button {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.5rem 0.9rem;
    border-radius: 999px 0 0 999px;
    border: 2px solid rgba(148, 163, 184, 0.5);
    border-right: 1px solid rgba(148, 163, 184, 0.3);
    color: #e2e8f0;
    font-size: 0.6rem;
    font-weight: 600;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    backdrop-filter: blur(12px);
    box-shadow: 0 8px 20px rgba(15, 23, 42, 0.3);
    background: rgba(15, 23, 42, 0.75);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
}

@keyframes borderPulse {
    0%, 100% { border-color: rgba(148, 163, 184, 0.7); box-shadow: 0 0 8px rgba(148, 163, 184, 0.2), 0 8px 20px rgba(15, 23, 42, 0.3); }
    50% { border-color: rgba(165, 180, 252, 0.8); box-shadow: 0 0 14px rgba(165, 180, 252, 0.35), 0 8px 20px rgba(15, 23, 42, 0.3); }
}

@keyframes borderPulseFun {
    0%, 100% { border-color: rgba(129, 140, 248, 0.6); box-shadow: 0 0 10px rgba(129, 140, 248, 0.25), 0 8px 20px rgba(15, 23, 42, 0.3); }
    50% { border-color: rgba(217, 70, 239, 0.7); box-shadow: 0 0 16px rgba(217, 70, 239, 0.35), 0 8px 20px rgba(15, 23, 42, 0.3); }
}

/* Inline toggle track inside the button */
.fun-lab-toggle-track {
    display: inline-block;
    width: 28px;
    height: 14px;
    border-radius: 999px;
    background: rgba(100, 116, 139, 0.5);
    position: relative;
    transition: all 0.3s ease;
    flex-shrink: 0;
    border: 1px solid rgba(148, 163, 184, 0.3);
}

.fun-lab-toggle-knob {
    position: absolute;
    top: 1.5px;
    left: 2px;
    width: 9px;
    height: 9px;
    border-radius: 50%;
    background: #94a3b8;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

body.fun-mode .fun-lab-toggle-track {
    background: rgba(129, 140, 248, 0.5);
    border-color: rgba(129, 140, 248, 0.5);
}

body.fun-mode .fun-lab-toggle-knob {
    left: 15px;
    background: #a5b4fc;
    box-shadow: 0 0 6px rgba(165, 180, 252, 0.7);
}

/* Settings chevron button */
.fun-lab-settings-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.55rem;
    border-radius: 0 999px 999px 0;
    border: 2px solid rgba(148, 163, 184, 0.5);
    border-left: none;
    color: #94a3b8;
    background: rgba(15, 23, 42, 0.75);
    backdrop-filter: blur(12px);
    cursor: pointer;
    transition: all 0.3s ease;
    height: 100%;
}

.fun-lab-settings-btn:hover {
    color: #e2e8f0;
    background: rgba(100, 116, 139, 0.4);
}

.fun-lab-settings-btn svg {
    transition: transform 0.3s ease;
}

/* Rotate chevron when panel is open */
.fun-lab-settings-btn[aria-expanded="true"] svg {
    transform: rotate(180deg);
}

.fun-lab-button:hover {
    color: #fff;
    animation: borderPulse 1.5s ease-in-out infinite;
}

/* When fun mode is ON (dark mode) */
body.fun-mode .fun-lab-button {
    background: rgba(30, 27, 75, 0.8);
    border-color: rgba(129, 140, 248, 0.5);
}

body.fun-mode .fun-lab-button:hover {
    animation: borderPulseFun 1.2s ease-in-out infinite;
}

body.fun-mode .fun-lab-settings-btn {
    border-color: rgba(129, 140, 248, 0.4);
    background: rgba(99, 102, 241, 0.2);
    color: #a5b4fc;
}

body.fun-mode .fun-lab-settings-btn:hover {
    background: rgba(99, 102, 241, 0.4);
    color: #fff;
}

.fun-lab-icon {
    font-size: 0.8rem;
    color: #a5b4fc;
}

.fun-lab-panel {
    position: fixed;
    right: 1.5rem;
    bottom: 9rem;
    width: min(320px, calc(100% - 3rem));
    background: rgba(15, 23, 42, 0.96);
    color: #e2e8f0;
    border: 1px solid rgba(99, 102, 241, 0.4);
    border-radius: 1rem;
    box-shadow: 0 20px 45px rgba(15, 23, 42, 0.45);
    opacity: 0;
    transform: translateY(12px) scale(0.98);
    pointer-events: none;
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 60;
}

.fun-lab-panel.is-open {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

.fun-lab-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.25rem 0.5rem;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: #a5b4fc;
}

.fun-lab-close {
    background: transparent;
    border: none;
    color: #e2e8f0;
    font-size: 0.85rem;
    cursor: pointer;
}

.close-control {
    position: relative;
    transition: transform 0.25s ease, color 0.25s ease, box-shadow 0.25s ease;
}

.close-control::after {
    content: "";
    position: absolute;
    inset: -6px;
    border-radius: inherit;
    background: radial-gradient(circle, rgba(129, 140, 248, 0.45), transparent 70%);
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
}

.close-control:hover {
    transform: rotate(8deg) scale(1.08);
}

.close-control:hover::after {
    opacity: 1;
}

.fun-lab-content {
    padding: 0.5rem 1.25rem 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.9rem;
}

.fun-lab-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
}

.fun-lab-title {
    margin: 0;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.16em;
    text-transform: uppercase;
}

.fun-lab-subtitle {
    margin: 0.2rem 0 0;
    font-size: 0.65rem;
    color: #94a3b8;
}

.fun-switch {
    position: relative;
    width: 46px;
    height: 24px;
    display: inline-block;
}

.fun-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.fun-switch-track {
    position: absolute;
    inset: 0;
    border-radius: 999px;
    background: rgba(148, 163, 184, 0.25);
    border: 1px solid rgba(148, 163, 184, 0.5);
    transition: all 0.3s ease;
}

.fun-switch-track::before {
    content: "";
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #e2e8f0;
    box-shadow: 0 4px 10px rgba(15, 23, 42, 0.4);
    transition: transform 0.3s ease;
}

.fun-switch input:checked + .fun-switch-track {
    background: linear-gradient(135deg, #4f46e5, #7c3aed);
    border-color: transparent;
}

.fun-switch input:checked + .fun-switch-track::before {
    transform: translateX(22px);
}

.fun-select select {
    background: rgba(15, 23, 42, 0.7);
    color: #e2e8f0;
    border: 1px solid rgba(148, 163, 184, 0.4);
    border-radius: 0.75rem;
    padding: 0.35rem 0.75rem;
    font-size: 0.7rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-family: "JetBrains Mono", "Fira Code", monospace;
}

body:not(.fun-mode) .footer-ticker,
body:not(.fun-mode) .fun-footer-planet,
body:not(.fun-mode) footer::before {
    display: none !important;
}

.fun-radio-group {
    display: flex;
    gap: 0.6rem;
}

.fun-radio {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.65rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: #cbd5f5;
}

.fun-radio input {
    accent-color: #818cf8;
}

body.fun-mode .fun-galaxy-section,
body.fun-mode .fun-star-scatter {
    position: relative;
    overflow: visible;
    /* Removed isolation and z-index so shooting star (z-index: 10) can sit between background (z-index: auto/0) and content (z-index: 20) */
}

body.fun-mode .fun-galaxy-section {
    /* Removed background, border, backdrop-filter to prevent stacking context */
    color: #e2e8f0;
}

html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section {
    color: #1f2937;
}

[data-theme="dark"] body.fun-mode .fun-galaxy-section {
    color: #e2e8f0;
    /* Styles moved to ::after */
}

body.fun-mode .fun-galaxy-section::before,
body.fun-mode .fun-galaxy-section::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
}

body.fun-mode .fun-galaxy-section::before {
    background-image: var(--star-tex-1, none);
    background-size: 512px 512px;
    background-repeat: repeat;
    opacity: 0.7;
    z-index: 1; /* Just above after */
    animation: starFieldTwinkle 6s ease-in-out infinite alternate;
}

@keyframes starFieldTwinkle {
    0%   { opacity: 0.55; transform: scale(1); }
    33%  { opacity: 0.75; transform: scale(1.002); }
    66%  { opacity: 0.6;  transform: scale(0.999); }
    100% { opacity: 0.72; transform: scale(1.001); }
}

html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section::before {
    opacity: 0.2;
}

/* Combined background and effects on ::after */
body.fun-mode .fun-galaxy-section::after {
    z-index: 0;
    background:
        radial-gradient(circle at 30% 30%, rgba(79, 70, 229, 0.25), transparent 55%),
        radial-gradient(circle at 12% 18%, rgba(56, 189, 248, 0.2), transparent 55%),
        radial-gradient(circle at 82% 22%, rgba(167, 139, 250, 0.2), transparent 58%),
        linear-gradient(150deg, rgba(15, 23, 42, 0.92) 0%, rgba(30, 41, 59, 0.95) 50%, rgba(15, 23, 42, 0.98) 100%);
    opacity: 0.55;
}

html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section::after {
    background:
        radial-gradient(circle at 30% 30%, rgba(59, 130, 246, 0.18), transparent 60%),
        radial-gradient(circle at 15% 20%, rgba(129, 140, 248, 0.25), transparent 55%),
        radial-gradient(circle at 80% 18%, rgba(248, 113, 113, 0.18), transparent 60%),
        linear-gradient(160deg, rgba(255, 255, 255, 0.96) 0%, rgba(239, 246, 255, 0.95) 55%, rgba(248, 250, 252, 0.98) 100%);
    opacity: 1; /* Opacity handled in colors */
}

[data-theme="dark"] body.fun-mode .fun-galaxy-section::after {
    background:
        radial-gradient(circle at 30% 30%, rgba(79, 70, 229, 0.25), transparent 55%),
        radial-gradient(circle at 12% 18%, rgba(56, 189, 248, 0.2), transparent 55%),
        radial-gradient(circle at 82% 22%, rgba(167, 139, 250, 0.2), transparent 58%),
        radial-gradient(circle at 82% 75%, rgba(14, 165, 233, 0.2), transparent 60%),
        linear-gradient(160deg, rgba(6, 10, 24, 0.75) 0%, rgba(15, 23, 42, 0.68) 55%, rgba(30, 41, 59, 0.78) 100%);
    opacity: 1;
    border-top: 1px solid rgba(148, 163, 184, 0.15);
    border-bottom: 1px solid rgba(148, 163, 184, 0.12);
    backdrop-filter: blur(18px) saturate(120%);
}

body.fun-mode .fun-galaxy-section > * {
    position: relative;
    z-index: 20;
}

/* Sticky section title needs higher z-index for dome lights to show above content */
body.fun-mode .fun-galaxy-section .sticky-section-title {
    z-index: 40;
}

.fun-star-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background-image: var(--star-tex-2, none);
    background-size: 384px 384px;
    background-repeat: repeat;
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 0;
    animation: starOverlayTwinkle 8s ease-in-out 2s infinite alternate;
}

@keyframes starOverlayTwinkle {
    0%   { opacity: 0.45; }
    40%  { opacity: 0.6; }
    70%  { opacity: 0.48; }
    100% { opacity: 0.58; }
}

html:not([data-theme="dark"]) body.fun-mode .fun-star-overlay {
    opacity: 0.2;
}

.fun-shooting-star {
    position: fixed;
    top: 18%;
    left: -35%;
    width: 220px;
    height: 2px;
    border-radius: 999px;
    background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.5), #ffffff);
    box-shadow: 0 0 12px rgba(56, 189, 248, 0.4);
    opacity: 0;
    pointer-events: none;
    z-index: 10;
    transform: translate3d(0, 0, 0) rotate(18deg);
    transform-origin: left center;
}

.fun-shooting-star::after {
    content: "";
    position: absolute;
    right: -4px;
    left: auto;
    top: 50%;
    width: 8px;
    height: 8px;
    transform: translateY(-50%);
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.9), 0 0 20px rgba(56, 189, 248, 0.6);
}

/* Gradient: tail (left/transparent) → head (right/bright) */
/* With +18deg rotation: head points down-right, tail trails up-left */

.fun-shooting-star.is-active {
    animation: shootingStar var(--shooting-duration, 1.3s) ease-out;
}

@keyframes shootingStar {
    0% {
        opacity: 0;
        transform: translate3d(0, 0, 0) rotate(var(--star-angle, 18deg));
    }
    20% {
        opacity: 1;
    }
    100% {
        opacity: 0;
        transform: translate3d(130vw, 50vh, 0) rotate(var(--star-angle, 18deg));
    }
}

body.fun-mode .fun-star-overlay {
    opacity: 0.55;
}

/* Bright twinkling stars - a few individually animated dots */
.fun-bright-star {
    position: absolute;
    width: 2px;
    height: 2px;
    border-radius: 50%;
    background: #ffffff;
    box-shadow: 0 0 3px 1px rgba(255, 255, 255, 0.6), 0 0 8px 2px rgba(129, 140, 248, 0.3);
    pointer-events: none;
    opacity: 0.3;
    z-index: 2;
    animation: starBrightTwinkle var(--twinkle-duration, 6s) ease-in-out var(--twinkle-delay, 0s) infinite;
}

.fun-bright-star.star-blue {
    background: #93c5fd;
    box-shadow: 0 0 4px 1px rgba(147, 197, 253, 0.8), 0 0 12px 3px rgba(56, 189, 248, 0.4);
}

.fun-bright-star.star-pink {
    background: #f9a8d4;
    box-shadow: 0 0 4px 1px rgba(249, 168, 212, 0.7), 0 0 10px 2px rgba(244, 114, 182, 0.35);
}

html:not([data-theme="dark"]) body.fun-mode .fun-bright-star {
    opacity: 0.15;
}

@keyframes starBrightTwinkle {
    0%, 100% {
        opacity: 0.2;
        transform: scale(1);
    }
    15% {
        opacity: 1;
        transform: scale(1.8);
    }
    30% {
        opacity: 0.35;
        transform: scale(1);
    }
}

body.fun-mode .fun-star-scatter .fun-star-overlay {
    opacity: 0.35;
}

body.fun-mode .fun-star-scatter > * {
    position: relative;
    z-index: 20;
}

body.fun-mode .fun-galaxy-section .section-title-container h2,
body.fun-mode .fun-galaxy-section .text-gray-800,
body.fun-mode .fun-galaxy-section .text-gray-700 {
    color: #e2e8f0 !important;
}

body.fun-mode .fun-galaxy-section .text-gray-600,
body.fun-mode .fun-galaxy-section .text-gray-500,
body.fun-mode .fun-galaxy-section .text-gray-400 {
    color: #cbd5f5 !important;
}

html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .section-title-container h2,
html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .text-gray-800,
html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .text-gray-700 {
    color: #0f172a !important;
}

html:not([data-theme="dark"]) body.fun-mode .text-gray-800,
html:not([data-theme="dark"]) body.fun-mode .text-gray-700 {
    color: #0f172a !important;
}

html:not([data-theme="dark"]) body.fun-mode .text-gray-600,
html:not([data-theme="dark"]) body.fun-mode .text-gray-500,
html:not([data-theme="dark"]) body.fun-mode .text-gray-400 {
    color: #334155 !important;
}

html:not([data-theme="dark"]) body.fun-mode .project-card,
html:not([data-theme="dark"]) body.fun-mode .project-list-card,
html:not([data-theme="dark"]) body.fun-mode #projectsList > div,
html:not([data-theme="dark"]) body.fun-mode .skill-card,
html:not([data-theme="dark"]) body.fun-mode .experience-card,
html:not([data-theme="dark"]) body.fun-mode .contact-form {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(239, 246, 255, 0.96)) !important;
    border: 1px solid rgba(99, 102, 241, 0.22) !important;
    box-shadow: 0 18px 36px rgba(59, 130, 246, 0.14), 0 0 0 1px rgba(99, 102, 241, 0.08);
}

html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .text-gray-600,
html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .text-gray-500,
html:not([data-theme="dark"]) body.fun-mode .fun-galaxy-section .text-gray-400 {
    color: #334155 !important;
}

html:not([data-theme="dark"]) body.fun-mode .contact-input {
    background: #ffffff;
    border-color: #cbd5e1;
    color: #0f172a;
}

html:not([data-theme="dark"]) body.fun-mode .contact-label {
    color: #475569;
}

@keyframes galaxyTwinkle {
    0%, 100% {
        opacity: 0.55;
        transform: translateY(0);
    }
    50% {
        opacity: 0.85;
        transform: translateY(-6px);
    }
}

@media (max-width: 640px) {
    .fun-lab-button-wrap {
        right: 1rem;
        bottom: 5rem;
    }

    .fun-lab-panel {
        right: 1rem;
        bottom: 8.5rem;
    }
}

body.fun-mode .fun-toggle-btn {
    background: rgba(15, 23, 42, 0.9);
    color: #e0e7ff;
    border-color: rgba(129, 140, 248, 0.7);
}

/* ===== TECHY PANEL DESIGN FOR FUN CONSOLE ===== */
.fun-console {
    margin-top: 0;
    max-height: 0;
    opacity: 0;
    padding: 0;
    border-radius: 0.875rem;
    background: linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.95));
    color: #e2e8f0;
    border: 1px solid rgba(129, 140, 248, 0.25);
    box-shadow: 
        0 0 0 1px rgba(129, 140, 248, 0.1),
        0 20px 50px rgba(15, 23, 42, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    overflow: hidden;
    transform: translateY(16px) scale(0.98);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.fun-console::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #818cf8, #d946ef, #22d3ee);
    background-size: 200% 100%;
    animation: consoleScanLine 3s linear infinite;
    opacity: 0.8;
}

@keyframes consoleScanLine {
    0% { background-position: 100% 0; }
    100% { background-position: -100% 0; }
}

body.fun-mode.fun-console-on .fun-console {
    margin-top: 2.5rem;
    max-height: 180px;
    opacity: 1;
    padding: 1.25rem 1.5rem;
    transform: translateY(0) scale(1);
}

.fun-console-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
    padding-bottom: 0.65rem;
    border-bottom: 1px solid rgba(129, 140, 248, 0.15);
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #94a3b8;
    font-family: "JetBrains Mono", "Fira Code", monospace;
}

.console-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.console-title::before {
    content: "";
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #22c55e;
    box-shadow: 0 0 8px rgba(34, 197, 94, 0.6);
    animation: consolePulse 2s ease-in-out infinite;
}

@keyframes consolePulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}

.console-chip {
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    background: rgba(129, 140, 248, 0.15);
    border: 1px solid rgba(129, 140, 248, 0.3);
    font-weight: 500;
    font-size: 0.6rem;
    color: #a5b4fc;
}

.fun-console-body {
    position: relative;
}

.console-line {
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.75rem;
    margin: 0.3rem 0;
    padding-left: 1rem;
    position: relative;
    color: #94a3b8;
}

.console-line::before {
    content: ">";
    position: absolute;
    left: 0;
    color: #818cf8;
    font-weight: 600;
}

.console-status {
    color: #22d3ee;
    animation: statusFlicker 4s ease-in-out infinite;
}

@keyframes statusFlicker {
    0%, 90%, 100% { opacity: 1; }
    92%, 94% { opacity: 0.5; }
}

/* Light theme overrides for fun console */
html:not([data-theme="dark"]) body.fun-mode .fun-console {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(241, 245, 249, 0.96));
    border-color: rgba(99, 102, 241, 0.25);
    box-shadow: 
        0 0 0 1px rgba(99, 102, 241, 0.1),
        0 20px 50px rgba(99, 102, 241, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    color: #334155;
}

html:not([data-theme="dark"]) body.fun-mode .fun-console-header {
    color: #64748b;
    border-bottom-color: rgba(99, 102, 241, 0.15);
}

html:not([data-theme="dark"]) body.fun-mode .console-chip {
    background: rgba(99, 102, 241, 0.1);
    border-color: rgba(99, 102, 241, 0.25);
    color: #4f46e5;
}

html:not([data-theme="dark"]) body.fun-mode .console-line {
    color: #475569;
}

html:not([data-theme="dark"]) body.fun-mode .console-line::before {
    color: #6366f1;
}

html:not([data-theme="dark"]) body.fun-mode .console-status {
    color: #0891b2;
}

/* ===== FILTER STYLES ===== */
.fun-project-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
    margin: 0 0 1.75rem;
}

/* Sticky filters for projects page ONLY - sits below sticky banner */
#projects .fun-project-filters {
    position: sticky;
    top: 152px;
    z-index: 35;
    background: transparent;
    padding: 1.5rem 0;
    margin: 1rem 0 3rem;
}

/* Index page Featured Projects filters - NOT sticky, normal flow */
.featured-projects .fun-project-filters {
    position: relative !important;
    top: auto !important;
    z-index: auto !important;
    background: transparent !important;
}

.featured-projects .fun-project-filters::before {
    display: none !important;
}

/* Colorful glow behind filter buttons when sticky */
#projects .fun-project-filters::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    height: 120%;
    background: radial-gradient(ellipse 60% 100% at 50% 50%, rgba(99, 102, 241, 0.4) 0%, rgba(139, 92, 246, 0.25) 40%, transparent 70%);
    filter: blur(20px);
    opacity: 0;
    pointer-events: none;
    z-index: -1;
    transition: opacity 0.4s ease;
}

#projects .fun-project-filters.is-sticky::before {
    opacity: 1;
}

[data-theme="dark"] #projects .fun-project-filters::before {
    background: radial-gradient(ellipse 60% 100% at 50% 50%, rgba(139, 92, 246, 0.6) 0%, rgba(99, 102, 241, 0.35) 40%, transparent 70%);
}

[data-theme="dark"] #projects .fun-project-filters.is-sticky::before {
    opacity: 1;
}

body.fun-mode .fun-project-filters {
    display: flex;
}

.fun-filter-btn {
    padding: 0.45rem 1rem;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 0.025em;
    line-height: 1.2;
    white-space: nowrap;
    border: 1px solid rgba(148, 163, 184, 0.3);
    background: rgba(248, 250, 252, 0.85);
    color: #334155;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(8px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

[data-theme="dark"] .fun-filter-btn {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border-color);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
}

.fun-filter-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(99, 102, 241, 0.25);
}

[data-theme="dark"] .fun-filter-btn:hover {
    background: #4f46e5;
    color: white;
    box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
}

.fun-filter-btn.is-active {
    background: linear-gradient(135deg, #4f46e5, #7c3aed);
    color: #f8fafc;
    border-color: transparent;
    box-shadow: 0 12px 26px rgba(79, 70, 229, 0.35);
    pointer-events: none;
}

.fun-filter-btn.is-active:hover {
    transform: none;
    cursor: default;
}

body.fun-mode .fun-filter-btn.is-active {
    background: linear-gradient(135deg, #818cf8, #d946ef);
    box-shadow: 0 0 15px rgba(217, 70, 239, 0.5);
}

.fun-filter-hidden {
    display: none !important;
}

.fun-filter-dim {
    opacity: 0.35;
    filter: grayscale(0.7);
    transform: scale(0.98);
    transition: opacity 0.4s ease, filter 0.4s ease, transform 0.4s ease, order 0.4s ease;
}

.fun-filter-dim a,
.fun-filter-dim button,
.fun-filter-dim [role="button"] {
    pointer-events: none;
}

/* Light Mode Constellation Overrides */
html:not([data-theme="dark"]) body.fun-mode .skill-constellation[data-visual] {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(241, 245, 249, 0.8));
    border-color: rgba(99, 102, 241, 0.2);
    box-shadow: inset 0 2px 6px rgba(255, 255, 255, 0.8);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .circuit-line,
html:not([data-theme="dark"]) body.fun-mode .skill-constellation .terminal-line {
    background: linear-gradient(90deg, rgba(99, 102, 241, 0.1), rgba(99, 102, 241, 0.6), rgba(99, 102, 241, 0.1));
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .circuit-node,
html:not([data-theme="dark"]) body.fun-mode .skill-constellation .terminal-cursor {
    background: #6366f1;
    box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .radar-ring {
    border-color: rgba(99, 102, 241, 0.3);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .flow-path {
    stroke: rgba(99, 102, 241, 0.5);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .flow-node {
    fill: #ffffff;
    stroke: #6366f1;
}

/* Featured Projects: Disable focus pulse to avoid hover conflict */
.featured-projects .fun-filter-focus {
    animation: none;
    box-shadow: none;
}

.featured-projects .fun-filter-focus:hover {
    transform: translateY(-10px) rotateX(5deg) rotateY(-2deg) !important;
}

/* Vertical list filter animations - move dimmed cards to bottom */
/* Projects list flex container for sorting/ordering */
#projectsList {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding-top: 0.5rem;
}

#projectsList .fun-filter-dim {
    order: 100;
    transform: scale(0.96);
    opacity: 0.2;
    z-index: 1;
    filter: grayscale(0.85) brightness(0.7);
}

#projectsList > div {
    position: relative;
    --flip-x: 0px;
    --flip-y: 0px;
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                filter 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                z-index 0s;
    z-index: 10;
}

#projectsList > div.is-flipping {
    transform: translate3d(var(--flip-x), var(--flip-y), 0);
}

#projectsList > div:hover {
    transform: translateY(-4px) perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
    z-index: 22;
}

#projectsList .fun-filter-hit:not(.fun-filter-dim) {
    order: 0;
    z-index: 20;
    filter: none;
}

/* Graceful rising animation for matched cards */
#projectsList .fun-filter-focus {
    z-index: 30;
    box-shadow: 0 20px 40px rgba(99, 102, 241, 0.2);
}

#projectsList .fun-filter-hit:not(.fun-filter-dim):hover {
    transform: translateY(-6px) perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
    z-index: 25;
}

#projectsList .fun-filter-dim:hover {
    z-index: 2;
}

/* Specificity fix for dim cards hover shrinking */
body.fun-mode #projectsList .fun-filter-dim:hover,
body.fun-mode #projectsCarousel .fun-filter-dim:hover {
    transform: scale(0.92) !important;
    z-index: 2;
    box-shadow: none !important;
    outline: 2px solid rgba(148, 163, 184, 0.25);
}

#projectsList > div.is-flipping {
    transition: none !important;
}

/* Carousel filter - ensure proper centering and no cut-off */
#projectsCarousel .project-card {
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                filter 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
}

#projectsCarousel .fun-filter-dim {
    transform: scale(0.92);
    opacity: 0.3;
    filter: grayscale(0.8) blur(1px);
}

body.fun-mode .fun-filter-btn:hover {
    border-color: rgba(129, 140, 248, 0.8);
    box-shadow: 0 0 18px rgba(129, 140, 248, 0.35), 0 12px 24px rgba(79, 70, 229, 0.25);
}

.fun-filter-hit {
    position: relative;
    outline: 1px solid rgba(129, 140, 248, 0.35);
    outline-offset: 0;
    box-shadow: 0 14px 28px rgba(30, 41, 59, 0.12);
    transition: transform 0.35s ease, box-shadow 0.35s ease, outline-color 0.35s ease;
}

.fun-filter-focus {
    outline: 2px solid rgba(129, 140, 248, 0.75);
    outline-offset: 0;
    box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.6), 0 16px 32px rgba(79, 70, 229, 0.25);
}

/* Global View Link Styles - All Modes */
.fun-view-link {
    position: relative;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 0.75rem;
    color: #4f46e5; /* Indigo-600 */
    overflow: visible;
    display: inline-flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.35rem;
    padding: 0.3rem 0.2rem;
    margin: -0.3rem -0.2rem;
    min-height: 1.8rem;
}

[data-theme="dark"] .fun-view-link {
    color: #a5b4fc; /* Indigo-300 */
}

.fun-view-link .view-link-text {
    order: 0;
    display: inline-block;
    max-width: 200px;
    overflow: hidden;
    white-space: nowrap;
    transform-origin: center;
    filter: blur(0);
    /* Hover-OUT: Slide down from top */
    transition: 
        max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s,
        opacity 0.3s ease 0.1s,
        transform 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s,
        filter 0.3s ease 0.1s,
        padding 0.3s ease 0.1s;
    padding-right: 0.15rem;
}

.fun-view-link::after {
    content: attr(data-reveal-text);
    order: 1;
    flex-shrink: 0;
    max-width: 0;
    overflow: hidden;
    white-space: nowrap;
    opacity: 0;
    font-size: 0.65rem;
    font-weight: 600;
    color: #4b5563; /* Gray-600 */
    transform: translateY(12px);
    filter: blur(3px);
    /* Hover-OUT: Slide down to bottom */
    transition: 
        max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.2s ease,
        transform 0.3s ease,
        filter 0.2s ease,
        color 0.3s ease;
}

[data-theme="dark"] .fun-view-link::after {
    color: #94a3b8; /* Slate-400 */
}

/* Hover effects - all modes */
.fun-view-link:hover .view-link-text {
    max-width: 0;
    opacity: 0;
    padding: 0;
    transform: translateY(-12px);
    filter: blur(3px);
    /* Hover-IN: Slide up and vanish */
    transition: 
        max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.2s ease,
        transform 0.3s ease,
        filter 0.2s ease,
        padding 0.2s ease;
}

.fun-view-link:hover::after {
    max-width: 280px;
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    color: #22c55e; /* Green on hover */
    /* Hover-IN: Slide up from bottom */
    transition: 
        max-width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s,
        opacity 0.3s ease 0.1s,
        transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s,
        filter 0.3s ease 0.1s,
        color 0.3s ease;
}

.fun-view-link i,
.fun-view-link svg {
    order: 2;
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), color 0.3s ease;
    margin-left: 0.3rem !important;
    flex-shrink: 0;
}

/* Arrow spins 360deg with a snappy spring effect */
.fun-view-link:hover i,
.fun-view-link:hover svg {
    color: #22c55e; /* Green */
    stroke: #22c55e;
    transform: rotate(360deg) scale(1.1);
}


/* Fun Mode Specific Overrides */
body.fun-mode .fun-view-link {
    color: #a5b4fc !important;
}

html:not([data-theme="dark"]) body.fun-mode .fun-view-link {
    color: #6366f1 !important; /* Indigo-500 for better visibility in light fun mode */
}

body.fun-mode .fun-view-link::after {
    color: #e2e8f0;
}

html:not([data-theme="dark"]) .fun-view-link {
    color: #475569;
}

html:not([data-theme="dark"]) .fun-view-link:hover::after {
    color: #16a34a; /* Green-600 for light mode */
}

.skill-constellation {
    margin-top: auto;
    align-self: stretch;
    width: 100%;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.4s ease, max-height 0.4s ease, transform 0.4s ease;
    transform: translateY(8px);
    position: relative;
    height: 64px;
    border-radius: 14px;
}

body.fun-mode.fun-skills-on .skill-constellation {
    opacity: 1;
    max-height: 90px;
    transform: translateY(0);
    animation: constellationFloat 5s ease-in-out infinite;
    animation-delay: var(--constellation-delay, 0s);
}

.skill-constellation svg {
    width: 100%;
    height: 64px;
    overflow: visible;
}

.skill-constellation span {
    position: absolute;
    display: block;
}

.skill-constellation[data-visual="systems"] {
    border: 1px solid rgba(129, 140, 248, 0.25);
    background: linear-gradient(145deg, rgba(15, 23, 42, 0.72), rgba(30, 41, 59, 0.3));
}

.skill-constellation .circuit-line {
    height: 2px;
    background: linear-gradient(90deg, rgba(129, 140, 248, 0.1), rgba(129, 140, 248, 0.75), rgba(129, 140, 248, 0.1));
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.4);
    animation: circuitGlow 2.8s ease-in-out infinite;
}

.skill-constellation .line-x {
    top: 16px;
    left: 12px;
    right: 12px;
}

.skill-constellation .line-x2 {
    top: 42px;
    left: 22px;
    right: 24px;
    animation-delay: 0.6s;
}

.skill-constellation .line-y {
    width: 2px;
    top: 10px;
    bottom: 10px;
    left: 28px;
    background: linear-gradient(180deg, rgba(129, 140, 248, 0.1), rgba(129, 140, 248, 0.75), rgba(129, 140, 248, 0.1));
}

.skill-constellation .line-y2 {
    width: 2px;
    top: 14px;
    bottom: 16px;
    right: 32px;
    animation-delay: 0.3s;
}

.skill-constellation .circuit-node {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #a5b4fc;
    box-shadow: 0 0 12px rgba(129, 140, 248, 0.6);
    animation: circuitPulse 2.4s ease-in-out infinite;
}

.skill-constellation .node-a {
    top: 12px;
    left: 22px;
}

.skill-constellation .node-b {
    top: 36px;
    right: 26px;
    animation-delay: 0.4s;
}

.skill-constellation .node-c {
    top: 28px;
    left: 64%;
    animation-delay: 0.8s;
}

.skill-constellation[data-visual="data"] {
    background: radial-gradient(circle at 30% 30%, rgba(56, 189, 248, 0.25), transparent 60%),
        linear-gradient(120deg, rgba(15, 23, 42, 0.8), rgba(30, 41, 59, 0.35));
    border: 1px solid rgba(56, 189, 248, 0.3);
}

.skill-constellation .radar-ring {
    border: 1px dashed rgba(129, 140, 248, 0.4);
    border-radius: 50%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    animation: radarPulse 3.2s ease-in-out infinite;
}

.skill-constellation .ring-1 { width: 40px; height: 40px; }
.skill-constellation .ring-2 { width: 56px; height: 56px; opacity: 0.65; animation-delay: 0.4s; }
.skill-constellation .ring-3 { width: 72px; height: 72px; opacity: 0.45; animation-delay: 0.8s; }

.skill-constellation .radar-sweep {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background: conic-gradient(from 0deg, rgba(56, 189, 248, 0.45), rgba(56, 189, 248, 0) 55%);
    animation: radarSweep 3.6s linear infinite;
}

.skill-constellation .radar-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #38bdf8;
    box-shadow: 0 0 10px rgba(56, 189, 248, 0.6);
    animation: radarBlink 2.4s ease-in-out infinite;
}

.skill-constellation .dot-1 { top: 18px; left: 18px; }
.skill-constellation .dot-2 { top: 40px; right: 22px; animation-delay: 0.6s; }
.skill-constellation .dot-3 { bottom: 14px; left: 60%; animation-delay: 1.2s; }

.skill-constellation[data-visual="automation"] {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(30, 41, 59, 0.4));
    border: 1px solid rgba(167, 139, 250, 0.35);
}

.skill-constellation .flow-path {
    fill: none;
    stroke: rgba(167, 139, 250, 0.7);
    stroke-width: 2.2;
    stroke-dasharray: 6 6;
    animation: flowDash 4s linear infinite;
}

.skill-constellation .flow-node {
    fill: rgba(226, 232, 240, 0.9);
    stroke: rgba(167, 139, 250, 0.8);
    stroke-width: 0.8;
}

.skill-constellation .flow-spark {
    fill: #f472b6;
    animation: flowSpark 2.4s ease-in-out infinite;
}

.skill-constellation[data-visual="os"] {
    background: linear-gradient(140deg, rgba(15, 23, 42, 0.92), rgba(30, 41, 59, 0.45));
    border: 1px solid rgba(148, 163, 184, 0.35);
}

.skill-constellation .terminal-line {
    height: 4px;
    border-radius: 999px;
    background: linear-gradient(90deg, rgba(129, 140, 248, 0.2), rgba(129, 140, 248, 0.75));
}

.skill-constellation[data-visual="os"] .line-1 { top: 14px; left: 14px; width: 65%; }
.skill-constellation[data-visual="os"] .line-2 { top: 26px; left: 14px; width: 50%; opacity: 0.7; }
.skill-constellation[data-visual="os"] .line-3 { top: 38px; left: 14px; width: 70%; opacity: 0.55; }
.skill-constellation[data-visual="os"] .line-4 { top: 50px; left: 14px; width: 42%; opacity: 0.6; }

.skill-constellation .terminal-cursor {
    width: 8px;
    height: 10px;
    border-radius: 2px;
    background: #a5b4fc;
    top: 48px;
    left: 60%;
    animation: cursorBlink 1.6s steps(2) infinite;
}

.skill-constellation .terminal-scan {
    inset: 6px;
    border-radius: 10px;
    background: linear-gradient(180deg, rgba(56, 189, 248, 0.12), transparent 60%);
    animation: terminalScan 3s ease-in-out infinite;
}

.skill-constellation[data-visual="infra"] {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.88), rgba(30, 41, 59, 0.38));
    border: 1px solid rgba(94, 234, 212, 0.25);
}

.skill-constellation .rack-unit {
    left: 14px;
    right: 14px;
    height: 10px;
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.7);
    border: 1px solid rgba(148, 163, 184, 0.35);
}

.skill-constellation .unit-1 { top: 12px; }
.skill-constellation .unit-2 { top: 28px; }
.skill-constellation .unit-3 { top: 44px; }

.skill-constellation .rack-light {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #22d3ee;
    box-shadow: 0 0 8px rgba(34, 211, 238, 0.6);
    animation: rackBlink 2.2s ease-in-out infinite;
}

.skill-constellation .light-1 { top: 15px; right: 24px; }
.skill-constellation .light-2 { top: 31px; right: 30px; animation-delay: 0.6s; }
.skill-constellation .light-3 { top: 47px; right: 20px; animation-delay: 1.1s; }

.skill-constellation[data-visual="network"] {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(30, 41, 59, 0.4));
    border: 1px solid rgba(56, 189, 248, 0.3);
}

.skill-constellation .net-line {
    height: 2px;
    background: rgba(56, 189, 248, 0.65);
    box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
}

.skill-constellation[data-visual="network"] .line-1 { top: 18px; left: 14px; width: 70%; }
.skill-constellation[data-visual="network"] .line-2 { top: 36px; left: 20px; width: 55%; }
.skill-constellation[data-visual="network"] .line-3 { top: 48px; left: 40%; width: 45%; }

.skill-constellation .net-node {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: #38bdf8;
    box-shadow: 0 0 10px rgba(56, 189, 248, 0.6);
    animation: netPulse 2.4s ease-in-out infinite;
}

.skill-constellation .node-1 { top: 14px; left: 14px; }
.skill-constellation .node-2 { top: 30px; left: 50%; animation-delay: 0.4s; }
.skill-constellation .node-3 { top: 44px; right: 22px; animation-delay: 0.8s; }
.skill-constellation .node-4 { top: 20px; right: 32px; animation-delay: 1.2s; }

.skill-constellation .net-pulse {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 1px solid rgba(56, 189, 248, 0.6);
    top: 26px;
    right: 44px;
    animation: netRing 2.8s ease-in-out infinite;
}

.skill-constellation polyline {
    fill: none;
    stroke: rgba(129, 140, 248, 0.7);
    stroke-width: 1.2;
    stroke-linecap: round;
    stroke-linejoin: round;
    filter: drop-shadow(0 0 6px rgba(129, 140, 248, 0.4));
}

.skill-constellation circle {
    fill: rgba(224, 231, 255, 0.9);
    stroke: rgba(129, 140, 248, 0.7);
    stroke-width: 0.6;
}

@keyframes constellationFloat {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-6px);
    }
}

@keyframes circuitGlow {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}

@keyframes circuitPulse {
    0%, 100% { transform: scale(0.85); opacity: 0.7; }
    50% { transform: scale(1.1); opacity: 1; }
}

@keyframes radarSweep {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes radarPulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.8; }
}

@keyframes radarBlink {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.1); }
}

@keyframes flowDash {
    to { stroke-dashoffset: -24; }
}

@keyframes flowSpark {
    0%, 100% { opacity: 0.4; transform: translateY(2px); }
    50% { opacity: 1; transform: translateY(-2px); }
}

@keyframes cursorBlink {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

@keyframes terminalScan {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.9; }
}

@keyframes rackBlink {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
}

@keyframes netPulse {
    0%, 100% { transform: scale(0.85); opacity: 0.6; }
    50% { transform: scale(1.15); opacity: 1; }
}

@keyframes netRing {
    0% { transform: scale(0.6); opacity: 0.6; }
    100% { transform: scale(1.4); opacity: 0; }
}

/* ===== LIGHT + FUN MODE SKILL CONSTELLATION OVERRIDES ===== */
/* Deeper colors for light theme visibility */
html:not([data-theme="dark"]) body.fun-mode .skill-constellation {
    background: linear-gradient(145deg, rgba(238, 242, 255, 0.98), rgba(224, 231, 255, 0.95)) !important;
    border-color: rgba(79, 70, 229, 0.4) !important;
    box-shadow: 0 4px 20px rgba(79, 70, 229, 0.2);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .circuit-line {
    background: linear-gradient(90deg, rgba(99, 102, 241, 0.3), rgba(79, 70, 229, 0.85), rgba(99, 102, 241, 0.3));
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
    animation: circuitGlow 2.8s ease-in-out infinite;
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .circuit-node {
    background: #6366f1;
    box-shadow: 0 0 12px rgba(99, 102, 241, 0.7);
    animation: circuitPulse 2.4s ease-in-out infinite;
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .line-y,
html:not([data-theme="dark"]) body.fun-mode .skill-constellation .line-y2 {
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.3), rgba(79, 70, 229, 0.85), rgba(99, 102, 241, 0.3));
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .radar-ring {
    border-color: rgba(79, 70, 229, 0.6);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .radar-sweep {
    background: conic-gradient(from 0deg, transparent 0deg, rgba(99, 102, 241, 0.7) 30deg, transparent 60deg);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .radar-dot {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.8);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .flow-path {
    stroke: rgba(79, 70, 229, 0.75);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .flow-node {
    fill: #a5b4fc;
    stroke: rgba(79, 70, 229, 0.8);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .flow-spark {
    fill: #6366f1;
    filter: drop-shadow(0 0 6px rgba(99, 102, 241, 0.7));
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .terminal-line {
    background: linear-gradient(90deg, rgba(99, 102, 241, 0.4), rgba(79, 70, 229, 0.85));
    box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .terminal-cursor {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.7);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .terminal-scan {
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.25), transparent 60%);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .rack-unit {
    background: rgba(224, 231, 255, 0.95);
    border-color: rgba(79, 70, 229, 0.45);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .rack-light {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.7);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .net-line {
    background: rgba(79, 70, 229, 0.7);
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .net-node {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.7);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation .net-pulse {
    border-color: rgba(99, 102, 241, 0.5);
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation polyline {
    stroke: rgba(99, 102, 241, 0.6);
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7));
}

html:not([data-theme="dark"]) body.fun-mode .skill-constellation circle {
    fill: #ffffff;
    stroke: rgba(99, 102, 241, 0.6);
}

@keyframes lightStrobeGlow {
    0%, 100% { 
        opacity: 0.5;
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.6), 0 0 14px rgba(99, 102, 241, 0.2);
    }
    50% { 
        opacity: 1;
        box-shadow: 0 0 16px rgba(255, 255, 255, 1), 0 0 28px rgba(99, 102, 241, 0.4);
    }
}

@keyframes lightStrobePulse {
    0%, 100% { 
        transform: scale(0.85);
        opacity: 0.6;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.7), 0 0 18px rgba(99, 102, 241, 0.3);
    }
    50% { 
        transform: scale(1.15);
        opacity: 1;
        box-shadow: 0 0 18px rgba(255, 255, 255, 1), 0 0 30px rgba(99, 102, 241, 0.5);
    }
}

body.fun-mode .analyst-spark span {
    transition: height 1.2s ease;
    animation: insightGlow 2.8s ease-in-out infinite;
    animation-delay: var(--spark-delay, 0s);
    box-shadow: 0 0 12px rgba(129, 140, 248, 0.35);
}

@keyframes insightGlow {
    0%, 100% {
        opacity: 0.6;
    }
    50% {
        opacity: 1;
    }
}

.fun-rover-buddy {
    position: absolute;
    top: 0;
    left: 0;
    width: 64px;
    height: 36px;
    z-index: 55;
    pointer-events: none;
    overflow: visible;
    filter: drop-shadow(0 12px 18px rgba(15, 23, 42, 0.35));
    --wheel-speed: 1.6s;
    --rover-glow: rgba(129, 140, 248, 0.45);
}

.fun-rover-buddy .rover-leg {
    position: absolute;
    bottom: -6px;
    width: 4px;
    height: 12px;
    background: #64748b;
    border-radius: 2px;
    transition: transform 0.1s ease;
    transform-origin: top;
    z-index: 0;
}

.fun-rover-buddy .rover-leg-left {
    left: 14px;
    transform: rotate(15deg);
}

.fun-rover-buddy .rover-leg-right {
    right: 14px;
    transform: rotate(-15deg);
}

.fun-rover-buddy span {
    position: absolute;
    display: block;
    z-index: 1;
}

.fun-rover-buddy .rover-glow {
    inset: -10px;
    border-radius: 999px;
    background: radial-gradient(circle at 40% 40%, var(--rover-glow), transparent 65%);
    filter: blur(10px);
    opacity: 0.55;
    animation: roverGlowPulse 3.2s ease-in-out infinite;
    z-index: 0;
}

.fun-rover-buddy .rover-body {
    width: 52px;
    height: 20px;
    left: 6px;
    top: 10px;
    border-radius: 12px;
    background: linear-gradient(135deg, #94a3b8, #e2e8f0);
    border: 1px solid rgba(148, 163, 184, 0.5);
}

.fun-rover-buddy .rover-visor {
    width: 18px;
    height: 8px;
    left: 14px;
    top: 14px;
    border-radius: 999px;
    background: linear-gradient(135deg, #1e293b, #334155);
    box-shadow: inset 0 0 4px rgba(56, 189, 248, 0.6);
}

.fun-rover-buddy .rover-wheel {
    width: 12px;
    height: 12px;
    bottom: 2px;
    background: #1e293b;
    border-radius: 50%;
    border: 2px solid #64748b;
    animation: roverSpin var(--wheel-speed, 1.6s) linear infinite;
}

.fun-rover-buddy .rover-wheel-left {
    left: 12px;
}

.fun-rover-buddy .rover-wheel-right {
    right: 12px;
}

.fun-rover-buddy .rover-antenna {
    width: 2px;
    height: 14px;
    right: 16px;
    top: 2px;
    background: #cbd5f5;
}

.fun-rover-buddy .rover-antenna::after {
    content: "";
    position: absolute;
    top: -4px;
    left: -4px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #f472b6;
    box-shadow: 0 0 8px rgba(244, 114, 182, 0.6);
}

.fun-rover-buddy .rover-fin {
    display: none;
    width: 12px;
    height: 6px;
    right: 6px;
    top: 6px;
    border-radius: 999px 999px 6px 6px;
    background: linear-gradient(180deg, rgba(224, 231, 255, 0.8), rgba(99, 102, 241, 0.4));
    transform: rotate(-12deg);
    animation: roverFinFlicker 2.4s ease-in-out infinite;
}

.fun-rover-buddy[data-style="orb"] .rover-body {
    width: 34px;
    height: 34px;
    left: 15px;
    top: 0;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #e2e8f0, #94a3b8 60%, #475569 100%);
}

.fun-rover-buddy[data-style="orb"] {
    --rover-glow: rgba(56, 189, 248, 0.55);
}

.fun-rover-buddy[data-style="orb"] .rover-visor {
    width: 20px;
    height: 12px;
    left: 22px;
    top: 12px;
}

.fun-rover-buddy[data-style="orb"] .rover-wheel,
.fun-rover-buddy[data-style="orb"] .rover-antenna {
    display: none;
}

.fun-rover-buddy[data-style="hopper"] .rover-body {
    width: 52px;
    height: 24px;
    top: 8px;
    border-radius: 10px;
    background: linear-gradient(135deg, #fde68a, #f97316 70%, #ea580c);
    border: 1px solid rgba(234, 88, 12, 0.5);
}

.fun-rover-buddy[data-style="hopper"] .rover-wheel {
    width: 14px;
    height: 14px;
    border: 3px solid #1e293b;
    background: #f97316;
}

.fun-rover-buddy[data-style="hopper"] .rover-visor {
    background: linear-gradient(135deg, #1e293b, #0f172a);
    box-shadow: inset 0 0 6px rgba(251, 191, 36, 0.7);
}

.fun-rover-buddy[data-style="skimmer"] {
    --rover-glow: rgba(34, 211, 238, 0.5);
}

.fun-rover-buddy[data-style="skimmer"] .rover-body {
    width: 58px;
    height: 14px;
    top: 12px;
    border-radius: 12px;
    background: linear-gradient(135deg, #cffafe, #38bdf8 65%, #0ea5e9);
    border: 1px solid rgba(14, 165, 233, 0.5);
}

.fun-rover-buddy[data-style="skimmer"] .rover-wheel,
.fun-rover-buddy[data-style="skimmer"] .rover-antenna {
    display: none;
}

.fun-rover-buddy[data-style="skimmer"] .rover-fin {
    display: block;
}

.fun-rover-buddy[data-style="drone"] .rover-body {
    width: 54px;
    height: 16px;
    top: 10px;
    border-radius: 10px;
    background: linear-gradient(135deg, #c7d2fe, #818cf8);
}

.fun-rover-buddy[data-style="drone"] {
    --rover-glow: rgba(129, 140, 248, 0.55);
}

.fun-rover-buddy[data-style="drone"] .rover-wheel {
    width: 14px;
    height: 6px;
    border-radius: 999px;
    background: #1e1b4b;
    border: none;
}

.fun-rover-buddy[data-style="drone"] .rover-antenna {
    display: none;
}

.fun-rover-buddy[data-style="drone"] .rover-fin {
    display: block;
    right: 10px;
    top: 4px;
}

.fun-rover-buddy[data-style="drone"] .rover-visor {
    left: 20px;
    top: 12px;
    width: 14px;
}

.fun-rover-buddy[data-motion="float"] .rover-glow,
.fun-rover-buddy[data-motion="glide"] .rover-glow {
    opacity: 0.75;
    filter: blur(14px);
}

/* Headlight / searchlight beam for drone & skimmer */
.fun-rover-buddy .rover-headlight {
    display: none;
}

.fun-rover-buddy[data-style="drone"] .rover-headlight,
.fun-rover-buddy[data-style="skimmer"] .rover-headlight {
    display: block;
    position: absolute;
    left: 50%;
    top: 100%;
    width: 80px;
    height: 120px;
    transform-origin: 50% 0%;
    background: linear-gradient(
        180deg,
        rgba(56, 189, 248, 0.35) 0%,
        rgba(56, 189, 248, 0.12) 40%,
        transparent 100%
    );
    clip-path: polygon(35% 0%, 65% 0%, 100% 100%, 0% 100%);
    filter: blur(4px);
    opacity: 0.9;
    animation: headlightSweep 4s ease-in-out infinite alternate;
    z-index: -1;
    pointer-events: none;
}

.fun-rover-buddy[data-style="skimmer"] .rover-headlight {
    width: 90px;
    height: 100px;
    animation-duration: 5s;
}

@keyframes headlightSweep {
    0% {
        transform: translateX(-50%) rotate(-12deg);
        opacity: 0.6;
    }
    50% {
        transform: translateX(-50%) rotate(10deg);
        opacity: 1;
    }
    100% {
        transform: translateX(-50%) rotate(-8deg);
        opacity: 0.7;
    }
}

@keyframes roverSpin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes roverGlowPulse {
    0%, 100% {
        opacity: 0.45;
        transform: scale(0.95);
    }
    50% {
        opacity: 0.85;
        transform: scale(1.05);
    }
}

@keyframes roverFinFlicker {
    0%, 100% {
        transform: translateY(0) rotate(-12deg);
        opacity: 0.7;
    }
    50% {
        transform: translateY(-2px) rotate(-6deg);
        opacity: 1;
    }
}

@media (prefers-reduced-motion: reduce) {
    body.fun-mode .fun-filter-focus,
    body.fun-mode .skill-constellation,
    body.fun-mode .analyst-spark span,
    .fun-rover-buddy .rover-wheel,
    .fun-rover-buddy .rover-glow,
    .fun-rover-buddy .rover-fin,
    .fun-rover-buddy .rover-headlight {
        animation: none;
    }

    .project-card:hover,
    .project-list-card:hover,
    .skill-card:hover,
    .experience-card:hover,
    .analyst-insight-card:hover {
        animation: none;
    }

    body.fun-mode .fun-view-link .view-link-text,
    body.fun-mode .fun-view-link .view-link-text::after {
        transition: none;
    }
}

/* ===== TECHY PANEL DESIGN FOR EXPERIENCE LOG ===== */
.experience-log {
    margin-top: 0;
    padding: 0;
    border-radius: 0.5rem;
    border: 1px solid rgba(129, 140, 248, 0.2);
    background: linear-gradient(145deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
    font-size: 0.7rem;
    color: #94a3b8;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transform: translateY(8px) scale(0.98);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.experience-log::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #818cf8, #22d3ee);
    opacity: 0.7;
}

body.fun-mode.fun-logs-on .experience-log {
    margin-top: 1rem;
}

body.fun-mode.fun-logs-on .experience-card:hover .experience-log {
    opacity: 1;
    max-height: 80px;
    padding: 0.65rem 0.85rem;
    transform: translateY(0) scale(1);
}

.log-label {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.6rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: #64748b;
    margin-right: 0.5rem;
}

.log-label::before {
    content: "";
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: #22c55e;
    box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
    animation: logPulse 2s ease-in-out infinite;
}

@keyframes logPulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

.log-line {
    color: #94a3b8;
    font-size: 0.68rem;
}

/* Light theme overrides for experience log */
html:not([data-theme="dark"]) body.fun-mode .experience-log {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(241, 245, 249, 0.95));
    border-color: rgba(99, 102, 241, 0.2);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
}

html:not([data-theme="dark"]) body.fun-mode .log-label {
    color: #64748b;
}

html:not([data-theme="dark"]) body.fun-mode .log-line {
    color: #475569;
}

.terminal-header {
    display: none;
    align-items: center;
    justify-content: space-between;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: #94a3b8;
    margin-bottom: 1rem;
}

body.fun-mode .terminal-header {
    display: flex;
}

body.fun-mode .contact-form {
    background: #0f172a;
    border: 1px solid rgba(99, 102, 241, 0.35);
    box-shadow: 0 18px 35px rgba(15, 23, 42, 0.35);
}

body.fun-mode .contact-label {
    color: #c7d2fe;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
}

body.fun-mode .contact-input {
    background: #111827;
    border-color: rgba(99, 102, 241, 0.4);
    color: #e2e8f0;
}

body.fun-mode .contact-input:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.35);
}

body.fun-mode .contact-submit {
    background: linear-gradient(135deg, #4338ca, #7c3aed);
}

.contact-email-block {
    display: grid;
    gap: 0.2rem;
    margin-top: 0.25rem;
}

.contact-email-line {
    display: grid;
    grid-template-columns: 5.2rem 1fr;
    align-items: center;
    gap: 0;
}

.contact-email-label {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: #64748b;
}

.contact-email-wrapper {
    position: relative;
}

.contact-email-text {
    font-weight: 600;
    color: #4338ca;
    word-break: break-word;
    background: none;
    border: none;
    padding: 0.15rem 0.35rem;
    margin: 0;
    border-radius: 0.35rem;
    cursor: pointer;
    font-family: inherit;
    font-size: 1.05rem;
    text-align: left;
    transition: background 0.2s, color 0.2s;
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
}

.contact-email-text:hover {
    background: rgba(99, 102, 241, 0.1);
    color: #4f46e5;
    text-decoration-color: currentColor;
}

.contact-email-line--secondary .contact-email-text {
    font-weight: 500;
    color: #6366f1;
}

.contact-email-line--secondary .contact-email-text:hover {
    color: #4f46e5;
}

.contact-email-dropdown {
    position: absolute;
    left: 0;
    top: calc(100% + 0.35rem);
    display: flex;
    gap: 0.15rem;
    padding: 0.45rem;
    background: #ffffff;
    border: 1px solid rgba(148, 163, 184, 0.3);
    border-radius: 0.65rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.06);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-4px);
    transition: opacity 0.2s, visibility 0.2s, transform 0.2s;
    z-index: 50;
    white-space: nowrap;
}

.contact-email-wrapper:hover .contact-email-dropdown,
.contact-email-wrapper:focus-within .contact-email-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.contact-email-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3rem;
    padding: 0.5rem 0.7rem;
    border-radius: 0.5rem;
    text-decoration: none;
    color: #475569;
    font-size: 0.7rem;
    font-weight: 500;
    transition: background 0.15s, color 0.15s;
}

.contact-email-option:hover {
    background: rgba(99, 102, 241, 0.1);
    color: #4338ca;
}

.contact-email-option img,
.contact-email-option svg {
    width: 22px;
    height: 22px;
    flex-shrink: 0;
}

[data-theme="dark"] .contact-email-label {
    color: #94a3b8;
}

[data-theme="dark"] .contact-email-text {
    color: #a5b4fc;
}

[data-theme="dark"] .contact-email-text:hover {
    background: rgba(129, 140, 248, 0.15);
    color: #c7d2fe;
}

[data-theme="dark"] .contact-email-line--secondary .contact-email-text {
    color: #818cf8;
}

[data-theme="dark"] .contact-email-line--secondary .contact-email-text:hover {
    color: #c7d2fe;
}

[data-theme="dark"] .contact-email-dropdown {
    background: #1e293b;
    border-color: rgba(148, 163, 184, 0.15);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 2px 6px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .contact-email-option {
    color: #94a3b8;
}

[data-theme="dark"] .contact-email-option:hover {
    background: rgba(129, 140, 248, 0.15);
    color: #c7d2fe;
}

.contact-location-wrapper {
    position: relative;
    display: inline-block;
}

.contact-location-text {
    font-weight: 600;
    color: #4338ca;
    background: none;
    border: none;
    padding: 0.15rem 0.35rem;
    margin: 0;
    border-radius: 0.35rem;
    cursor: pointer;
    font-family: inherit;
    font-size: 1.05rem;
    text-align: left;
    transition: background 0.2s, color 0.2s;
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
}

.contact-location-text:hover {
    background: rgba(99, 102, 241, 0.1);
    color: #4f46e5;
    text-decoration-color: currentColor;
}

.contact-location-wrapper:hover .contact-location-dropdown,
.contact-location-wrapper:focus-within .contact-location-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

[data-theme="dark"] .contact-location-text {
    color: #a5b4fc;
}

[data-theme="dark"] .contact-location-text:hover {
    background: rgba(129, 140, 248, 0.15);
    color: #c7d2fe;
}

.footer-contact-line {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.footer-dot {
    color: #64748b;
    user-select: none;
}

.footer-inline-wrapper {
    display: inline-block;
}

.footer-inline-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    font-size: 0.875rem;
    color: #94a3b8 !important;
    text-decoration-color: transparent !important;
}

.footer-inline-btn:hover {
    color: #c7d2fe !important;
    text-decoration-color: currentColor !important;
    background: rgba(129, 140, 248, 0.12);
}

.footer-inline-btn svg {
    width: 14px;
    height: 14px;
}

.footer-dropdown {
    bottom: calc(100% + 0.35rem);
    top: auto;
}

body.fun-mode:not([data-theme="dark"]) .contact-form {
    background: rgba(15, 23, 42, 0.82);
    border-color: rgba(99, 102, 241, 0.45);
}

.skill-spark {
    display: flex;
    gap: 0.35rem;
    margin-top: auto; /* Push to bottom of card */
    padding-top: 1rem;
    height: 0;
    opacity: 0;
    overflow: hidden;
    transition: height 0.35s ease, opacity 0.35s ease;
}

body.fun-mode .skill-spark {
    height: 38px;
    opacity: 0.9;
}

/* Ensure skill cards have flex column layout to push spark to bottom */
.skill-card {
    display: flex;
    flex-direction: column;
    padding-bottom: 2.25rem;
}

.skill-card > *:not(.skill-spark) {
    flex-shrink: 0;
}

.skill-card > .flex.flex-wrap {
    margin-bottom: 0.9rem;
}

.skill-card .skill-spark {
    flex-shrink: 0;
}

.skill-spark span {
    flex: 1;
    height: var(--spark-height);
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.9), rgba(236, 72, 153, 0.8));
    border-radius: 999px;
    transform-origin: bottom;
    animation: skillSparkPulse 2.6s ease-in-out infinite;
    animation-delay: var(--spark-delay);
}

/* Light fun-mode: higher contrast skill-spark gradient */
html:not([data-theme="dark"]) body.fun-mode .skill-spark span {
    background: linear-gradient(180deg, rgba(79, 70, 229, 0.95), rgba(219, 39, 119, 0.9));
    box-shadow: 0 0 8px rgba(79, 70, 229, 0.4);
}

.footer-ticker {
    display: none;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1.5rem;
    padding: 0.45rem 0.9rem;
    font-size: 0.55rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: #4ade80;
    font-family: "JetBrains Mono", "Fira Code", "Courier New", monospace;
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(74, 222, 128, 0.25);
    border-radius: 4px;
    position: relative;
    overflow: hidden;
    text-shadow: 0 0 6px rgba(74, 222, 128, 0.5);
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.4), 0 0 8px rgba(74, 222, 128, 0.08);
    white-space: nowrap;
    max-width: 100%;
}

.footer-ticker::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.15) 2px,
        rgba(0, 0, 0, 0.15) 4px
    );
    pointer-events: none;
    z-index: 1;
}

.footer-ticker::after {
    content: none;
}

@keyframes tickerBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

body.fun-mode .footer-ticker {
    display: inline-flex;
}

.footer-ticker-label {
    padding: 0.15rem 0.45rem;
    border-radius: 2px;
    border: 1px solid rgba(74, 222, 128, 0.35);
    background: rgba(74, 222, 128, 0.1);
    color: #4ade80;
    font-size: 0.55rem;
    font-weight: 700;
    letter-spacing: 0.18em;
    text-shadow: 0 0 4px rgba(74, 222, 128, 0.4);
    flex-shrink: 0;
}

.footer-ticker-text {
    position: relative;
    z-index: 2;
    flex: 1;
    text-align: center;
    min-width: 0;
}

.footer-ticker-text::after {
    content: "▋";
    animation: tickerBlink 1s step-end infinite;
    color: #4ade80;
    margin-left: 1px;
    font-size: 0.65rem;
    vertical-align: baseline;
}

.fun-message.is-fading {
    opacity: 0;
}

@keyframes skillSparkPulse {
    0%, 100% {
        transform: scaleY(0.6);
        opacity: 0.5;
    }
    50% {
        transform: scaleY(1);
        opacity: 1;
    }
}

@keyframes heroGlowOrbit {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@media (prefers-reduced-motion: reduce) {
    .hero-portrait-glow::before,
    .hero-portrait-glow::after {
        animation: none;
    }
}

.skill-card {
    position: relative;
    overflow: hidden;
}

.skill-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Enhanced Skill Card Animation */
.skill-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transform: skewX(-25deg);
    transition: left 0.5s;
    pointer-events: none;
}

.skill-card:hover::before {
    left: 150%;
    transition: left 0.7s ease-in-out;
}

body.fun-mode .skill-card::before {
    background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.3), transparent);
}

/* Light + fun mode: white sweep like simple light mode */
html:not([data-theme="dark"]) body.fun-mode .skill-card::before {
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
}

.timeline-item:not(:last-child)::after {
    content: '';
    position: absolute;
    left: 7px;
    top: 24px;
    height: calc(100% - 24px);
    width: 2px;
    background: #e2e8f0;
}


/* ===== CARD COMPONENTS ===== */
.card {
    max-width: 620px;
    margin: 0 auto;
    padding: 16px;
    border: 1px solid lightgray;
    border-radius: 16px;
}

.card p:last-child {
	margin-bottom: 0;
}

/* ===== PUBLISHED STICKER ===== */

/* Unified published sticker — flag/banner flush with card right edge */
.published-sticker {
    position: absolute;
    top: 0.85rem;
    right: 0;
    z-index: 10;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.9rem 0.5rem 0.75rem;
    background: linear-gradient(135deg, #059669 0%, #10b981 60%, #34d399 100%);
    color: #fff;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.09em;
    line-height: 1;
    white-space: nowrap;
    border-radius: 4px 0 0 4px;
    box-shadow:
        0 4px 14px rgba(5, 150, 105, 0.5),
        -2px 2px 6px rgba(0, 0, 0, 0.12);
    pointer-events: none;
    transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
                box-shadow 0.35s ease,
                filter 0.35s ease;
}

.published-sticker::before {
    content: "";
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
    flex-shrink: 0;
    animation: sticker-pulse 2.4s ease-in-out infinite;
}

@keyframes sticker-pulse {
    0%, 100% { box-shadow: 0 0 4px rgba(255, 255, 255, 0.5); }
    50% { box-shadow: 0 0 10px rgba(255, 255, 255, 0.95); }
}

.published-sticker::after {
    content: "";
    position: absolute;
    right: 0;
    bottom: -6px;
    width: 0;
    height: 0;
    border-top: 6px solid #047857;
    border-left: 6px solid transparent;
}

/* Hover animation — sticker slides out and glows */
.project-card:hover .published-sticker,
.project-list-card:hover .published-sticker {
    transform: translateX(0.85rem);
    box-shadow:
        0 6px 22px rgba(5, 150, 105, 0.65),
        -3px 3px 12px rgba(0, 0, 0, 0.2),
        0 0 24px rgba(52, 211, 153, 0.4);
    filter: brightness(1.15);
}

[data-theme="dark"] .published-sticker {
    background: linear-gradient(135deg, #047857 0%, #059669 60%, #10b981 100%);
    box-shadow:
        0 4px 16px rgba(16, 185, 129, 0.55),
        -2px 2px 8px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .published-sticker::after {
    border-top-color: #065f46;
}

[data-theme="dark"] .project-card:hover .published-sticker,
[data-theme="dark"] .project-list-card:hover .published-sticker {
    box-shadow:
        0 6px 26px rgba(16, 185, 129, 0.7),
        -3px 3px 14px rgba(0, 0, 0, 0.3),
        0 0 28px rgba(52, 211, 153, 0.45);
}

/* Remove fixed/min-height from card container */
.bg-white.rounded-xl.overflow-hidden.shadow-md {
    min-height: unset;
}

/* Show 3 lines and fade out bottom with gradient for card body */
.card-body {
    position: relative;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    max-height: 4.5em;
    line-height: 1.5em;
    transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), padding 0.4s cubic-bezier(0.4,0,0.2,1);
    margin-bottom: 0.1em;
}

.card-body::after {
    content: "...";
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 1.5em;
    display: none;
    align-items: flex-end;
    justify-content: flex-end;
    padding-right: 0.25rem;
    padding-bottom: 0.05rem;
    font-weight: 600;
    font-size: 0.85em;
    color: var(--text-tertiary);
    pointer-events: none;
    background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 70%);
}

.card-body.has-overflow::after {
    display: flex;
}

.card-body.expanded {
    display: block;
    -webkit-line-clamp: unset;
    line-clamp: unset;
    overflow: visible;
    max-height: 1000px;
    padding-bottom: 1em;
}

.card-body.expanded::after {
    display: none;
}

/* Utility classes for card content */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.more-link {
    margin-top: 0.45rem;
    margin-bottom: 0.35rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 2;
    pointer-events: auto;
    touch-action: manipulation;
    gap: 0.3rem;
    background: linear-gradient(120deg, rgba(99, 102, 241, 0.12), rgba(56, 189, 248, 0.12));
    border: 1px solid rgba(79, 70, 229, 0.35);
    padding: 0.25rem 0.55rem 0.25rem 0.5rem;
    border-radius: 999px;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: #4f46e5;
    line-height: 1;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}

.more-link .more-link-text {
    display: inline-flex;
    align-items: center;
}

.more-link .more-link-icon {
    width: 0.65rem;
    height: 0.65rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid currentColor;
    border-radius: 999px;
    position: relative;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.more-link .more-link-icon::after {
    content: "";
    width: 0.3rem;
    height: 0.3rem;
    border-right: 1.5px solid currentColor;
    border-bottom: 1.5px solid currentColor;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-45%, -55%) rotate(45deg);
}

.more-link:hover {
    background: linear-gradient(120deg, rgba(99, 102, 241, 0.2), rgba(56, 189, 248, 0.18));
    border-color: rgba(79, 70, 229, 0.55);
    color: #4338ca;
    transform: translateY(-1px);
    box-shadow: 0 6px 14px rgba(79, 70, 229, 0.18);
}

.more-link:focus-visible {
    outline: 2px solid rgba(79, 70, 229, 0.5);
    outline-offset: 2px;
}

.more-link.is-expanded {
    background: linear-gradient(120deg, rgba(16, 185, 129, 0.18), rgba(56, 189, 248, 0.12));
    border-color: rgba(16, 185, 129, 0.4);
}

.more-link.is-expanded .more-link-icon {
    transform: rotate(180deg);
    box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.25);
}

[data-theme="dark"] .more-link {
    background: linear-gradient(120deg, rgba(79, 70, 229, 0.2), rgba(14, 165, 233, 0.12));
    border-color: rgba(129, 140, 248, 0.45);
    color: #c7d2fe;
}

[data-theme="dark"] .more-link:hover {
    background: linear-gradient(120deg, rgba(79, 70, 229, 0.35), rgba(14, 165, 233, 0.2));
    border-color: rgba(165, 180, 252, 0.75);
    color: #f8fafc;
    box-shadow: 0 8px 18px rgba(99, 102, 241, 0.25);
}

[data-theme="dark"] .more-link.is-expanded {
    background: linear-gradient(120deg, rgba(16, 185, 129, 0.22), rgba(79, 70, 229, 0.25));
    border-color: rgba(16, 185, 129, 0.5);
}

.view-link {
    margin-top: 0;
    margin-bottom: 0em;
    display: inline-block;
    position: relative;
    z-index: 2;
    pointer-events: auto;
    touch-action: manipulation;
}

.project-card time,
.project-list-card time {
    display: inline-flex;
    align-items: center;
}

/* ===== EXPERIENCE SECTION ===== */
.experience-item {
    position: relative;
}

.experience-card {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    box-shadow: 0 16px 36px rgba(15, 23, 42, 0.14);
    --flip-x: 0px;
    --flip-y: 0px;
    transition: all 0.3s ease;
}

.experience-card:hover {
    outline: 3px solid rgba(99, 102, 241, 0.6);
    box-shadow: 0 0 24px rgba(99, 102, 241, 0.25), 0 20px 30px -5px rgba(0, 0, 0, 0.15);
    animation: cardBreath 2.4s ease-in-out infinite;
    transform: translate3d(var(--flip-x), var(--flip-y), 0) translateY(-4px) perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.01);
}

.experience-card::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 48%;
    background-image: var(--experience-image);
    background-size: cover;
    background-position: center;
    opacity: 0.32;
    filter: saturate(1.1) contrast(1.05);
    z-index: 0;
}

.experience-card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, rgba(248, 250, 252, 0.99) 0%, rgba(248, 250, 252, 0.95) 55%, rgba(248, 250, 252, 0.68) 72%, rgba(248, 250, 252, 0.08) 100%);
    z-index: 1;
}

.experience-inset {
    position: absolute;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    width: 250px;
    height: 175px;
    border-radius: 18px;
    background-image: var(--experience-inset-image);
    background-size: cover;
    background-position: center;
    border: 2px solid rgba(255, 255, 255, 0.85);
    box-shadow: 0 16px 30px rgba(15, 23, 42, 0.2);
    z-index: 2;
    overflow: hidden;
}

.experience-inset::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.05) 0%, rgba(15, 23, 42, 0.35) 100%);
}

.experience-card-content {
    position: relative;
    z-index: 2;
    padding: 1.75rem 2rem;
    max-width: 58%;
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
}

.experience-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #0f172a;
    margin-bottom: 0.1rem;
}

.experience-meta {
    color: #4f46e5;
    font-weight: 600;
    margin-bottom: 0.35rem;
}

.experience-summary {
    color: #475569;
    margin-bottom: 0.35rem;
}

.experience-summary-title,
.experience-bullet-title {
    font-weight: 600;
    color: #1f2937;
}

.experience-bullet-title {
    margin: 0.35rem 0 0.5rem;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
}

.experience-list {
    margin: 0;
    padding-left: 0;
    display: grid;
    gap: 0.7rem;
    color: #475569;
    list-style: none;
}

.experience-list li {
    list-style: none;
    display: block;
    position: relative;
    padding-left: 1.5rem;
    line-height: 1.55;
}

.experience-list .experience-list-item-extra {
    display: none;
}

.experience-list.expanded .experience-list-item-extra {
    display: block;
}

.experience-more-link {
    margin-top: 0.55rem;
}

.experience-list li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.55rem;
    width: 0.45rem;
    height: 0.45rem;
    border-radius: 999px;
    background: #4f46e5;
    box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.12);
}

/* ===== ANALYST INSIGHTS ===== */
.analyst-insight-card {
    position: relative;
    background: #ffffff;
    border-radius: 1rem;
    padding: 1.5rem 1.75rem;
    border: 1px solid #e2e8f0;
    box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
}

.analyst-insight-card:hover,
.skill-card:hover {
    outline: 3px solid rgba(99, 102, 241, 0.6);
    box-shadow: 0 0 24px rgba(99, 102, 241, 0.25), 0 16px 30px -5px rgba(0, 0, 0, 0.12);
    animation: cardBreath 2.4s ease-in-out infinite;
    transform: translateY(-2px);
}

.analyst-insight-card:hover {
    transform: translateY(-2px) perspective(1000px) rotateX(1.5deg) rotateY(1.5deg);
}

.analyst-insight-card::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at top right, rgba(99, 102, 241, 0.2), transparent 65%);
    pointer-events: none;
}

.analyst-metric {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
    margin-bottom: 0.75rem;
    position: relative;
    z-index: 1;
}

.analyst-metric-value {
    font-size: 2rem;
    font-weight: 700;
    color: #4338ca;
}

.analyst-metric-label {
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: #64748b;
    font-weight: 600;
}

.analyst-metric-note {
    color: #475569;
    margin-bottom: 1rem;
    position: relative;
    z-index: 1;
}

.analyst-spark {
    display: flex;
    gap: 0.45rem;
    align-items: flex-end;
    height: 48px;
    position: relative;
    z-index: 1;
}

.analyst-spark span {
    flex: 1;
    height: var(--bar);
    background: linear-gradient(180deg, #6366f1 0%, #a5b4fc 100%);
    border-radius: 999px;
    opacity: 0.85;
}

/* ===== SCRIPTS LIBRARY ===== */
.scripts-library-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1rem;
}

.scripts-library-controls {
    display: grid;
    gap: 0.7rem;
    justify-items: center;
}

.scripts-library-filters {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.45rem;
}

.scripts-library-filter-btn {
    border: 1px solid rgba(99, 102, 241, 0.24);
    background: rgba(99, 102, 241, 0.07);
    color: #4338ca;
    border-radius: 999px;
    padding: 0.32rem 0.78rem;
    font-size: 0.7rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-weight: 700;
    transition: all 0.2s ease;
}

.scripts-library-filter-btn:hover {
    background: rgba(99, 102, 241, 0.16);
    border-color: rgba(99, 102, 241, 0.36);
}

.scripts-library-filter-btn.is-active {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    color: #ffffff;
    border-color: transparent;
    box-shadow: 0 8px 20px rgba(79, 70, 229, 0.28);
}

.scripts-library-count {
    margin: 0;
    font-size: 0.73rem;
    letter-spacing: 0.07em;
    text-transform: uppercase;
    color: #64748b;
    font-weight: 600;
}

.scripts-library-loading {
    grid-column: 1 / -1;
    text-align: center;
    padding: 1rem;
    border-radius: 0.9rem;
    border: 1px dashed rgba(99, 102, 241, 0.35);
    background: rgba(99, 102, 241, 0.06);
    color: #475569;
}

.script-library-card {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 1rem;
    padding: 1.2rem;
    display: grid;
    gap: 0.7rem;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08);
    transition: transform 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
}

.script-library-card:hover {
    transform: translateY(-3px);
    border-color: rgba(99, 102, 241, 0.38);
    box-shadow: 0 16px 32px rgba(79, 70, 229, 0.16);
}

.script-library-card-header {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.8rem;
    align-items: start;
}

.script-library-icon {
    width: 32px;
    height: 32px;
    border-radius: 0.65rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #4338ca;
    background: rgba(99, 102, 241, 0.12);
    border: 1px solid rgba(99, 102, 241, 0.2);
}

.script-library-icon svg {
    width: 16px;
    height: 16px;
}

.script-library-card h3 {
    font-size: 1rem;
    font-weight: 700;
    margin: 0;
    color: #1f2937;
}

.script-library-summary {
    margin: 0.25rem 0 0;
    color: #64748b;
    font-size: 0.86rem;
    line-height: 1.45;
}

.script-library-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
}

.script-library-stack-item {
    padding: 0.2rem 0.55rem;
    border-radius: 999px;
    background: #f1f5f9;
    color: #334155;
    font-size: 0.66rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    font-weight: 600;
}

.script-library-path {
    margin: 0;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.7rem;
    color: #4338ca;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 0.45rem;
    padding: 0.25rem 0.45rem;
    display: inline-flex;
    width: fit-content;
}

.script-library-highlights {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 0.35rem;
}

.script-library-highlights li {
    position: relative;
    padding-left: 0.95rem;
    color: #475569;
    font-size: 0.84rem;
    line-height: 1.45;
}

.script-library-highlights li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.45rem;
    width: 0.38rem;
    height: 0.38rem;
    border-radius: 999px;
    background: #6366f1;
}

.script-library-actions {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.45rem;
    margin-top: 0.2rem;
}

.script-library-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    border-radius: 0.55rem;
    padding: 0.35rem 0.55rem;
    font-size: 0.72rem;
    font-weight: 600;
    text-decoration: none;
    transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.script-library-action--repo {
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.28);
    color: #4338ca;
}

.script-library-action--repo:hover {
    background: rgba(99, 102, 241, 0.2);
}

.script-library-action--sample {
    background: rgba(14, 116, 144, 0.1);
    border: 1px solid rgba(14, 116, 144, 0.28);
    color: #0f766e;
}

.script-library-action--sample:hover {
    background: rgba(14, 116, 144, 0.19);
}

/* ===== PROCESS & TESTIMONIALS ===== */
.process-card,
.testimonial-card {
    position: relative;
    background: var(--card-bg);
    border-radius: 1.2rem;
    border: 1px solid var(--border-color);
    box-shadow: 0 16px 32px rgba(15, 23, 42, 0.08);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.process-card {
    padding: 1.6rem 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

.process-card::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at top right, rgba(99, 102, 241, 0.18), transparent 60%);
    pointer-events: none;
}

.process-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(79, 70, 229, 0.12);
    color: #4f46e5;
    margin-bottom: 0.9rem;
    position: relative;
    z-index: 1;
}

.process-icon svg {
    width: 20px;
    height: 20px;
}

.process-card h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.2rem;
    position: relative;
    z-index: 1;
}

.process-card p {
    color: var(--text-secondary);
    margin-bottom: 0.8rem;
    position: relative;
    z-index: 1;
}

.process-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 0.4rem;
    color: var(--text-secondary);
    font-size: 0.85rem;
    position: relative;
    z-index: 1;
}

.process-list li {
    position: relative;
    padding-left: 1.2rem;
}

.process-list li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.45rem;
    width: 0.45rem;
    height: 0.45rem;
    border-radius: 999px;
    background: #4f46e5;
    box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.14);
}

.process-tag {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.75rem;
    border-radius: 999px;
    background: rgba(79, 70, 229, 0.12);
    color: #4338ca;
    font-size: 0.72rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    border: 1px solid rgba(79, 70, 229, 0.2);
}

.testimonial-card {
    padding: 1.8rem 1.8rem 1.6rem;
}

.testimonial-card::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at top right, rgba(99, 102, 241, 0.16), transparent 65%);
    pointer-events: none;
}

.testimonial-quote {
    position: relative;
    z-index: 1;
}

.testimonial-mark {
    font-size: 2.6rem;
    color: #6366f1;
    line-height: 1;
    display: block;
    margin-bottom: 0.5rem;
}

.testimonial-text {
    color: var(--text-secondary);
    font-size: 0.95rem;
    line-height: 1.6;
    font-style: italic;
}

.testimonial-author {
    display: flex;
    align-items: center;
    gap: 0.85rem;
    margin-top: 1.5rem;
    position: relative;
    z-index: 1;
}

.testimonial-avatar {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4f46e5, #0ea5e9);
    color: #ffffff;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
}

.testimonial-name {
    font-weight: 600;
    color: var(--text-primary);
}

.testimonial-role {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-tertiary);
    margin-top: 0.2rem;
}

[data-theme="dark"] .process-card {
    background: #162033;
    border-color: rgba(148, 163, 184, 0.25);
}

[data-theme="dark"] .process-card p,
[data-theme="dark"] .process-list,
[data-theme="dark"] .testimonial-text {
    color: #e2e8f0;
}

[data-theme="dark"] .process-icon {
    background: rgba(129, 140, 248, 0.18);
    color: #c7d2fe;
}

[data-theme="dark"] .process-tag {
    background: rgba(129, 140, 248, 0.18);
    border-color: rgba(129, 140, 248, 0.35);
    color: #e0e7ff;
}

[data-theme="dark"] .testimonial-card {
    background: #141d33;
    border-color: rgba(148, 163, 184, 0.25);
}

[data-theme="dark"] .testimonial-mark {
    color: #a5b4fc;
}

[data-theme="dark"] .testimonial-role {
    color: #cbd5f5;
}

.process-card:hover,
.testimonial-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 24px 45px rgba(15, 23, 42, 0.12);
}

@media (max-width: 640px) {
    .hero-status {
        align-items: flex-start;
    }
}

.p-8.flex.flex-col.flex-1 {
    justify-content: flex-start;
}

.flex.flex-col.items-start > span {
    margin-bottom: 0.2em;
}

h3.text-2xl.font-semibold, h3.text-xl.font-semibold {
    font-size: 1.5rem;
    line-height: 1.5rem;
}

/* ===== NAVIGATION STYLES ===== */
.nav-links {
    gap: 2rem;
}

.nav-primary-track {
    display: flex;
    align-items: center;
    gap: 1.35rem;
}

.nav-primary-track > .nav-link,
.nav-primary-track > .nav-item-projects > .nav-link,
.nav-primary-track > .nav-item-generated {
    margin: 0;
    padding-left: 0;
    padding-right: 0;
}

.nav-item-secondary {
    margin-left: 0.25rem;
}

.secondary-nav-primary {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
}

.nav-secondary-caret {
    transition: transform 0.25s ease;
}

.nav-item-secondary:hover .nav-secondary-caret {
    transform: rotate(180deg);
}

.nav-secondary-link-text {
    display: inline-block;
    transform-origin: center;
}

.nav-secondary-link-text.morphing {
    animation: secondaryMorphPulse 0.18s ease forwards;
}

@keyframes secondaryMorphPulse {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
    100% {
        opacity: 0;
        transform: translateY(4px) scale(0.88);
        filter: blur(4px);
    }
}

@media (max-width: 1150px) {
    .nav-links {
        gap: 1.35rem;
    }

    .nav-primary-track {
        gap: 1rem;
    }

    .nav-link {
        font-size: 0.9rem;
    }

    .nav-brand {
        font-size: 1.1rem;
        letter-spacing: 0.14em;
    }

    .contact-btn {
        padding: 0.4rem 0.95rem;
        font-size: 0.9rem;
    }
}

.nav-link {
    position: relative;
    padding: 0.5rem 0.6rem;
    margin: 0 -0.6rem;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.nav-link::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transform: translateX(-50%);
    transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border-radius: 2px;
}

.nav-link:hover::before {
    width: 100%;
}

.nav-link:hover {
    transform: translateY(-2px);
    color: #667eea !important;
    animation: gentleBounce 0.6s ease-in-out;
}

.nav-link:active {
    transform: translateY(-1px);
}

/* Frozen hover state for active page */
.nav-link.active-page {
    transform: translateY(-2px);
    color: #667eea !important;
}

.nav-link.active-page::before {
    width: 100%;
}

.nav-brand {
    position: relative;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    letter-spacing: 0.18em;
    text-transform: uppercase;
}

body.fun-mode .nav-brand {
    color: #a5b4fc;
}


nav .flex {
    align-items: center;
}

/* ===== ANIMATIONS ===== */
@keyframes gentleBounce {
    0%, 100% { transform: translateY(-2px); }
    50% { transform: translateY(-4px); }
}

@keyframes bounceRightTwicePoke {
    0%   { transform: scale(1) translateX(0); }
    10%  { transform: scale(1.05) translateX(20px); }
    25%  { transform: scale(1.05) translateX(0); }
    40%  { transform: scale(1.05) translateX(14px); }
    55%  { transform: scale(1.05) translateX(0); }
    100% { transform: scale(1.05) translateX(0); }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes cardBreath {
    0%, 100% {
        box-shadow: 0 0 18px rgba(99, 102, 241, 0.22), 0 18px 28px -6px rgba(15, 23, 42, 0.12);
    }
    50% {
        box-shadow: 0 0 30px rgba(99, 102, 241, 0.35), 0 24px 36px -6px rgba(15, 23, 42, 0.18);
    }
}

@keyframes cardBreathFun {
    0%, 100% {
        box-shadow: 0 0 22px rgba(129, 140, 248, 0.35), 0 20px 32px -6px rgba(30, 41, 59, 0.18);
    }
    50% {
        box-shadow: 0 0 36px rgba(129, 140, 248, 0.55), 0 26px 42px -6px rgba(30, 41, 59, 0.26);
    }
}

/* ===== BUTTON STYLES ===== */
.animated-btn {
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.contact-btn {
    position: relative;
    overflow: hidden;
    z-index: 1;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275),
                box-shadow 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275),
                color 0.25s ease,
                border-color 0.3s ease,
                background-color 0.3s ease;
}

/* Non-fun-mode: outline by default, fill on hover/scroll */
body:not(.fun-mode) .contact-btn {
    background-color: transparent !important;
    color: #4f46e5;
    border: 2px solid #4f46e5;
}

body:not(.fun-mode) .contact-btn:hover,
body:not(.fun-mode) .contact-btn.active-contact {
    color: #fff;
}

[data-theme="dark"] body:not(.fun-mode) .contact-btn {
    color: #818cf8;
    border-color: #818cf8;
}

[data-theme="dark"] body:not(.fun-mode) .contact-btn:hover,
[data-theme="dark"] body:not(.fun-mode) .contact-btn.active-contact {
    color: #fff;
}

.contact-btn::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #4338ca, #6366f1);
    transform: translateX(-105%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: -1;
    border-radius: inherit;
}

.contact-btn:hover::before,
.contact-btn.active-contact::before {
    transform: translateX(0);
}

.animated-btn:hover,
.contact-btn:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    color: #fff;
}

.animated-btn:active,
.contact-btn:active {
    transform: translateY(-1px) scale(1.02);
}

[data-theme="dark"] .contact-btn::before {
    background: linear-gradient(135deg, #6366f1, #818cf8);
}

.bounce-right-twice {
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.bounce-right-twice:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    animation: bounceRightTwicePoke 1s ease-in-out;
}

/* ===== BACK TO TOP BUTTON ===== */
.back-to-top {
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    margin-right: 2rem;
}

.back-to-top.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    animation: pulse 0.6s ease-in-out;
}

.back-to-top:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
}

.back-to-top:active {
    transform: translateY(-1px) scale(1.05);
}

/* ===== SECTION STYLES ===== */
.section-title-underline {
    width: 24px;
    height: 5px;
    margin: 0 auto;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    border-radius: 2px;
    transition: width 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.section-title-underline.active {
    width: 80px;
}

.sticky-section-title {
    position: -webkit-sticky;
    position: sticky;
    top: 64px;
    z-index: 40;
    background: white;
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
    margin-bottom: 0;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.07);
    transition: box-shadow 0.3s, background 0.3s;
    will-change: transform;
    overflow: visible; /* Allow dome light to extend below */
}

/* Small in-banner halo - soft dome at the very top (dark mode only) */
[data-theme="dark"] .sticky-section-title::before {
    content: "";
    position: absolute;
    top: 0;
    left: 33%;
    right: 33%;
    height: 80%;
    background: radial-gradient(ellipse 70% 70% at 50% 0%, rgba(165, 180, 252, 0.3) 0%, rgba(129, 140, 248, 0.1) 55%, transparent 82%);
    opacity: 0;
    filter: blur(12px);
    pointer-events: none;
    z-index: 1;
    -webkit-mask-image: linear-gradient(to bottom, black 0%, black 72%, transparent 100%);
    mask-image: linear-gradient(to bottom, black 0%, black 72%, transparent 100%);
    -webkit-clip-path: inset(0 0 30% 0);
    clip-path: inset(0 0 30% 0);
    transition: opacity 0.4s ease;
}

[data-theme="dark"] .sticky-section-title.is-sticky::before {
    opacity: 1;
}

/* Dome Diffused Light Effect - shines down from under the banner onto content below (dark mode only) */
[data-theme="dark"] .sticky-section-title::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 95%;
    height: 500px;
    background: radial-gradient(ellipse 85% 60% at 50% 0%, rgba(165, 180, 252, 0.65) 0%, rgba(129, 140, 248, 0.35) 30%, rgba(99, 102, 241, 0.15) 55%, transparent 75%);
    filter: blur(35px);
    opacity: 0;
    pointer-events: none;
    z-index: -1;
    transition: opacity 0.5s ease;
    mix-blend-mode: screen;
}

[data-theme="dark"] .sticky-section-title.is-sticky::after {
    opacity: 1;
}

/* Light mode: ensure dome lights are hidden */
html:not([data-theme="dark"]) .sticky-section-title::before,
html:not([data-theme="dark"]) .sticky-section-title::after {
    display: none !important;
}

.sticky-section-title > * {
    position: relative;
    z-index: 3;
}

[data-theme="dark"] body.fun-mode .sticky-section-title,
[data-theme="dark"] body.fun-mode .section-title-container {
    background: linear-gradient(180deg, rgba(15, 23, 42, 0.55), rgba(15, 23, 42, 0.88)) !important;
    border: 1px solid rgba(148, 163, 184, 0.22);
    box-shadow: 0 12px 24px rgba(15, 23, 42, 0.5);
    backdrop-filter: blur(14px);
}

/* All modes: Section title banner shadow straight down only */
.sticky-section-title {
    box-shadow: 0 8px 16px rgba(102, 126, 234, 0.1);
}

[data-theme="dark"] .sticky-section-title {
    box-shadow: 0 8px 16px rgba(15, 23, 42, 0.4);
}

[data-theme="dark"] body.fun-mode .contact-form,
[data-theme="dark"] body.fun-mode .skill-card,
[data-theme="dark"] body.fun-mode .experience-card,
[data-theme="dark"] body.fun-mode .project-card,
[data-theme="dark"] body.fun-mode .project-list-card,
[data-theme="dark"] body.fun-mode #projectsList > div {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.75), rgba(30, 41, 59, 0.45)) !important;
    border: 1px solid rgba(148, 163, 184, 0.18) !important;
    box-shadow: 0 24px 40px rgba(15, 23, 42, 0.45);
    backdrop-filter: blur(16px);
}

[data-theme="dark"] body.fun-mode #projects .carousel-container {
    background: rgba(15, 23, 42, 0.32);
    border-radius: 1.5rem;
    padding: 1rem;
    box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.1);
}

[data-theme="dark"] body.fun-mode #projectsList {
    background: rgba(15, 23, 42, 0.25);
    border-radius: 1.5rem;
    padding: 2rem;
    box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.08);
}

[data-theme="dark"] body.fun-mode #projects.fun-galaxy-section {
    background: linear-gradient(160deg, rgba(6, 10, 24, 0.82), rgba(15, 23, 42, 0.9)) !important;
}

[data-theme="dark"] .featured-projects {
    background: linear-gradient(160deg, #0b1124 0%, #0f172a 55%, #111827 100%) !important;
}

/* ===== MOBILE MENU BASE STYLES ===== */
.mobile-menu {
    opacity: 0;
    visibility: hidden;
    transform: scale(0.95);
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    pointer-events: auto;
    z-index: 60;
}

.peer:checked ~ .mobile-menu {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
    pointer-events: auto;
}

#menu-toggle + label { position: relative; z-index: 40; }
#menu-toggle:checked ~ #mobile-menu { z-index: 60; }

/* No JS fallback needed when using pure CSS */

.hamburger-icon {
    width: 2rem;
    height: 2rem;
    justify-content: center;
    align-items: center;
}

.hamburger-icon span {
    transition: all 0.3s;
}

#menu-toggle:checked + label .hamburger-icon span:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
}

#menu-toggle:checked + label .hamburger-icon span:nth-child(2) {
    opacity: 0;
}

#menu-toggle:checked + label .hamburger-icon span:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
}

#mobile-menu-button {
    display: none;
}

/* ===== PROJECTS CAROUSEL - PROPER BODY ALIGNMENT ===== */

/* Carousel container - ensure proper boundaries */
.carousel-container {
    position: relative;
    width: 100%;
    overflow: visible;
    padding: 1rem;
    margin: 0;
    box-sizing: border-box;
}

/* Ensure carousel track has proper boundaries */
#projectsCarousel {
    display: flex;
    gap: 1.25rem;
    overflow-x: auto;
    overflow-y: visible;
    scroll-behavior: smooth;
    scroll-snap-type: x proximity;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: 0.75rem 0.5rem 0.5rem;
    scroll-padding-inline: 0.5rem;
    min-height: 0;
    align-items: stretch;
    position: relative;
    margin: 0;
    box-sizing: border-box;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-x pan-y;
    will-change: scroll-position;
}

@media (max-width: 1024px) {
    .carousel-container {
        padding: 1rem;
    }
    
    /* Ensure the carousel breaks out slightly to use more width */
    #projectsCarousel {
        padding: 0.5rem;
        scroll-padding-inline: 0.5rem;
    }
}

/* ===== FUN MODE BUTTONS ===== */

/* 1. Carousel Navigation Buttons */
body.fun-mode .carousel-nav {
    background: rgba(15, 23, 42, 0.7);
    border: 1px solid rgba(99, 102, 241, 0.5);
    color: #a5b4fc;
    backdrop-filter: blur(8px);
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    border-radius: 12px; /* Squircle */
    overflow: hidden; /* For internal shine/ripple if needed */
}

/* Light Mode Override for Carousel Nav - Initial State */
html:not([data-theme="dark"]) body.fun-mode .carousel-nav {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(79, 70, 229, 0.3);
    color: #4f46e5;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

body.fun-mode .carousel-nav:hover {
    background: rgba(99, 102, 241, 0.25);
    border-color: #818cf8;
    color: #fff;
    /* Fixed: Preserve centering transform while scaling */
    transform: translateY(-50%) scale(1.15);
    box-shadow: 0 0 25px rgba(99, 102, 241, 0.6);
}

/* Dark Mode Neon Arrows */
body.fun-mode .carousel-nav svg {
    transition: filter 0.3s ease;
}

/* Explicit neon color for dark mode arrows */
[data-theme="dark"] body.fun-mode .carousel-nav svg {
    color: #818cf8; /* Matching project card neon (Indigo-400) */
    filter: drop-shadow(0 0 4px rgba(129, 140, 248, 0.8));
}

body.fun-mode .carousel-nav:hover svg {
    filter: drop-shadow(0 0 5px #fff);
}

html:not([data-theme="dark"]) body.fun-mode .carousel-nav:hover {
    /* Glassier look on hover for light mode */
    background: rgba(255, 255, 255, 0.4);
    color: #4f46e5;
    border-color: rgba(99, 102, 241, 0.4);
    box-shadow: 0 8px 30px rgba(99, 102, 241, 0.15);
    backdrop-filter: blur(8px);
}

html:not([data-theme="dark"]) body.fun-mode .carousel-nav:hover svg {
    filter: none; /* No glow in light mode */
}

/* 2. Navbar Contact Button - Fancy Redesign */
body.fun-mode .contact-btn {
    background: transparent;
    border: 2px solid transparent;
    background-image: linear-gradient(#0f172a, #0f172a), linear-gradient(135deg, #6366f1, #ec4899);
    background-origin: border-box;
    background-clip: padding-box, border-box;
    color: #fff;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    position: relative;
    overflow: hidden;
    z-index: 1;
    font-weight: 600;
    letter-spacing: 0.05em;
    transition: all 0.3s ease;
}

/* Light Mode Contact Button */
html:not([data-theme="dark"]) body.fun-mode .contact-btn {
    background-image: linear-gradient(#ffffff, #ffffff), linear-gradient(135deg, #4f46e5, #d946ef);
    color: #4f46e5;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.2);
}

body.fun-mode .contact-btn:hover,
body.fun-mode .contact-btn.active-contact {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
    background-image: linear-gradient(135deg, #6366f1, #ec4899), linear-gradient(135deg, #6366f1, #ec4899);
    border-color: transparent;
    color: #fff;
}

html:not([data-theme="dark"]) body.fun-mode .contact-btn:hover,
html:not([data-theme="dark"]) body.fun-mode .contact-btn.active-contact {
    background-image: linear-gradient(135deg, #4f46e5, #d946ef), linear-gradient(135deg, #4f46e5, #d946ef);
    color: #fff;
}

body.fun-mode .contact-btn::before {
    display: none; /* Remove old fill effect */
}

/* 3. Hero Buttons */
body.fun-mode .hero-primary-btn {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Light Mode Hero Buttons Redesign */
html:not([data-theme="dark"]) body.fun-mode .hero-primary-btn {
    background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%);
    border: 1px solid transparent;
    color: #fff;
    box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.1), 0 2px 4px -1px rgba(79, 70, 229, 0.06);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    font-weight: 600;
}

html:not([data-theme="dark"]) body.fun-mode .hero-primary-btn:hover {
    background: linear-gradient(135deg, #4338ca 0%, #312e81 100%);
    box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.25), 0 4px 6px -2px rgba(79, 70, 229, 0.15);
    transform: translateY(-2px);
}

/* Dark Fun Mode Hero Primary Button */
[data-theme="dark"] body.fun-mode .hero-primary-btn {
    background: rgba(99, 102, 241, 0.15);
    border: 1px solid rgba(129, 140, 248, 0.4);
    color: #e0e7ff;
    text-shadow: 0 0 10px rgba(129, 140, 248, 0.5);
    backdrop-filter: blur(12px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] body.fun-mode .hero-primary-btn:hover {
    transform: translateY(-2px);
    background: rgba(99, 102, 241, 0.35) !important;
    border-color: rgba(129, 140, 248, 0.8);
    color: #fff !important;
    box-shadow: 0 0 25px rgba(129, 140, 248, 0.4), 0 8px 20px rgba(0, 0, 0, 0.3);
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
}

/* Fix "View Projects Brief" visibility & design in light mode */
html:not([data-theme="dark"]) body.fun-mode .hero-secondary-btn {
    border: 1px solid #cbd5e1;
    color: #334155;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(8px);
    text-shadow: none;
    font-weight: 600;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

html:not([data-theme="dark"]) body.fun-mode .hero-secondary-btn:hover {
    background: #ffffff;
    border-color: #94a3b8;
    color: #0f172a;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transform: translateY(-2px);
}

/* Portfolio Brand Redesign - Clean Modern Type */
body.fun-mode .nav-brand a {
    background: transparent;
    -webkit-background-clip: unset;
    -webkit-text-fill-color: unset;
    background-clip: unset;
    color: #e0e7ff;
    font-family: "JetBrains Mono", monospace;
    font-weight: 800;
    letter-spacing: -0.04em;
    text-transform: none;
    font-size: 1.35rem;
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 2px;
}

/* Vanta background - hidden initially to prevent bright flash on load */
#vanta-bg {
    opacity: 0;
    transition: opacity 0.8s ease;
}

#vanta-bg.vanta-ready {
    opacity: 1;
}

/* All 'o' letters become animated dots in fun mode */
body.fun-mode .brand-o {
    font-size: 0;
    display: inline-block;
    width: 8px;
    height: 8px;
    background: #818cf8;
    border-radius: 50%;
    vertical-align: middle;
    margin: 0 1px;
    box-shadow: 0 0 8px rgba(129, 140, 248, 0.7);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

html:not([data-theme="dark"]) body.fun-mode .brand-o {
    background: #4f46e5;
    box-shadow: 0 0 6px rgba(79, 70, 229, 0.5);
}

/* Remove the standalone ::after dot since o's are now dots */
body.fun-mode .nav-brand a::after {
    content: none;
}

/* Music-bounce keyframes - each dot gets a unique rhythm */
@keyframes dotPulse1 {
    0%, 100% { transform: translateY(0) scale(1); }
    15% { transform: translateY(-5px) scale(1.15); }
    35% { transform: translateY(1px) scale(0.95); }
    55% { transform: translateY(-3px) scale(1.1); }
    75% { transform: translateY(0px) scale(1); }
}
@keyframes dotPulse2 {
    0%, 100% { transform: translateY(0) scale(1); }
    20% { transform: translateY(-3px) scale(1.1); }
    40% { transform: translateY(2px) scale(0.9); }
    60% { transform: translateY(-6px) scale(1.2); }
    80% { transform: translateY(-1px) scale(1.05); }
}
@keyframes dotPulse3 {
    0%, 100% { transform: translateY(0) scale(1); }
    10% { transform: translateY(-2px) scale(1.05); }
    30% { transform: translateY(-7px) scale(1.25); }
    50% { transform: translateY(0px) scale(0.95); }
    70% { transform: translateY(-4px) scale(1.1); }
    90% { transform: translateY(-1px) scale(1); }
}

/* Sequential color gradient cascade on hover */
@keyframes dotColorCascade {
    0%   { background: #818cf8; box-shadow: 0 0 8px rgba(129, 140, 248, 0.7); }
    15%  { background: #a5b4fc; box-shadow: 0 0 12px rgba(165, 180, 252, 0.9); }
    30%  { background: #c4b5fd; box-shadow: 0 0 14px rgba(196, 181, 253, 0.9); }
    45%  { background: #f0abfc; box-shadow: 0 0 14px rgba(240, 171, 252, 0.9); }
    60%  { background: #fb7185; box-shadow: 0 0 12px rgba(251, 113, 133, 0.8); }
    75%  { background: #c4b5fd; box-shadow: 0 0 12px rgba(196, 181, 253, 0.9); }
    100% { background: #818cf8; box-shadow: 0 0 8px rgba(129, 140, 248, 0.7); }
}

body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(1) {
    animation: dotPulse1 0.7s ease-in-out infinite, dotColorCascade 2.4s ease-in-out infinite;
    animation-delay: 0s, 0s;
}
body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(2) {
    animation: dotPulse2 0.55s ease-in-out infinite, dotColorCascade 2.4s ease-in-out infinite;
    animation-delay: 0s, 0.3s;
}
body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(3) {
    animation: dotPulse3 0.65s ease-in-out infinite, dotColorCascade 2.4s ease-in-out infinite;
    animation-delay: 0s, 0.6s;
}

@keyframes dotColorCascadeLight {
    0%   { background: #4f46e5; box-shadow: 0 0 6px rgba(79, 70, 229, 0.5); }
    15%  { background: #6366f1; box-shadow: 0 0 10px rgba(99, 102, 241, 0.8); }
    30%  { background: #8b5cf6; box-shadow: 0 0 12px rgba(139, 92, 246, 0.8); }
    45%  { background: #a855f7; box-shadow: 0 0 12px rgba(168, 85, 247, 0.8); }
    60%  { background: #ec4899; box-shadow: 0 0 10px rgba(236, 72, 153, 0.7); }
    75%  { background: #8b5cf6; box-shadow: 0 0 10px rgba(139, 92, 246, 0.7); }
    100% { background: #4f46e5; box-shadow: 0 0 6px rgba(79, 70, 229, 0.5); }
}

html:not([data-theme="dark"]) body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(1) {
    animation: dotPulse1 0.7s ease-in-out infinite, dotColorCascadeLight 2.4s ease-in-out infinite;
    animation-delay: 0s, 0s;
}
html:not([data-theme="dark"]) body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(2) {
    animation: dotPulse2 0.55s ease-in-out infinite, dotColorCascadeLight 2.4s ease-in-out infinite;
    animation-delay: 0s, 0.3s;
}
html:not([data-theme="dark"]) body.fun-mode .nav-brand a:hover .brand-o:nth-of-type(3) {
    animation: dotPulse3 0.65s ease-in-out infinite, dotColorCascadeLight 2.4s ease-in-out infinite;
    animation-delay: 0s, 0.6s;
}

html:not([data-theme="dark"]) body.fun-mode .nav-brand a {
    color: #1e293b;
}

/* Dark Fun Mode - Secondary Hero Button */
[data-theme="dark"] body.fun-mode .hero-secondary-btn {
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e2e8f0;
    backdrop-filter: blur(8px);
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] body.fun-mode .hero-secondary-btn:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.14) !important;
    border-color: rgba(255, 255, 255, 0.45);
    color: #fff !important;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1), 0 8px 20px rgba(0, 0, 0, 0.25);
    text-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
}

/* Morphing Animation for Nav Text */
.nav-link-text {
    display: inline-block;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}

.nav-link-text.morphing {
    opacity: 0;
    transform: scale(0.8) translateY(4px);
    filter: blur(4px);
}

/* Sibling animation for smoother flow */
.nav-item {
    transition: flex 0.4s ease, padding 0.4s ease;
}

/* Enhanced Dropdown Animation */
#nav-projects-dropdown {
    opacity: 0;
    visibility: hidden;
    transform: translate(-50%, 10px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-origin: top center;
    background: rgba(255, 255, 255, 0.95); /* Default Light Mode */
    backdrop-filter: blur(12px);
    border: 1px solid rgba(99, 102, 241, 0.3);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.05);
    padding-top: 0.5rem; /* Add padding inside */
    margin-top: 1rem; /* Gap handled by bridge */
    z-index: 100; /* Ensure it stays on top */
}

#nav-secondary-dropdown {
    opacity: 0;
    visibility: hidden;
    transform: translate(-50%, 10px) scale(0.95);
    transition: all 0.34s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-origin: top center;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(99, 102, 241, 0.25);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    margin-top: 1rem;
    z-index: 101;
}

#nav-secondary-dropdown::before {
    content: '';
    position: absolute;
    top: -34px;
    left: 0;
    width: 100%;
    height: 34px;
    background: transparent;
    display: block;
}

/* Invisible bridge to prevent dropdown closing on hover gap */
#nav-projects-dropdown::before {
    content: '';
    position: absolute;
    top: -40px; /* Extend upwards significantly to bridge the gap */
    left: 0;
    width: 100%;
    height: 40px; /* Taller bridge */
    background: transparent;
    display: block;
}

/* Dark Mode Dropdown Override */
[data-theme="dark"] #nav-projects-dropdown {
    background: rgba(15, 23, 42, 0.95) !important;
    border-color: rgba(99, 102, 241, 0.4);
}

[data-theme="dark"] #nav-secondary-dropdown {
    background: rgba(15, 23, 42, 0.95) !important;
    border-color: rgba(99, 102, 241, 0.38);
}

/* Dropdown Links - Strict Coloring */
#nav-projects-dropdown a {
    color: #1e293b !important; /* Darker text for light mode visibility */
    font-weight: 600;
    transition: all 0.2s ease;
}

#nav-secondary-dropdown .secondary-dropdown-link {
    color: #1e293b !important;
}

#nav-projects-dropdown a:hover {
    background-color: rgba(99, 102, 241, 0.1) !important;
    color: #4f46e5 !important;
}

#nav-secondary-dropdown .secondary-dropdown-link:hover {
    background-color: rgba(99, 102, 241, 0.1) !important;
    color: #4f46e5 !important;
}

#nav-secondary-dropdown .secondary-dropdown-link.active-page {
    background-color: rgba(99, 102, 241, 0.12) !important;
    color: #4338ca !important;
}

[data-theme="dark"] #nav-projects-dropdown a {
    color: #e2e8f0 !important; /* Light text for dark mode */
}

[data-theme="dark"] #nav-secondary-dropdown .secondary-dropdown-link {
    color: #e2e8f0 !important;
}

[data-theme="dark"] #nav-projects-dropdown a:hover {
    background-color: rgba(99, 102, 241, 0.25) !important;
    color: #ffffff !important;
}

[data-theme="dark"] #nav-secondary-dropdown .secondary-dropdown-link:hover {
    background-color: rgba(99, 102, 241, 0.25) !important;
    color: #ffffff !important;
}

[data-theme="dark"] #nav-secondary-dropdown .secondary-dropdown-link.active-page {
    background-color: rgba(99, 102, 241, 0.3) !important;
    color: #ffffff !important;
}

.nav-item-secondary:hover #nav-secondary-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, 0) scale(1);
}

.mobile-secondary-details {
    border: 1px solid rgba(99, 102, 241, 0.25);
    border-radius: 0.75rem;
    background: rgba(99, 102, 241, 0.04);
    overflow: hidden;
}

.mobile-secondary-summary {
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    color: #475569;
    padding: 0.55rem 0.85rem;
}

.mobile-secondary-summary::-webkit-details-marker {
    display: none;
}

.mobile-secondary-details[open] .mobile-secondary-summary i {
    transform: rotate(180deg);
}

.mobile-secondary-summary i {
    transition: transform 0.25s ease;
}

.mobile-secondary-dropdown-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 0 0.35rem 0.45rem;
}

.mobile-secondary-item {
    margin: 0;
    padding-left: 0.85rem;
}

[data-theme="dark"] .mobile-secondary-details {
    background: rgba(30, 41, 59, 0.58);
    border-color: rgba(129, 140, 248, 0.35);
}

[data-theme="dark"] .mobile-secondary-summary {
    color: #cbd5e1;
}

.nav-item-projects.mode-featured:hover #nav-projects-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, 0) scale(1);
}

/* Active state for Featured Projects link text - Persistent Underline */
.nav-item-projects.mode-featured .nav-link {
    color: #4f46e5 !important; /* Force active color for light mode */
    font-weight: 700;
    position: relative;
}

[data-theme="dark"] .nav-item-projects.mode-featured .nav-link {
    color: #ffffff !important; /* Force white for dark mode */
}

/* Ensure persistent underline for Featured Projects */
.nav-item-projects.mode-featured .nav-link::after {
    content: "";
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 100%;
    height: 2px;
    background: #4f46e5;
    border-radius: 99px;
    transform: scaleX(1); /* Ensure it's visible */
    transform-origin: left;
    transition: transform 0.3s ease;
    opacity: 1;
}

[data-theme="dark"] .nav-item-projects.mode-featured .nav-link::after {
    background: #ffffff; /* White underline in dark mode */
}

/* Alternate Background Stars for variety */
/* Target specific sections to flip background */
body.fun-mode .fun-galaxy-section:nth-of-type(even)::before,
body.fun-mode .fun-galaxy-section:nth-of-type(even) .fun-star-overlay {
    transform: scaleX(-1);
}

/* 4. Contact Submit Button */
body.fun-mode .contact-submit {
    background: linear-gradient(135deg, #4f46e5, #9333ea);
    position: relative;
    border: 1px solid rgba(165, 180, 252, 0.3);
    overflow: hidden;
}

body.fun-mode .contact-submit::after {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.5s ease;
}

body.fun-mode .contact-submit:hover {
    box-shadow: 0 0 30px rgba(147, 51, 234, 0.5);
    transform: scale(1.02);
}

body.fun-mode .contact-submit:hover::after {
    opacity: 1;
    transform: scale(1);
}

/* 5. Back to Top Button */
body.fun-mode #backToTop {
    background: rgba(15, 23, 42, 0.8);
    border: 1px solid #818cf8;
    color: #818cf8;
    border-radius: 50%; /* Orb */
    box-shadow: 0 0 15px rgba(129, 140, 248, 0.3);
}

html:not([data-theme="dark"]) body.fun-mode #backToTop {
    background: rgba(255, 255, 255, 0.9);
    border-color: #6366f1;
    color: #4f46e5;
}

body.fun-mode #backToTop:hover {
    background: #4f46e5;
    color: white;
    box-shadow: 0 0 30px rgba(79, 70, 229, 0.6), 0 0 60px rgba(79, 70, 229, 0.3);
    transform: translateY(-5px) rotate(360deg); /* Spin! */
}

/* 6. Enhanced View Project / Last Modified Link */
body.fun-mode .view-link {
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid rgba(99, 102, 241, 0.4);
    padding: 0.35rem 0.65rem;
    border-radius: 8px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    position: relative;
    overflow: visible;
    justify-content: flex-end;
    margin-left: auto;
    max-width: 100%;
    transform-origin: right center;
}

/* Light Mode View Link */
html:not([data-theme="dark"]) body.fun-mode .view-link {
    background: rgba(255, 255, 255, 0.8);
    border-color: #818cf8;
    color: #4f46e5;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
}

/* Hover bg color transition */
body.fun-mode .view-link:hover {
    background: rgba(79, 70, 229, 0.15);
    border-color: #818cf8;
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.25);
}

[data-theme="dark"] body.fun-mode .view-link:hover {
    background: rgba(79, 70, 229, 0.3);
}

html:not([data-theme="dark"]) body.fun-mode .view-link:hover {
    background: rgba(224, 231, 255, 0.92);
    color: #4338ca;
    border-color: #6366f1;
}

[data-theme="dark"] body.fun-mode .view-link:hover svg {
    color: #818cf8;
    filter: drop-shadow(0 0 5px rgba(129, 140, 248, 0.6));
}

/* Fun Mode Project Timestamps - Tech Pills */
body.fun-mode .project-card time,
body.fun-mode .project-list-card time,
body.fun-mode #projectsList > div time {
    display: inline-block;
    padding: 0.15rem 0.5rem;
    background: rgba(15, 23, 42, 0.4);
    border: 1px solid rgba(99, 102, 241, 0.25);
    border-radius: 4px;
    font-size: 0.65rem;
    color: #94a3b8;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    margin-bottom: 0.25rem;
    letter-spacing: 0.05em;
    transition: all 0.3s ease;
}

/* Light Mode Tech Pills */
html:not([data-theme="dark"]) body.fun-mode .project-card time,
html:not([data-theme="dark"]) body.fun-mode .project-list-card time,
html:not([data-theme="dark"]) body.fun-mode #projectsList > div time {
    background: rgba(224, 231, 255, 0.6);
    border-color: #818cf8;
    color: #4f46e5;
}

body.fun-mode .project-card time:hover,
body.fun-mode .project-list-card time:hover,
body.fun-mode #projectsList > div time:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(129, 140, 248, 0.5);
    color: #c7d2fe;
    transform: translateX(2px);
}

html:not([data-theme="dark"]) body.fun-mode .project-card time:hover {
    background: #eef2ff;
    color: #4338ca;
    border-color: #4f46e5;
}

/* Fun Mode "More" Link */
body.fun-mode .more-link {
    background: linear-gradient(120deg, rgba(30, 41, 59, 0.75), rgba(79, 70, 229, 0.25));
    border-color: rgba(129, 140, 248, 0.45);
    color: #e0e7ff;
    box-shadow: 0 8px 16px rgba(79, 70, 229, 0.2);
}

/* Light Mode More Link */
html:not([data-theme="dark"]) body.fun-mode .more-link {
    background: linear-gradient(120deg, rgba(224, 231, 255, 0.9), rgba(219, 234, 254, 0.8));
    color: #4338ca;
    border-color: rgba(99, 102, 241, 0.55);
    box-shadow: 0 8px 16px rgba(99, 102, 241, 0.15);
}

/* View All Projects Button - Light Mode Fix */
html:not([data-theme="dark"]) body.fun-mode .btn-explore-universe {
    background-color: transparent !important; /* Force transparent background */
    background-image: none;
    border: 2px solid #6366f1;
    color: #4f46e5;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.15);
    transition: color 0.25s ease 0.1s, box-shadow 0.3s ease, transform 0.3s ease; /* Delayed color change to prevent disappearing */
}

html:not([data-theme="dark"]) body.fun-mode .btn-explore-universe:hover {
    color: white;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    background-color: transparent !important; /* Ensure fill is from ::before */
}

@keyframes borderPulseLight {
    0%, 100% { border-color: rgba(100, 116, 139, 0.5); box-shadow: 0 0 6px rgba(100, 116, 139, 0.15), 0 6px 16px rgba(71, 85, 105, 0.1); }
    50% { border-color: rgba(99, 102, 241, 0.6); box-shadow: 0 0 12px rgba(99, 102, 241, 0.25), 0 6px 16px rgba(71, 85, 105, 0.1); }
}

@keyframes borderPulseLightFun {
    0%, 100% { border-color: rgba(79, 70, 229, 0.5); box-shadow: 0 0 8px rgba(79, 70, 229, 0.2), 0 6px 16px rgba(79, 70, 229, 0.1); }
    50% { border-color: rgba(124, 58, 237, 0.7); box-shadow: 0 0 14px rgba(124, 58, 237, 0.3), 0 6px 16px rgba(79, 70, 229, 0.1); }
}

/* Light mode Fun Lab button (base/non-fun-mode) */
html:not([data-theme="dark"]) .fun-lab-button {
    background: rgba(255, 255, 255, 0.9);
    border-color: rgba(100, 116, 139, 0.4);
    color: #475569;
    box-shadow: 0 6px 16px rgba(71, 85, 105, 0.12);
}

html:not([data-theme="dark"]) .fun-lab-button:hover {
    color: #1e293b;
    animation: borderPulseLight 1.5s ease-in-out infinite;
}

/* Light mode Fun Lab button (fun-mode ON) */
html:not([data-theme="dark"]) body.fun-mode .fun-lab-button {
    background: rgba(238, 242, 255, 0.95);
    border-color: rgba(79, 70, 229, 0.4);
    color: #4f46e5;
    box-shadow: 0 6px 16px rgba(79, 70, 229, 0.15);
}

html:not([data-theme="dark"]) body.fun-mode .fun-lab-button:hover {
    color: #312e81;
    animation: borderPulseLightFun 1.2s ease-in-out infinite;
}

html:not([data-theme="dark"]) .fun-lab-button .fun-lab-icon {
    color: #6366f1;
}

html:not([data-theme="dark"]) .fun-lab-button:hover .fun-lab-icon {
    color: #fff;
}

html:not([data-theme="dark"]) .fun-lab-settings-btn {
    border-color: rgba(100, 116, 139, 0.4);
    background: rgba(255, 255, 255, 0.9);
    color: #64748b;
}

html:not([data-theme="dark"]) .fun-lab-settings-btn:hover {
    background: rgba(100, 116, 139, 0.2);
    color: #334155;
}

html:not([data-theme="dark"]) body.fun-mode .fun-lab-settings-btn {
    border-color: rgba(79, 70, 229, 0.4);
    background: rgba(79, 70, 229, 0.1);
    color: #6366f1;
}

html:not([data-theme="dark"]) body.fun-mode .fun-lab-settings-btn:hover {
    background: rgba(79, 70, 229, 0.25);
    color: #4338ca;
}

html:not([data-theme="dark"]) .fun-lab-toggle-track {
    background: rgba(148, 163, 184, 0.4);
    border-color: rgba(100, 116, 139, 0.3);
}

html:not([data-theme="dark"]) .fun-lab-toggle-knob {
    background: #64748b;
}

html:not([data-theme="dark"]) body.fun-mode .fun-lab-toggle-track {
    background: rgba(79, 70, 229, 0.3);
    border-color: rgba(99, 102, 241, 0.4);
}

html:not([data-theme="dark"]) body.fun-mode .fun-lab-toggle-knob {
    background: #6366f1;
    box-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
}

/* Footer Socials */
.footer-content a {
    transition: color 0.3s ease, transform 0.3s ease, text-shadow 0.3s ease;
}

.footer-content a:hover {
    color: #fff !important;
    transform: translateY(-3px);
}

.footer-content a:hover svg {
    stroke: #fff;
}

/* Footer Socials Fun Mode */
body.fun-mode .footer-content a:hover {
    color: #818cf8 !important;
    text-shadow: 0 0 10px rgba(129, 140, 248, 0.6);
}

body.fun-mode .footer-content a:hover svg {
    stroke: #818cf8;
}

html:not([data-theme="dark"]) body.fun-mode .footer-content a:hover {
    color: #4f46e5 !important;
    text-shadow: 0 0 10px rgba(79, 70, 229, 0.4);
}

html:not([data-theme="dark"]) body.fun-mode .footer-content a:hover svg {
    stroke: #4f46e5;
}

body.fun-mode .more-link:hover {
    background: rgba(99, 102, 241, 0.25);
    color: #c7d2fe;
    border-color: #a5b4fc;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.2);
    transform: translateY(-1px);
}

/* Rover Quip Bubble */
.rover-quip-bubble {
    position: absolute;
    background: white;
    color: #0f172a;
    padding: 0.75rem 1rem;
    border-radius: 12px;
    border-bottom-left-radius: 2px; /* Speech bubble tail feel */
    font-family: "JetBrains Mono", monospace;
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    pointer-events: none;
    opacity: 0;
    transform: translateY(10px) scale(0.9);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 100;
    max-width: 200px;
    border: 2px solid #4f46e5;
}

.rover-quip-bubble.is-visible {
    opacity: 1;
    transform: translateY(0) scale(1);
}

/* Dark mode override for bubble */
[data-theme="dark"] .rover-quip-bubble {
    background: #1e293b;
    color: #e2e8f0;
    border-color: #818cf8;
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
}

/* Alert / Concerning Bubble Style */
.rover-quip-bubble.is-alert {
    border-color: #ef4444;
    color: #b91c1c;
    font-family: "Courier New", Courier, monospace; /* Glitchier font vibe */
}

[data-theme="dark"] .rover-quip-bubble.is-alert {
    background: #450a0a; /* Dark Red */
    color: #fca5a5; /* Light Red */
    border-color: #f87171;
    box-shadow: 0 0 25px rgba(239, 68, 68, 0.4);
}

/* ===== CREATIVE BUTTONS ===== */
.btn-explore-universe {
    position: relative;
    padding: 0.8rem 2.5rem;
    background: transparent;
    color: #4f46e5;
    border: 2px solid #4f46e5;
    border-radius: 999px;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1;
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.1);
}

.btn-explore-universe::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #4f46e5, #818cf8);
    transform: translateX(-105%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: -1;
}

.btn-explore-universe:hover {
    color: white;
    border-color: #4f46e5; /* Keeps border color matching but invisible under background */
    box-shadow: 0 10px 25px rgba(79, 70, 229, 0.35);
    transform: translateY(-3px);
}

.btn-explore-universe:hover::before {
    transform: translateX(0);
}

.btn-explore-universe i,
.btn-explore-universe svg {
    transition: transform 0.3s ease;
}

.btn-explore-universe:hover i,
.btn-explore-universe:hover svg {
    transform: translateX(4px);
}

/* Fun Mode Button Overrides */
body.fun-mode .btn-explore-universe {
    border-color: #a5b4fc;
    color: #c7d2fe;
    background: rgba(15, 23, 42, 0.6);
    box-shadow: 0 0 15px rgba(165, 180, 252, 0.15);
}

body.fun-mode .btn-explore-universe::before {
    background: linear-gradient(135deg, #6366f1, #d946ef);
}

body.fun-mode .btn-explore-universe:hover {
    color: white;
    border-color: transparent;
    box-shadow: 0 0 25px rgba(217, 70, 239, 0.5);
}

/* Project cards - horizontal layout for carousel */
.project-card {
    position: relative;
    flex: 0 0 auto;
    scroll-snap-align: center;
    scroll-snap-stop: normal;
    width: 320px;
    min-width: 320px;
    max-width: 320px;
    height: auto;
    background: white;
    border-radius: 0.75rem;
    overflow: visible;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column; /* Vertical stack: image on top, content below */
}

.project-card > img {
    border-radius: 0.75rem 0.75rem 0 0;
    object-fit: cover;
}

.project-card > .project-card-content {
    overflow: hidden;
    border-radius: 0 0 0.75rem 0.75rem;
}

/* Projects list should span full width (override carousel sizing) */
#projectsList .project-card,
#projectsList .project-list-card {
    width: 100%;
    min-width: 0;
    max-width: 100%;
    height: auto;
    scroll-snap-align: unset;
    overflow: visible;
    position: relative;
}

#projectsList .project-card > div:first-of-type {
    border-radius: 0.75rem 0 0 0.75rem;
    overflow: hidden;
}

#projectsList .project-card > div:last-of-type {
    border-radius: 0 0.75rem 0.75rem 0;
    overflow: hidden;
}

@media (min-width: 768px) {
    #projectsList .project-card,
    #projectsList .project-list-card {
        flex-direction: row;
    }
}

.project-card,
.project-list-card {
    position: relative;
    perspective: 1200px;
    transform-style: preserve-3d;
    border-radius: 1rem;
    overflow: hidden;
    box-sizing: border-box;
    --flip-x: 0px;
    --flip-y: 0px;
}

body.project-modal-open .project-card:not(.project-card--morphing),
body.project-modal-open #projectsList .project-card:not(.project-card--morphing),
body.project-modal-open #projectsList .project-list-card:not(.project-card--morphing) {
    filter: blur(6px) saturate(0.85);
    opacity: 0.45;
    pointer-events: none;
    transform: none !important;
    transition: filter 0.35s ease, opacity 0.35s ease;
}

.project-card--morphing {
    pointer-events: none !important;
    z-index: 1;
    position: relative;
    transition: opacity 0.35s ease !important;
}

body.project-modal-open .carousel-nav,
body.project-modal-open .fun-project-filters,
body.project-modal-open .btn-explore-universe {
    pointer-events: none;
    opacity: 0.6;
}

html.project-modal-open,
body.project-modal-open {
    overflow: hidden;
    padding-right: var(--modal-scrollbar-width, 0px);
}

body.project-modal-open nav {
    z-index: 90;
}

body.project-modal-open #backToTop,
body.project-modal-open .fun-lab-button-wrap,
body.project-modal-open .fun-lab-panel {
    opacity: 0;
    pointer-events: none;
}

.project-modal-overlay {
    position: fixed;
    inset: 0;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5.5rem 1.5rem 2rem;
    visibility: hidden;
    pointer-events: none;
    z-index: 80;
}

.project-modal-overlay::before {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.65);
    backdrop-filter: blur(6px);
    opacity: 0;
    transition: opacity 0.35s ease;
    z-index: -1;
}

.project-modal-overlay.is-active {
    visibility: visible;
    pointer-events: auto;
}

.project-modal-overlay.is-active::before {
    opacity: 1;
}

.project-modal-overlay.is-closing {
    visibility: visible;
    pointer-events: none;
}

.project-modal-overlay.is-closing::before {
    opacity: 0;
}

.project-modal-card {
    --modal-translate-x: 0px;
    --modal-translate-y: 18px;
    --modal-scale-x: 0.96;
    --modal-scale-y: 0.96;
    --modal-radius: 1.5rem;
    --modal-card-opacity: 0;
    width: min(960px, 100%);
    height: fit-content;
    max-height: calc(100vh - 7.5rem);
    max-height: calc(100dvh - 7.5rem);
    background: #ffffff;
    border-radius: var(--modal-radius);
    box-shadow: 0 30px 60px rgba(15, 23, 42, 0.45);
    border: 1px solid rgba(148, 163, 184, 0.25);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    opacity: var(--modal-card-opacity);
    transform: translate(var(--modal-translate-x), var(--modal-translate-y)) scale(var(--modal-scale-x), var(--modal-scale-y));
    transition:
        transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        border-radius 0.4s ease,
        box-shadow 0.4s ease,
        opacity 0.35s ease;
    will-change: transform, opacity;
}

.project-modal-overlay.is-closing .project-modal-card {
    transition:
        transform 0.38s cubic-bezier(0.42, 0, 0.58, 1),
        border-radius 0.38s ease,
        box-shadow 0.38s ease,
        opacity 0.32s ease;
}

.project-modal-close {
    position: absolute;
    top: 1.2rem;
    right: 1.2rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: none;
    background: rgba(99, 102, 241, 0.15);
    color: #4338ca;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 5;
}

.project-modal-close:hover {
    background: rgba(99, 102, 241, 0.35);
    color: #111827;
    transform: scale(1.05);
}

.project-modal-close svg {
    width: 18px;
    height: 18px;
}

.project-modal-content {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    max-height: 100%;
    overflow: hidden;
}

.project-modal-header {
    display: flex;
    flex-direction: column;
    gap: 0.9rem;
    padding: 2.8rem 2.8rem 1.25rem;
    align-items: stretch;
    position: relative;
    transition: gap 0.4s ease, padding 0.4s ease;
}

.project-modal-header > .project-modal-summary,
.project-modal-header > .project-modal-tags,
.project-modal-header > .project-modal-links {
    grid-column: 1 / -1;
}

.project-modal-header > .project-modal-summary,
.project-modal-header > .project-modal-tags,
.project-modal-header > .project-modal-links {
    transition: max-height 0.4s ease, opacity 0.35s ease, margin 0.35s ease, transform 0.35s ease;
    overflow: hidden;
}

.project-modal-header.is-scrolled {
    gap: 0.8rem;
    padding: 1.6rem 2.8rem 1rem;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
}

.project-modal-header.is-scrolled .project-modal-image {
    width: 100%;
    border-radius: 0.7rem;
}

.project-modal-header.is-scrolled .project-modal-intro h3 {
    font-size: 1.25rem;
    margin-bottom: 0.3rem;
}

.project-modal-header.is-scrolled .project-modal-date {
    font-size: 0.55rem;
}

.project-modal-header.is-scrolled .project-modal-date--updated {
    font-size: 0.48rem;
}

.project-modal-header.is-scrolled > .project-modal-summary {
    max-height: 0;
    opacity: 0;
    margin: 0;
}

.project-modal-header.is-scrolled > .project-modal-tags {
    max-height: 0;
    opacity: 0;
    margin: 0;
}

.project-modal-header.is-scrolled > .project-modal-links {
    margin-top: 0;
    gap: 0.3rem;
}

.project-modal-header.is-scrolled > .project-modal-links .project-modal-link {
    padding: 0.3rem 0.7rem;
    font-size: 0.72rem;
}

.project-modal-header.is-scrolled .project-modal-hero {
    grid-template-columns: 140px minmax(0, 1fr);
    gap: 0.4rem 0.5rem;
}

.project-modal-hero {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1.2fr);
    align-items: center;
    gap: 0.5rem 1.8rem;
    width: 100%;
}

.project-modal-image {
    width: 100%;
    aspect-ratio: 4 / 3;
    border-radius: 1rem;
    overflow: hidden;
    background: #111827;
    border: 1px solid rgba(148, 163, 184, 0.25);
    transition: width 0.4s ease, border-radius 0.4s ease;
}

.project-modal-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.project-modal-intro {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.project-modal-date {
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #64748b;
    margin: 0;
    padding: 0.15rem 0.5rem;
    background: rgba(100, 116, 139, 0.08);
    border-radius: 4px;
    font-weight: 500;
    display: inline-block;
    white-space: nowrap;
}

.project-modal-dates {
    display: flex;
    flex-wrap: nowrap;
    gap: 0.3rem;
    margin: 0;
    align-items: center;
    align-self: flex-start;
    white-space: nowrap;
}

.project-modal-date--updated {
    font-size: 0.48rem;
    font-style: italic;
    padding: 0.08rem 0.35rem;
    color: #16a34a;
    background: rgba(22, 163, 106, 0.08);
}

.project-modal-intro h3 {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0 0 0.6rem;
    color: #111827;
    padding-left: 1rem;
    transition: font-size 0.35s ease, margin 0.35s ease, padding 0.35s ease;
}

.project-modal-header.is-scrolled .project-modal-intro h3 {
    padding-left: 0;
}

.project-modal-summary {
    color: #475569;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 0.55rem;
}

.project-modal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.project-modal-tag {
    padding: 0.3rem 0.8rem;
    border-radius: 999px;
    background: rgba(99, 102, 241, 0.12);
    color: #4338ca;
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.project-modal-links {
    display: flex;
    flex-wrap: wrap;
    gap: 0.45rem;
    margin-top: -0.08rem;
}

.project-modal-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.45rem 1rem;
    border-radius: 0.5rem;
    background: rgba(99, 102, 241, 0.1);
    color: #4338ca;
    font-size: 0.82rem;
    font-weight: 600;
    text-decoration: none;
    transition: background 0.2s ease, color 0.2s ease;
}

.project-modal-link:hover {
    background: rgba(99, 102, 241, 0.22);
    color: #312e81;
}

.project-modal-link--pdf {
    background: rgba(16, 185, 129, 0.1);
    color: #047857;
}

.project-modal-link--pdf:hover {
    background: rgba(16, 185, 129, 0.22);
    color: #065f46;
}

.project-modal-body {
    padding: 0 2.8rem 2.6rem;
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    min-width: 0;
    display: grid;
    gap: 1.8rem;
}

.project-modal-section,
.project-modal-details,
.project-modal-impact-grid,
.project-modal-impact-card {
    min-width: 0;
    max-width: 100%;
}

.project-modal-section h4 {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: #1f2937;
    position: sticky;
    top: -0.15rem;
    z-index: 2;
    background: #ffffff;
    margin: 0 0 0.75rem;
    padding: 0.45rem 0 0.5rem;
    line-height: 1.25;
}

.project-modal-details p {
    color: #475569;
    line-height: 1.7;
    margin-bottom: 0.9rem;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.project-detail-figure {
    margin: 1.2rem auto;
    border-radius: 0.75rem;
    overflow: hidden;
    border: 1px solid rgba(148, 163, 184, 0.25);
    background: #f1f5f9;
    width: 85%;
}

.project-detail-img {
    width: 100%;
    height: auto;
    display: block;
}

.project-detail-img-caption {
    padding: 0.6rem 1rem;
    font-size: 0.78rem;
    color: #64748b;
    text-align: center;
    border-top: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(248, 250, 252, 0.8);
}

[data-theme="dark"] .project-detail-figure {
    border-color: rgba(148, 163, 184, 0.15);
    background: #111c33;
}

[data-theme="dark"] .project-detail-img-caption {
    color: #94a3b8;
    border-top-color: rgba(148, 163, 184, 0.15);
    background: rgba(17, 28, 51, 0.8);
}

.project-modal-impact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.6rem;
}

.project-modal-impact-card {
    background: #f8fafc;
    border: 1px solid rgba(148, 163, 184, 0.25);
    border-radius: 0.65rem;
    padding: 0.6rem 0.75rem;
    display: grid;
    gap: 0.2rem;
}

.project-modal-impact-card .impact-value {
    font-size: 0.95rem;
    font-weight: 700;
    color: #1f2937;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.project-modal-impact-card .impact-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #475569;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.project-modal-impact-card .impact-detail {
    font-size: 0.68rem;
    color: #64748b;
    overflow-wrap: anywhere;
    word-break: break-word;
}

[data-theme="dark"] .project-modal-card {
    background: #0f172a;
    border-color: rgba(148, 163, 184, 0.2);
}

[data-theme="dark"] .project-modal-date {
    color: #94a3b8;
}

[data-theme="dark"] .project-modal-date--updated {
    color: #4ade80;
}

[data-theme="dark"] .project-modal-intro h3 {
    color: #f8fafc;
}

[data-theme="dark"] .project-modal-summary,
[data-theme="dark"] .project-modal-details p,
[data-theme="dark"] .project-modal-impact-card .impact-detail {
    color: #cbd5e1;
}

[data-theme="dark"] .project-modal-section h4 {
    color: #c7d2fe;
    background: #0f172a;
}

[data-theme="dark"] .project-modal-tag {
    background: rgba(129, 140, 248, 0.18);
    color: #e0e7ff;
}

[data-theme="dark"] .project-modal-impact-card {
    background: #111c33;
    border-color: rgba(148, 163, 184, 0.25);
}

[data-theme="dark"] .project-modal-impact-card .impact-value {
    color: #f8fafc;
}

[data-theme="dark"] .project-modal-impact-card .impact-label {
    color: #cbd5e1;
}

[data-theme="dark"] .project-modal-close {
    background: rgba(129, 140, 248, 0.2);
    color: #e0e7ff;
}

[data-theme="dark"] .project-modal-link {
    background: rgba(129, 140, 248, 0.15);
    color: #a5b4fc;
}

[data-theme="dark"] .project-modal-link:hover {
    background: rgba(129, 140, 248, 0.28);
    color: #c7d2fe;
}

[data-theme="dark"] .project-modal-link--pdf {
    background: rgba(52, 211, 153, 0.12);
    color: #6ee7b7;
}

[data-theme="dark"] .project-modal-link--pdf:hover {
    background: rgba(52, 211, 153, 0.22);
    color: #a7f3d0;
}

[data-theme="dark"] .project-modal-body::-webkit-scrollbar {
    width: 8px;
}

[data-theme="dark"] .project-modal-body::-webkit-scrollbar-track {
    background: rgba(30, 41, 59, 0.5);
    border-radius: 4px;
}

[data-theme="dark"] .project-modal-body::-webkit-scrollbar-thumb {
    background: rgba(100, 116, 139, 0.5);
    border-radius: 4px;
}

[data-theme="dark"] .project-modal-body::-webkit-scrollbar-thumb:hover {
    background: rgba(148, 163, 184, 0.6);
}

.project-modal-body {
    scrollbar-color: auto;
}

[data-theme="dark"] .project-modal-body {
    scrollbar-color: rgba(100, 116, 139, 0.5) rgba(30, 41, 59, 0.5);
}

@media (min-width: 768px) {
    .project-modal-hero {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1.2fr);
    }
}

@media (max-width: 767px) {
    /* Compact side-by-side header: image left, intro right */
    .project-modal-header {
        gap: 0.65rem;
        padding: 1.4rem 1.2rem 1rem;
        flex-shrink: 0;
        transition: padding 0.35s ease, gap 0.35s ease;
    }

    .project-modal-hero {
        grid-template-columns: 100px minmax(0, 1fr);
        gap: 0.45rem 0.45rem;
        align-items: center;
    }

    .project-modal-image {
        aspect-ratio: 1 / 1;
        border-radius: 0.6rem;
        opacity: 0;
        transform: translateX(-12px) scale(0.92);
        animation: modal-img-enter 0.5s 0.15s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    @keyframes modal-img-enter {
        to { opacity: 1; transform: translateX(0) scale(1); }
    }

    .project-modal-intro {
        opacity: 0;
        transform: translateX(12px);
        animation: modal-intro-enter 0.5s 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        align-self: center;
        justify-content: center;
    }

    @keyframes modal-intro-enter {
        to { opacity: 1; transform: translateX(0); }
    }

    .project-modal-intro h3 {
        font-size: 1.05rem;
        margin-bottom: 0;
        padding-left: 0;
    }

    .project-modal-date {
        font-size: 0.62rem;
        letter-spacing: 0.05em;
    }

    .project-modal-date--updated {
        font-size: 0.46rem;
    }

    .project-modal-header > .project-modal-summary,
    .project-modal-header > .project-modal-tags,
    .project-modal-header > .project-modal-links {
        transition: max-height 0.4s ease, opacity 0.35s ease, margin 0.35s ease, transform 0.35s ease;
        overflow: hidden;
    }

    .project-modal-summary {
        font-size: 0.78rem;
        line-height: 1.45;
        margin-bottom: 0.6rem;
        opacity: 1;
        transform: scale(1);
        transform-origin: top left;
    }

    .project-modal-tags {
        gap: 0.3rem;
        opacity: 1;
        transform: scale(1);
        transform-origin: top left;
    }

    .project-modal-tag {
        padding: 0.15rem 0.5rem;
        font-size: 0.58rem;
    }

    .project-modal-links {
        margin-top: 0.02rem;
        gap: 0.35rem;
        max-height: 4rem;
        opacity: 1;
        transition: font-size 0.35s ease, padding 0.35s ease, gap 0.35s ease, margin 0.35s ease;
    }

    .project-modal-link {
        padding: 0.3rem 0.65rem;
        font-size: 0.7rem;
        transition: padding 0.35s ease, font-size 0.35s ease;
    }

    .project-modal-close {
        top: 0.6rem;
        right: 0.6rem;
        width: 32px;
        height: 32px;
    }

    .project-modal-close svg {
        width: 14px;
        height: 14px;
    }

    /* Body gets more space */
    .project-modal-body {
        padding: 0 1.2rem 1.6rem;
        gap: 1.2rem;
        min-width: 0;
        opacity: 0;
        transform: translateY(16px);
        animation: modal-body-enter 0.5s 0.4s ease forwards;
    }

    @keyframes modal-body-enter {
        to { opacity: 1; transform: translateY(0); }
    }

    .project-modal-section h4 {
        font-size: 0.78rem;
        position: sticky;
        top: -0.2rem;
        z-index: 2;
        padding: 0.72rem 0 0.42rem 0.6rem;
        margin: 0;
        overflow-wrap: anywhere;
        word-break: break-word;
    }

    .project-modal-section:not(:first-child) h4 {
        padding-left: 0;
    }

    .project-modal-section:first-child h4 {
        background: #ffffff;
    }

    [data-theme="dark"] .project-modal-section:first-child h4 {
        background: #1e293b;
    }

    .project-modal-section:not(:first-child) h4 {
        background: transparent;
    }

    .project-modal-section h4 + .project-modal-details {
        padding-top: 0.15rem;
    }

    .project-modal-details {
        padding-left: 0.6rem;
    }

    .project-modal-details p {
        font-size: 0.85rem;
        line-height: 1.55;
    }

    .project-detail-figure {
        width: 100%;
        margin: 1rem 0;
    }

    .project-modal-impact-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    /* Scrolled state — header shrinks, summary/tags fade, links stay small */
    .project-modal-header.is-scrolled {
        padding: 0.7rem 1.2rem 0.5rem;
        gap: 0.4rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
    }

    .project-modal-header.is-scrolled .project-modal-image {
        width: 60px;
    }

    .project-modal-header.is-scrolled > .project-modal-summary {
        max-height: 0;
        opacity: 0;
        margin: 0;
        transform: scale(0.95);
    }

    .project-modal-header.is-scrolled > .project-modal-tags {
        max-height: 0;
        opacity: 0;
        margin: 0;
        transform: scale(0.95);
    }

    .project-modal-header.is-scrolled .project-modal-hero {
        grid-template-columns: 60px minmax(0, 1fr);
        gap: 0.15rem 0.2rem;
    }

    .project-modal-header.is-scrolled > .project-modal-links {
        margin-top: 0;
        gap: 0.25rem;
        margin-left: 0;
        padding-left: 0;
        justify-content: flex-start;
    }

    .project-modal-header.is-scrolled > .project-modal-links .project-modal-link {
        padding: 0.2rem 0.45rem;
        font-size: 0.6rem;
    }

    .project-modal-header.is-scrolled .project-modal-intro h3 {
        font-size: 0.85rem;
        margin-bottom: 0;
    }

    .project-modal-header.is-scrolled .project-modal-date {
        font-size: 0.55rem;
    }

    .project-modal-header.is-scrolled .project-modal-date--updated {
        font-size: 0.46rem;
    }

    /* Modal top respects navbar, equal bottom spacing */
    .project-modal-overlay {
        padding: 5.5rem 0.6rem 1.5rem;
    }

    .project-modal-card {
        max-height: calc(100vh - 7rem);
        max-height: calc(100dvh - 7rem);
    }
}

@media (max-width: 639px) {
    .project-modal-impact-grid {
        grid-template-columns: 1fr;
    }
}

.project-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.65s ease;
    border-radius: inherit;
}

.project-card-front {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    background-color: var(--card-bg); /* Ensure solid background */
    border-radius: inherit;
}

.project-list-card .project-card-front {
    display: flex;
    flex-direction: column;
}

@media (min-width: 768px) {
    .project-list-card .project-card-front {
        flex-direction: row;
    }
}

.project-card-reveal {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    text-align: center;
    font-size: 0.8rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    color: #e2e8f0;
    background-color: #0f172a;
    background-image: radial-gradient(circle at top, rgba(79, 70, 229, 0.3), rgba(15, 23, 42, 0.96));
    box-shadow: inset 0 0 0 1px rgba(129, 140, 248, 0.2), inset 0 0 40px rgba(15, 23, 42, 0.4);
    text-shadow: 0 2px 10px rgba(15, 23, 42, 0.65);
    transform: rotateY(180deg);
    backface-visibility: hidden;
}

.fun-card-revealed .project-card-inner {
    transform: rotateY(180deg);
}

/* When card is flipped, hide front face to prevent mirrored content showing through */
.fun-card-revealed .project-card-front {
    pointer-events: none;
    opacity: 0;
    transition: opacity 0s 0.32s; /* Hide at flip midpoint */
}

.fun-card-revealed .project-card-front a,
.fun-card-revealed .project-card-front button {
    pointer-events: none;
    cursor: default;
}

/* Enable reveal side interactions when flipped */
.fun-card-revealed .project-card-reveal {
    pointer-events: auto;
}

/* Close button on reveal side */
.project-card-reveal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(99, 102, 241, 0.25);
    border: 1px solid rgba(129, 140, 248, 0.4);
    border-radius: 50%;
    color: #c7d2fe;
    cursor: pointer;
    transition: all 0.25s ease;
    z-index: 10;
}

.project-card-reveal-close:hover {
    background: rgba(99, 102, 241, 0.45);
    border-color: rgba(129, 140, 248, 0.7);
    color: #fff;
    transform: scale(1.1);
}

.project-card-reveal-close svg {
    width: 16px;
    height: 16px;
}


.project-card:hover,
.project-list-card:hover {
    outline: 3px solid rgba(99, 102, 241, 0.6);
    outline-offset: 0;
    box-shadow: 0 0 24px rgba(99, 102, 241, 0.25), 0 20px 30px -5px rgba(0, 0, 0, 0.15);
    animation: cardBreath 2.4s ease-in-out infinite;
    transform: translate3d(var(--flip-x), var(--flip-y), 0) translateY(-4px) perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
}

#projectsCarousel .project-card.is-active {
    outline: 2px solid rgba(99, 102, 241, 0.55);
    outline-offset: 0;
    box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.25), 0 18px 32px rgba(15, 23, 42, 0.12);
}

body.fun-mode #projectsCarousel .project-card.is-active {
    outline-color: rgba(129, 140, 248, 0.8);
    box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.4), 0 20px 34px rgba(15, 23, 42, 0.2);
}

body.fun-mode .project-card:hover,
body.fun-mode .project-list-card:hover {
    outline: 3px solid rgba(129, 140, 248, 0.85);
    box-shadow: 0 0 28px rgba(129, 140, 248, 0.45), 0 22px 38px rgba(30, 41, 59, 0.3);
}

/* Card image - full width at top */
.project-card img {
    width: 100%;
    height: 192px;
    object-fit: cover;
    display: block;
    flex-shrink: 0;
}

#projectsList .project-card img,
#projectsList .project-list-card img {
    height: 100%;
    min-height: 200px;
}

/* Update the project-card-content layout */
.project-card-content {
    padding: 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 2;
}

.project-card-footer {
    position: relative;
    z-index: 2;
}

.project-card a,
.project-card button {
    position: relative;
    z-index: 2;
    pointer-events: auto;
    touch-action: manipulation;
}

.project-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    line-height: 1.4;
    color: #1f2937;
}

.project-card p {
    color: #6b7280;
    margin-bottom: 1rem; /* Space between text and tags */
    font-size: 0.875rem;
    line-height: 1.4;
    flex: 0 0 auto; /* Don't let text expand to fill space */
}

.project-time {
    font-size: 0.68rem;
    font-style: normal;
    color: #94a3b8;
    line-height: 1.2;
    letter-spacing: 0.01em;
}

.project-time-posted {
    font-weight: 500;
}

.project-time-updated {
    font-weight: 500;
    color: #16a34a;
}

.project-times-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.2rem 0.6rem;
    align-items: center;
    padding: 0;
    border-top: none;
    margin: 0 0 0.65rem;
    opacity: 1;
    max-height: none;
    overflow: visible;
}

.project-times-row--top {
    align-self: flex-start;
}

@media (min-width: 768px) {
    .project-card .project-times-row--top {
        display: none;
    }
}

[data-theme="dark"] .project-times-row {
    border-top-color: rgba(148, 163, 184, 0.1);
}

[data-theme="dark"] .project-time {
    color: #64748b;
}

[data-theme="dark"] .project-time-updated {
    color: #4ade80;
}

#projectsCarousel .project-card p {
    display: block;
    overflow: visible;
}

/* Item 6: Visible glow on project page cards - override Tailwind hover:shadow-lg */
#projectsList .project-card:hover,
#projectsList .project-list-card:hover,
#projectsList > div:hover {
    box-shadow: 0 0 24px rgba(99, 102, 241, 0.3), 0 20px 30px -5px rgba(0, 0, 0, 0.15) !important;
    outline: 2px solid rgba(99, 102, 241, 0.5);
    outline-offset: 0;
}

body.fun-mode #projectsList .project-card:hover,
body.fun-mode #projectsList .project-list-card:hover,
body.fun-mode #projectsList > div:hover {
    box-shadow: 0 0 28px rgba(129, 140, 248, 0.5), 0 22px 38px rgba(30, 41, 59, 0.3) !important;
    outline: 2px solid rgba(129, 140, 248, 0.8);
}

/* Position tags directly below text */
.project-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: auto; /* Push View Project link to bottom */
}

.project-tag {
    padding: 0.25rem 0.5rem;
    background: #f3f4f6;
    border-radius: 9999px;
    font-size: 0.75rem;
    color: #374151;
}

/* Project card footer - times above view link */
.project-card-footer {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Keep View Project link at the bottom */
.project-link {
    margin-top: auto;
    padding-top: 1.5rem; /* More space above View Project link */
    display: flex;
    justify-content: flex-end;
}

/* Navigation arrows - positioned close to carousel edges */
.carousel-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 30;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease, opacity 0.3s ease;
    user-select: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.carousel-nav:hover {
    background: white;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    transform: translateY(-50%) scale(1.05);
}

.carousel-nav:active {
    transform: translateY(-50%) scale(0.95);
}

.carousel-nav svg {
    width: 20px;
    height: 20px;
    color: #374151;
}

/* Position arrows just outside carousel content area */
.carousel-nav-left {
    left: -15px; /* Close to carousel but outside content */
}

.carousel-nav-right {
    right: -15px; /* Close to carousel but outside content */
}

/* Desktop styles */
@media (min-width: 1024px) {
    .carousel-container {
        padding: 1.5rem;
        margin: 0;
    }
    
    .carousel-nav-left {
        left: -15px;
    }
    
    .carousel-nav-right {
        right: -15px;
    }
    
    .carousel-nav {
        width: 52px;
        height: 52px;
    }
    
    .carousel-nav svg {
        width: 22px;
        height: 22px;
    }
    
    #projectsCarousel {
        gap: 1.25rem;
        padding: 0.75rem 0.5rem;
        scroll-padding-inline: 0.5rem;
    }
    .back-to-top {
        margin-right: 0.5rem;
    }
}

/* Tablet styles */
@media (max-width: 1023px) and (min-width: 769px) {
    .carousel-container {
        padding: 1rem !important;
        margin-left: -2rem !important; /* Break out of parent lg:px-8/sm:px-6 */
        margin-right: -2rem !important;
        width: calc(100% + 4rem) !important;
        box-sizing: border-box;
        max-width: none;
    }
    /* Override dark mode container on tablet */
    [data-theme="dark"] body.fun-mode #projects .carousel-container {
        padding: 1rem !important;
        margin-left: -2rem !important;
        margin-right: -2rem !important;
        width: calc(100% + 4rem) !important;
    }
    #projectsCarousel {
        padding: 0.5rem !important;
        scroll-padding-inline: 0.5rem;
        box-sizing: border-box;
        max-width: 100%;
    }
    .carousel-nav-left {
        left: -10px;
    }
    .carousel-nav-right {
        right: -10px;
    }
    .project-card {
        width: 300px;
        min-width: 300px;
        max-width: 300px;
    }
    .back-to-top {
        margin-right: 0.2rem;
    }
}

/* Mobile styles - arrows inside with proper spacing */
@media (max-width: 768px) {
    html, body {
        overflow-x: clip !important;
        max-width: 100%;
    }

    /* ===== MOBILE FILTERS ===== */
    .fun-project-filters {
        flex-wrap: wrap !important;
        gap: 0.35rem !important;
        padding: 0 0.5rem;
        overflow-x: visible;
        justify-content: center;
    }

    .fun-filter-btn {
        padding: 0.3rem 0.6rem !important;
        font-size: 0.6rem !important;
        font-weight: 600 !important;
        letter-spacing: 0.02em !important;
        flex-shrink: 0;
        white-space: nowrap;
    }

    /* ===== MOBILE SCROLL PERFORMANCE ===== */
    .skill-card,
    .project-card,
    .project-list-card,
    .testimonial-card {
        will-change: auto;
        transform: none !important;
        backface-visibility: visible;
    }

    /* Disable 3D hover lift/rotation on mobile — prevents hit-target misalignment */
    .project-card:hover,
    .project-list-card:hover {
        transform: none !important;
        animation: none !important;
    }

    .fun-filter-btn {
        backdrop-filter: none !important;
    }

    /* Tighten section titles on mobile */
    .sticky-section-title {
        padding: 0.5rem 1rem !important;
        margin-bottom: 1.1rem !important;
    }

    .sticky-section-title h2 {
        font-size: 1.25rem !important;
        margin-bottom: 0.25rem !important;
    }

    /* ===== MOBILE HERO H2 + BADGES WRAP SAFETY ===== */
    #hero h2,
    #intro h2 {
        font-size: 1.05rem !important;
        line-height: 1.35;
        white-space: normal !important;
        overflow-wrap: anywhere;
    }

    .availability-badge,
    .availability-badge--light {
        font-size: 0.58rem !important;
        padding: 0.3rem 0.65rem !important;
        width: 100%;
        max-width: 100%;
        display: flex;
        align-items: flex-start;
        white-space: normal !important;
        overflow-wrap: anywhere;
        line-height: 1.35;
        text-align: left;
        gap: 0.35rem !important;
    }

    .availability-badge .availability-dot,
    .availability-badge--light .availability-dot {
        flex-shrink: 0;
        margin-top: 0.2rem;
    }

    .resume-link,
    .resume-link--light {
        max-width: 100%;
        white-space: normal;
    }

    .hero-status {
        margin-bottom: 1.5rem !important;
        width: 100%;
        max-width: 100%;
        min-width: 0;
    }

    .hero-status--light {
        align-items: center !important;
        text-align: center;
        width: 100%;
    }

    .hero-status--light .availability-badge,
    .hero-status--light .resume-link {
        justify-content: center;
        text-align: center;
    }

    .hero-status--light .availability-badge {
        align-items: center;
    }

    /* ===== MOBILE PROJECT LIST CARD TAGS ===== */
    #projectsList .project-tag {
        padding: 0.12rem 0.35rem !important;
        font-size: 0.5rem !important;
    }

    #projectsList .project-tags {
        gap: 0.25rem !important;
    }

    /* ===== MOBILE PROJECT LIST CARD TITLES ===== */
    #projectsList .project-card h3,
    #projectsList .project-list-card h3 {
        font-size: 0.95rem !important;
        line-height: 1.3;
    }

    #projectsList .project-card p,
    #projectsList .project-list-card p {
        font-size: 0.75rem !important;
    }

    /* ===== MOBILE PROJECT TAGS ===== */
    .project-tag {
        padding: 0.15rem 0.4rem !important;
        font-size: 0.55rem !important;
    }

    .project-tags {
        gap: 0.3rem !important;
    }

    /* ===== MOBILE SPACING TIGHTEN ===== */
    #projects .section-title-container {
        margin-bottom: 0.25rem !important;
    }

    #projects .hero-status {
        margin-top: 0.35rem !important;
        margin-bottom: 0.25rem !important;
    }

    .fun-project-filters {
        margin-bottom: 0.3rem !important;
    }

    #projects .fun-project-filters {
        margin: 0 0 0.3rem !important;
        padding: 0.35rem 0 !important;
    }

    /* ===== MOBILE PROJECT TIME ===== */
    .project-time {
        font-size: 0.65rem !important;
        white-space: nowrap;
    }

    .project-time-updated {
        font-size: 0.6rem !important;
    }

    /* ===== DISABLE VIEW-LINK HOVER ON MOBILE ===== */
    .fun-view-link:hover .view-link-text {
        max-width: 200px !important;
        opacity: 1 !important;
        padding-right: 0.15rem !important;
        transform: none !important;
        filter: none !important;
    }
    .fun-view-link:hover::after {
        max-width: 0 !important;
        opacity: 0 !important;
        transform: none !important;
        filter: none !important;
    }
    .fun-view-link:hover i,
    .fun-view-link:hover svg {
        transform: none !important;
        color: inherit !important;
    }
    .view-link:hover,
    body.fun-mode .view-link:hover {
        transform: none !important;
        box-shadow: none !important;
    }
    body.fun-mode .view-link:hover {
        background: rgba(15, 23, 42, 0.6) !important;
        border-color: rgba(99, 102, 241, 0.4) !important;
    }
    .more-link:hover {
        transform: none !important;
        box-shadow: none !important;
    }

    /* ===== MOBILE TOUCH TARGETS ===== */
    .more-link {
        padding: 0.3rem 0.6rem 0.3rem 0.55rem !important;
        position: relative;
    }
    .more-link::before {
        content: '';
        position: absolute;
        inset: -6px -8px;
    }
    .view-link,
    body.fun-mode .view-link {
        padding-top: 0.45rem !important;
        padding-bottom: 0.45rem !important;
        position: relative;
    }
    .view-link::before {
        content: '';
        position: absolute;
        inset: -5px -6px;
    }

    /* ===== MOBILE SECTION SPACING ===== */
    .sticky-section-title + .max-w-6xl > .grid > div:first-child > h3:first-of-type,
    .sticky-section-title ~ .max-w-6xl h3:first-of-type,
    section > .max-w-6xl > .grid > div > h3:first-child {
        margin-top: 1.05rem;
    }
    .sticky-section-title + .grid,
    .sticky-section-title + .hero-status,
    .sticky-section-title + .fun-project-filters,
    .sticky-section-title + .max-w-6xl {
        margin-top: 1rem;
    }
    #projects .hero-status {
        margin-top: 1rem !important;
    }

    /* ===== FUN MODE MODAL PERFORMANCE ===== */
    body.fun-mode.project-modal-open .fun-star-overlay,
    body.fun-mode.project-modal-open .fun-star-scatter::before,
    body.fun-mode.project-modal-open .fun-star-scatter::after {
        animation-play-state: paused !important;
    }
    body.fun-mode.project-modal-open #vanta-canvas,
    body.fun-mode.project-modal-open .vanta-canvas {
        will-change: auto !important;
        animation-play-state: paused !important;
    }
    body.project-modal-open .project-modal-overlay {
        will-change: opacity;
    }
    body.project-modal-open .project-modal-card {
        will-change: transform, opacity;
    }
    body.fun-mode.project-modal-open .project-card,
    body.fun-mode.project-modal-open .project-list-card {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    /* ===== MOBILE SCROLL PERFORMANCE ===== */
    body.is-scrolling .fun-star-overlay,
    body.is-interacting .fun-star-overlay,
    body.is-scrolling .fun-star-scatter::before,
    body.is-interacting .fun-star-scatter::before,
    body.is-scrolling .fun-star-scatter::after,
    body.is-interacting .fun-star-scatter::after,
    body.is-scrolling .fun-shooting-star,
    body.is-interacting .fun-shooting-star,
    body.is-scrolling .fun-rover-buddy .rover-wheel,
    body.is-interacting .fun-rover-buddy .rover-wheel,
    body.is-scrolling .fun-rover-buddy .rover-glow,
    body.is-interacting .fun-rover-buddy .rover-glow,
    body.is-scrolling .fun-rover-buddy .rover-fin,
    body.is-interacting .fun-rover-buddy .rover-fin,
    body.is-scrolling .fun-rover-buddy .rover-headlight,
    body.is-interacting .fun-rover-buddy .rover-headlight {
        animation-play-state: paused !important;
    }

    body.is-scrolling .fun-console::before,
    body.is-interacting .fun-console::before {
        animation: none !important;
    }

    body.is-scrolling #vanta-bg,
    body.is-interacting #vanta-bg,
    body.is-scrolling #vanta-bg canvas,
    body.is-interacting #vanta-bg canvas {
        opacity: 0.4 !important;
    }

    body.is-interacting .card-body,
    body.is-interacting .more-link,
    body.is-interacting .more-link .more-link-icon {
        transition: none !important;
    }

    /* ===== MOBILE STATIC STARS ===== */
    body.fun-mode .fun-star-overlay,
    body.fun-mode .fun-galaxy-section::before,
    body.fun-mode .fun-bright-star,
    body.fun-mode footer::before {
        animation: none !important;
    }

    /* ===== MOBILE CONTACT TEXT ===== */
    .contact-email-text,
    .contact-location-text {
        font-size: 0.75rem !important;
    }

    .contact-location-wrapper,
    .contact-email-wrapper {
        margin-left: 0.3rem;
    }

    /* ===== MOBILE PROJECT CARDS ===== */
    .project-card > .project-card-content {
        overflow: visible !important;
        padding: 1rem !important;
        display: flex;
        flex-direction: column;
        flex: 1;
    }

    .project-card-content > *:last-child {
        margin-top: auto;
    }

    /* ===== MOBILE DOME LIGHTS FIX ===== */
    [data-theme="dark"] .sticky-section-title.is-sticky::before {
        opacity: 1 !important;
        filter: blur(8px) !important;
        height: 60% !important;
    }

    [data-theme="dark"] .sticky-section-title.is-sticky::after {
        filter: blur(20px) !important;
        height: 300px !important;
    }
    .carousel-container {
        padding: 0.9rem !important;
        margin-left: -1.5rem !important; /* Break out of parent px-4/sm:px-6 padding */
        margin-right: -1.5rem !important;
        width: calc(100% + 3rem) !important;
        overflow: visible;
        max-width: none;
        box-sizing: border-box;
        border-radius: 0;
    }
    /* Override dark mode container padding on mobile */
    [data-theme="dark"] body.fun-mode #projects .carousel-container {
        padding: 0.9rem !important;
        margin-left: -1.5rem !important;
        margin-right: -1.5rem !important;
        width: calc(100% + 3rem) !important;
        border-radius: 0;
    }
    /* Mobile arrows positioned inside with safe margins */
    .carousel-nav-left {
        left: 0.15rem;
    }
    .carousel-nav-right {
        right: 0.15rem;
    }
    .carousel-nav {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }
    .carousel-nav:hover {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
        transform: translateY(-50%) scale(1.02);
    }
    .carousel-nav svg {
        width: 18px;
        height: 18px;
    }
    #projectsCarousel {
        gap: 1rem;
        padding: 0.5rem !important;
        scroll-padding-inline: 0.5rem;
        margin: 0;
        max-width: 100%;
        box-sizing: border-box;
        align-items: stretch;
        min-height: 0;
    }
    /* Mobile adjustments for carousel cards */
    .project-card {
        width: 280px;
        min-width: 280px;
        max-width: 280px;
        height: 420px;
        min-height: 420px;
    }
    .project-card img {
        height: 160px;
    }
    .project-card-content {
        padding: 0.95rem;
    }
    .project-card h3 {
        font-size: 1.125rem;
    }
    .project-card p {
        font-size: 0.8rem;
        margin-bottom: 0.75rem;
    }
    #projectsCarousel .project-card p {
        display: block;
        overflow: visible;
        font-size: 0.72rem;
        line-height: 1.4;
        margin-bottom: 0.5rem;
    }
    #projectsCarousel .project-tags {
        gap: 0.4rem;
        margin-bottom: 0.75rem;
    }
    .back-to-top {
        margin-right: 0;
    }
    
    /* Fix Star Background cutoff on mobile - Ensure section covers carousel */
    body.fun-mode .fun-galaxy-section {
        min-height: 100%;
        height: auto;
        overflow: visible;
    }

    /* ===== MOBILE DROPDOWN FIX ===== */
    /* Reposition dropdowns for small screens to prevent overflow */
    .contact-email-dropdown {
        left: auto;
        right: 0;
        min-width: 0;
        white-space: nowrap;
    }

    /* Disable hover/focus-within dropdown display on mobile touch devices */
    .contact-email-wrapper:hover .contact-email-dropdown,
    .contact-email-wrapper:focus-within .contact-email-dropdown,
    .contact-location-wrapper:hover .contact-location-dropdown,
    .contact-location-wrapper:focus-within .contact-location-dropdown,
    .contact-location-wrapper:hover .contact-email-dropdown,
    .contact-location-wrapper:focus-within .contact-email-dropdown {
        opacity: 0 !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    /* Show dropdown only when explicitly toggled via JS tap */
    .contact-email-wrapper.dropdown-open .contact-email-dropdown,
    .contact-location-wrapper.dropdown-open .contact-location-dropdown,
    .contact-location-wrapper.dropdown-open .contact-email-dropdown {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) !important;
        pointer-events: auto !important;
    }

    /* Mobile footer dropdowns open upward */
    .footer-inline-wrapper.dropdown-open .footer-dropdown {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) !important;
        pointer-events: auto !important;
    }

    /* Ensure footer contact line wraps nicely on mobile */
    .footer-contact-line {
        flex-direction: column;
        gap: 0.75rem;
    }

    .footer-dot {
        display: none;
    }
}

/* Small mobile adjustments */
@media (max-width: 480px) {
    .carousel-container {
        padding: 0.8rem !important;
    }
    /* Override dark mode on small mobile too */
    [data-theme="dark"] body.fun-mode #projects .carousel-container {
        padding: 0.8rem !important;
    }
    .carousel-nav-left {
        left: 0.1rem;
    }
    .carousel-nav-right {
        right: 0.1rem;
    }
    .carousel-nav {
        width: 36px;
        height: 36px;
    }
    .carousel-nav svg {
        width: 16px;
        height: 16px;
    }
    #projectsCarousel {
        padding: 0.5rem !important;
        scroll-padding-inline: 0.5rem;
        margin: 0;
    }
    .project-card {
        width: 260px;
        min-width: 260px;
        max-width: 260px;
        height: 400px;
        min-height: 400px;
    }
    #projectsCarousel .project-card p {
        display: block;
        overflow: visible;
        font-size: 0.68rem;
        line-height: 1.35;
        margin-bottom: 0.4rem;
    }
    .back-to-top {
        margin-right: 0;
    }
}

/* Focus states for accessibility */
.carousel-nav:focus {
    outline: 2px solid #4f46e5;
    outline-offset: 2px;
}

/* Enhanced disabled states */
.carousel-nav:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    transform: translateY(-50%) scale(0.9);
}

/* Smooth scrolling behavior for all browsers */
html {
    scroll-behavior: smooth;
}

/* Prevent text selection on navigation */
.carousel-nav {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Hero CTA buttons - mid-small screen fix (stacked layout below sm:640px) */
@media (max-width: 639px) {
    .hero-primary-btn,
    .hero-secondary-btn {
        flex: 1 1 auto !important;
        width: 100%;
        max-width: 100%;
        display: flex !important;
        align-items: center;
        justify-content: center;
        padding: 0.6rem 0.75rem !important;
        min-height: 40px;
        line-height: 1.2;
        font-size: 0.8rem;
        white-space: normal;
    }
    .hero-actions {
        flex-direction: column !important;
        flex-wrap: wrap;
        gap: 0.6rem;
        align-items: stretch;
        justify-content: flex-start;
        width: 100%;
    }
    .hero-tags {
        flex-wrap: wrap;
        gap: 0.5rem;
        font-size: 0.65rem;
        letter-spacing: 0.08em;
        overflow-x: visible;
        padding-bottom: 0.15rem;
        width: 100%;
    }
    .hero-tags span {
        padding: 0.2rem 0.45rem;
        white-space: normal;
        max-width: 100%;
    }
}

/* ===== END OF SCROLL SNAP FEATURES ===== */

/* ===== CONTACT SECTION SOCIAL ICONS ANIMATION ===== */

/* Place at the end of the file to avoid interfering with other styles */
.contact-socials {
    display: flex;
    gap: 1.5rem;
    margin-top: 2rem;
    align-items: center;
}

.contact-social-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: #f1f5f9;
    color: #475569;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid transparent;
}

.contact-social-btn:hover {
    background: white;
    transform: translateY(-4px);
    color: #4f46e5;
    box-shadow: 0 10px 20px rgba(79, 70, 229, 0.15);
    border-color: rgba(99, 102, 241, 0.2);
}

body.fun-mode .contact-social-btn {
    background: rgba(15, 23, 42, 0.4);
    border: 1px solid rgba(148, 163, 184, 0.2);
    color: #94a3b8;
}

body.fun-mode .contact-social-btn:hover {
    background: rgba(99, 102, 241, 0.15);
    color: #a5b4fc;
    border-color: rgba(99, 102, 241, 0.5);
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.3);
}

/* Light mode fun overrides for socials */
html:not([data-theme="dark"]) body.fun-mode .contact-social-btn {
    background: white;
    border-color: rgba(99, 102, 241, 0.2);
    color: #64748b;
}

html:not([data-theme="dark"]) body.fun-mode .contact-social-btn:hover {
    background: #eef2ff;
    color: #4f46e5;
    border-color: #6366f1;
    box-shadow: 0 10px 25px rgba(99, 102, 241, 0.2);
}

.contact-social-btn:hover i {
    color: #6366f1 !important;
    transition: color 0.3s;
}
@keyframes contactSocialBounce {
    0%   { transform: scale(1) translateY(0); }
    30%  { transform: scale(1.15) translateY(-8px); }
    50%  { transform: scale(0.95) translateY(2px); }
    70%  { transform: scale(1.05) translateY(-4px); }
    100% { transform: scale(1) translateY(0); }
}

/* ===== DARK MODE TOGGLE BUTTON ===== */
.theme-toggle {
    position: relative;
    width: 60px;
    height: 30px;
    background: var(--bg-tertiary);
    border-radius: 15px;
    cursor: pointer;
    transition: background 0.3s ease;
    border: 2px solid var(--border-color);
    display: flex;
    align-items: center;
    padding: 0 4px;
}

.theme-toggle:hover {
    background: var(--border-color);
}

.theme-toggle-slider {
    position: absolute;
    width: 22px;
    height: 22px;
    background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
    border-radius: 50%;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px var(--shadow-md);
}

.theme-toggle-slider svg {
    width: 14px;
    height: 14px;
    color: white;
}

[data-theme="dark"] .theme-toggle-slider {
    transform: translateX(30px);
}

/* ===== DARK MODE STYLES ===== */
[data-theme="dark"] .bg-white {
    background-color: var(--card-bg) !important;
}

[data-theme="dark"] .bg-gray-50 {
    background-color: var(--bg-secondary) !important;
}

[data-theme="dark"] .bg-gray-100 {
    background-color: var(--bg-tertiary) !important;
}

[data-theme="dark"] .text-gray-700,
[data-theme="dark"] .text-gray-800 {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .text-indigo-600 {
    color: #a5b4fc !important;
}

[data-theme="dark"] .text-gray-600 {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .text-gray-500 {
    color: var(--text-tertiary) !important;
}

[data-theme="dark"] .text-gray-400 {
    color: var(--text-tertiary) !important;
}

[data-theme="dark"] .border-gray-200,
[data-theme="dark"] .border-gray-300 {
    border-color: var(--border-color) !important;
}

[data-theme="dark"] .shadow-sm,
[data-theme="dark"] .shadow-md,
[data-theme="dark"] .shadow-lg {
    box-shadow: 0 4px 6px var(--shadow-md), 0 2px 4px var(--shadow-sm) !important;
}

[data-theme="dark"] nav {
    background-color: var(--nav-bg) !important;
    border-bottom: 1px solid var(--border-color);
}

[data-theme="dark"] .mobile-menu {
    background-color: var(--card-bg) !important;
    border-color: var(--border-color) !important;
}

[data-theme="dark"] input,
[data-theme="dark"] textarea {
    background-color: var(--input-bg) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
    color: var(--text-tertiary) !important;
}

[data-theme="dark"] .hero-gradient {
    background:
        radial-gradient(circle at 12% 18%, rgba(129, 140, 248, 0.22), transparent 55%),
        radial-gradient(circle at 80% 15%, rgba(56, 189, 248, 0.18), transparent 60%),
        radial-gradient(circle at 18% 80%, rgba(236, 72, 153, 0.16), transparent 60%),
        radial-gradient(circle at 90% 80%, rgba(15, 23, 42, 0.7), transparent 55%),
        linear-gradient(135deg, #0f172a 0%, #1e1b4b 52%, #0f172a 100%) !important;
}

[data-theme="dark"] .hero-gradient::before {
    opacity: 0.45;
}

[data-theme="dark"] .hero-gradient::after {
    opacity: 0.08;
}

[data-theme="dark"] .sticky-section-title {
    background: var(--bg-secondary) !important;
}

[data-theme="dark"] .sticky-section-title h2.text-gray-800,
[data-theme="dark"] .section-title-container h2.text-gray-800,
[data-theme="dark"] .sticky-section-title h2,
[data-theme="dark"] .section-title-container h2 {
    color: #c7d2fe !important;
}

[data-theme="dark"] .project-card {
    background: var(--card-bg) !important;
}

[data-theme="dark"] .experience-card {
    background: #0f172a !important;
    border-color: rgba(148, 163, 184, 0.2) !important;
}

[data-theme="dark"] .experience-card::before {
    background: linear-gradient(90deg, rgba(15, 23, 42, 0.98) 0%, rgba(15, 23, 42, 0.95) 55%, rgba(15, 23, 42, 0.7) 70%, rgba(15, 23, 42, 0.2) 100%) !important;
}

[data-theme="dark"] .experience-title,
[data-theme="dark"] .experience-summary,
[data-theme="dark"] .experience-list,
[data-theme="dark"] .experience-summary-title,
[data-theme="dark"] .experience-bullet-title {
    color: #e2e8f0 !important;
}

[data-theme="dark"] .experience-meta {
    color: #a5b4fc !important;
}

[data-theme="dark"] .tools-platforms-subtitle {
    color: #cbd5e1 !important;
}

[data-theme="dark"] .tools-platform-card {
    background: #1e293b !important;
    border: 1px solid rgba(148, 163, 184, 0.24);
}

[data-theme="dark"] .tools-platform-card h3,
[data-theme="dark"] .tools-platform-card li,
[data-theme="dark"] .tools-platform-card p {
    color: #e2e8f0 !important;
}

[data-theme="dark"] .tools-platform-card li span {
    color: #a5b4fc !important;
}

[data-theme="dark"] .tools-platform-card .bg-indigo-100 {
    background: rgba(99, 102, 241, 0.2) !important;
}

[data-theme="dark"] .tools-platform-card .text-indigo-600 {
    color: #c7d2fe !important;
}

[data-theme="dark"] .experience-list li::before {
    background: #818cf8;
    box-shadow: 0 0 0 4px rgba(129, 140, 248, 0.18);
}

[data-theme="dark"] .experience-inset {
    border-color: rgba(148, 163, 184, 0.6);
    box-shadow: 0 16px 32px rgba(15, 23, 42, 0.45);
}

[data-theme="dark"] .experience-inset::after {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.15) 0%, rgba(15, 23, 42, 0.6) 100%);
}

[data-theme="dark"] .project-card h3 {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .project-card p {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .analyst-insight-card {
    background: #0f172a !important;
    border-color: rgba(148, 163, 184, 0.2) !important;
}

[data-theme="dark"] .analyst-insight-card::after {
    background: radial-gradient(circle at top right, rgba(99, 102, 241, 0.22), transparent 65%) !important;
}

[data-theme="dark"] .analyst-metric-value {
    color: #c7d2fe !important;
}

[data-theme="dark"] .analyst-metric-label {
    color: #94a3b8 !important;
}

[data-theme="dark"] .analyst-metric-note {
    color: #cbd5e1 !important;
}

[data-theme="dark"] .analyst-spark span {
    background: linear-gradient(180deg, #6366f1 0%, #818cf8 100%);
}

[data-theme="dark"] .scripts-library-loading {
    border-color: rgba(129, 140, 248, 0.4);
    background: rgba(129, 140, 248, 0.12);
    color: #cbd5e1;
}

[data-theme="dark"] .scripts-library-filter-btn {
    background: rgba(129, 140, 248, 0.14);
    border-color: rgba(129, 140, 248, 0.32);
    color: #c7d2fe;
}

[data-theme="dark"] .scripts-library-filter-btn:hover {
    background: rgba(129, 140, 248, 0.22);
}

[data-theme="dark"] .scripts-library-filter-btn.is-active {
    background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
    color: #0f172a;
}

[data-theme="dark"] .scripts-library-count {
    color: #94a3b8;
}

[data-theme="dark"] .script-library-card {
    background: #0f172a;
    border-color: rgba(148, 163, 184, 0.22);
    box-shadow: 0 14px 30px rgba(2, 6, 23, 0.5);
}

[data-theme="dark"] .script-library-card:hover {
    border-color: rgba(129, 140, 248, 0.42);
    box-shadow: 0 20px 34px rgba(2, 6, 23, 0.6);
}

[data-theme="dark"] .script-library-icon {
    color: #c7d2fe;
    background: rgba(129, 140, 248, 0.18);
    border-color: rgba(129, 140, 248, 0.3);
}

[data-theme="dark"] .script-library-card h3 {
    color: #e2e8f0;
}

[data-theme="dark"] .script-library-summary,
[data-theme="dark"] .script-library-highlights li {
    color: #cbd5e1;
}

[data-theme="dark"] .script-library-stack-item {
    background: rgba(148, 163, 184, 0.15);
    color: #cbd5e1;
}

[data-theme="dark"] .script-library-path {
    color: #c7d2fe;
    background: rgba(129, 140, 248, 0.2);
}

[data-theme="dark"] .script-library-highlights li::before {
    background: #818cf8;
}

[data-theme="dark"] .script-library-action--repo {
    background: rgba(129, 140, 248, 0.14);
    border-color: rgba(129, 140, 248, 0.34);
    color: #c7d2fe;
}

[data-theme="dark"] .script-library-action--repo:hover {
    background: rgba(129, 140, 248, 0.24);
}

[data-theme="dark"] .script-library-action--sample {
    background: rgba(45, 212, 191, 0.12);
    border-color: rgba(45, 212, 191, 0.3);
    color: #5eead4;
}

[data-theme="dark"] .script-library-action--sample:hover {
    background: rgba(45, 212, 191, 0.2);
}

[data-theme="dark"] .project-tag {
    background: var(--bg-tertiary) !important;
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .skill-card {
    background: var(--card-bg) !important;
}

[data-theme="dark"] footer {
    background-color: #0a0f1e !important;
}

footer {
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
}

footer .footer-content {
    position: relative;
    z-index: 2;
}

body.fun-mode footer {
    padding-bottom: 8rem;
}

.fun-footer-planet {
    position: absolute;
    bottom: -55vh;
    left: 50%;
    width: 120vw;
    height: 60vh;
    border-radius: 50% 50% 0 0;
    transform: translateX(-50%);
    background: radial-gradient(circle at 50% 100%, #1e293b 0%, #0f172a 60%, #020617 100%);
    box-shadow: inset 0 4px 20px rgba(148, 163, 184, 0.1);
    opacity: 1;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
    transition: all 0.5s ease;
}

body.fun-mode .fun-footer-planet {
    background: radial-gradient(circle at 50% 100%, #1e293b 0%, #0f172a 60%, #020617 100%);
    box-shadow: 
        0 -4px 60px rgba(99, 102, 241, 0.3),
        inset 0 4px 40px rgba(147, 197, 253, 0.1);
}

/* Planet surface detail - crater-like rings */
.fun-footer-planet::before {
    content: "";
    position: absolute;
    top: 10%;
    left: 10%;
    width: 80%;
    height: 40%;
    border-radius: 50%;
    border-top: 2px solid rgba(255, 255, 255, 0.05);
    transform: rotate(-5deg);
    opacity: 0.5;
    transition: opacity 0.5s ease;
}

/* Planet atmosphere glow & aurora (Fun Mode) */
.fun-footer-planet::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 50% 50% 0 0;
    opacity: 0;
    transition: opacity 0.5s ease;
    background: 
        radial-gradient(circle at 30% 80%, rgba(56, 189, 248, 0.15), transparent 45%),
        radial-gradient(circle at 70% 80%, rgba(217, 70, 239, 0.15), transparent 45%),
        linear-gradient(0deg, transparent 50%, rgba(99, 102, 241, 0.1) 90%);
    filter: blur(20px);
    background-size: 160% 160%;
    animation: auroraDrift 7s ease-in-out infinite;
}

body.fun-mode .fun-footer-planet::after {
    opacity: 1;
}

/* Footer Starfield (Fun Mode Only) */
.footer-content {
    position: relative;
    z-index: 10;
}

body.fun-mode footer::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: 
        radial-gradient(1px 1px at 10% 10%, rgba(255,255,255,0.8) 100%, transparent),
        radial-gradient(1px 1px at 20% 40%, rgba(255,255,255,0.6) 100%, transparent),
        radial-gradient(1.5px 1.5px at 50% 50%, rgba(255,255,255,0.7) 100%, transparent),
        radial-gradient(1px 1px at 80% 30%, rgba(255,255,255,0.6) 100%, transparent),
        radial-gradient(2px 2px at 90% 80%, rgba(255,255,255,0.5) 100%, transparent);
    background-size: 500px 500px;
    opacity: 0.25;
    z-index: 1;
    pointer-events: none;
    animation: simpleTwinkle 4s ease-in-out infinite alternate;
}

@keyframes simpleTwinkle {
    0% { opacity: 0.15; transform: translateY(0); }
    100% { opacity: 0.3; transform: translateY(-5px); }
}

@keyframes auroraDrift {
    0% {
        transform: translateY(0) scale(1);
        background-position: 0% 50%;
    }
    50% {
        transform: translateY(-6px) scale(1.02);
        background-position: 70% 40%;
    }
    100% {
        transform: translateY(0) scale(1);
        background-position: 0% 50%;
    }
}

/* Dark mode: Better contrast for projects and skills section backgrounds */
[data-theme="dark"] #projects,
[data-theme="dark"] #skills {
    background-color: #0f172a !important;
}

/* Dark mode: Contact form drop shadow */
[data-theme="dark"] .contact-form {
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(148, 163, 184, 0.1);
}

/* Light fun-mode: Footer text contrast */
html:not([data-theme="dark"]) body.fun-mode footer {
    background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
}

html:not([data-theme="dark"]) body.fun-mode footer,
html:not([data-theme="dark"]) body.fun-mode footer p,
html:not([data-theme="dark"]) body.fun-mode footer span,
html:not([data-theme="dark"]) body.fun-mode footer a {
    color: #e2e8f0 !important;
}

html:not([data-theme="dark"]) body.fun-mode footer .text-gray-400,
html:not([data-theme="dark"]) body.fun-mode footer .text-gray-500 {
    color: #cbd5e1 !important;
}

html:not([data-theme="dark"]) body.fun-mode footer a:hover {
    color: #a5b4fc !important;
}

/* Dark mode: Social icons - make them visible with colored backgrounds */
[data-theme="dark"] .contact-social-btn {
    background: var(--bg-tertiary) !important;
}

[data-theme="dark"] .contact-social-btn i,
[data-theme="dark"] .contact-social-btn svg {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .contact-social-btn:hover {
    background: #4f46e5 !important;
}

[data-theme="dark"] .contact-social-btn:hover i,
[data-theme="dark"] .contact-social-btn:hover svg {
    color: #ffffff !important;
}

[data-theme="dark"] .bg-indigo-100 {
    background-color: rgba(129, 140, 248, 0.2) !important;
}

/* Dark mode: Fix card body fade gradient */
[data-theme="dark"] .card-body::after {
    background: linear-gradient(to bottom, rgba(30, 41, 59, 0) 0%, rgba(30, 41, 59, 0.95) 70%) !important;
}

/* Dark mode: Lighter project links for better visibility */
[data-theme="dark"] .view-link,
[data-theme="dark"] .project-link a {
    color: #a5b4fc !important;
}

[data-theme="dark"] .view-link:hover,
[data-theme="dark"] .project-link a:hover {
    color: #c7d2fe !important;
}

/* Dark mode: Section titles - MUST be last to override Tailwind classes */
[data-theme="dark"] h2.text-gray-800 {
    color: #c7d2fe !important;
}

/* Fun Mode Project Page Polish */
body.fun-mode .project-tag {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid transparent;
}

html:not([data-theme="dark"]) body.fun-mode .project-tag {
    background: linear-gradient(135deg, rgba(224, 231, 255, 0.95), rgba(191, 219, 254, 0.9));
    color: #312e81;
    border-color: rgba(99, 102, 241, 0.25);
    box-shadow: 0 6px 12px rgba(99, 102, 241, 0.18);
}

body.fun-mode .project-tag:hover {
    transform: translateY(-1px);
    border-color: rgba(129, 140, 248, 0.4);
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
}

html:not([data-theme="dark"]) body.fun-mode .project-tag:hover {
    border-color: rgba(59, 130, 246, 0.45);
    box-shadow: 0 8px 16px rgba(59, 130, 246, 0.22);
}

body.fun-mode .project-tag::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
    );
    transform: skewX(-20deg);
    animation: tagShimmer 3s infinite;
}

html:not([data-theme="dark"]) body.fun-mode .project-tag::before {
    background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.35), transparent);
}

[data-theme="dark"] body.fun-mode .project-tag::before {
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent
    );
}

@keyframes tagShimmer {
    0% { left: -100%; }
    20% { left: 200%; }
    100% { left: 200%; }
}

/* Fun Mode Section Title Accent */
body.fun-mode .section-title-underline {
    background: linear-gradient(90deg, #f472b6 0%, #818cf8 50%, #22d3ee 100%);
    background-size: 200% auto;
    animation: gradientShift 3s linear infinite;
    box-shadow: 0 0 10px rgba(129, 140, 248, 0.4);
}

/* Fun Mode Card Tilt Effect */
body.fun-mode .project-card,
body.fun-mode .experience-card {
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease, border-color 0.3s ease;
    will-change: transform;
}

body.fun-mode .project-card:hover,
body.fun-mode .project-list-card:hover,
body.fun-mode .experience-card:hover {
    transform: translate3d(var(--flip-x), var(--flip-y), 0) translateY(-4px) perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
    z-index: 10;
}

body.fun-mode .project-card:hover,
body.fun-mode .project-list-card:hover,
body.fun-mode .experience-card:hover,
body.fun-mode .analyst-insight-card:hover {
    animation: cardBreathFun 2.4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

@media (max-width: 960px) {
    .experience-card::after {
        width: 100%;
        opacity: 0.18;
    }

    .experience-card::before {
        background: linear-gradient(180deg, rgba(248, 250, 252, 0.98) 0%, rgba(248, 250, 252, 0.92) 65%, rgba(248, 250, 252, 0.65) 100%);
    }

    .experience-card-content {
        max-width: 100%;
        padding: 2rem;
    }

    .experience-inset {
        position: relative;
        right: auto;
        top: auto;
        transform: none;
        width: 100%;
        height: 260px;
        margin-top: 1.5rem;
        border-width: 1px;
        background-position: center 40%;
    }
}

/* Tablet: give inset images more height so photos aren't too cropped */
@media (min-width: 769px) and (max-width: 960px) {
    .experience-inset {
        height: 360px;
    }
}
